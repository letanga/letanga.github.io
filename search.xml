<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>模电复习</title>
      <link href="2020/04/03/%E6%A8%A1%E7%94%B5%E5%A4%8D%E4%B9%A0/"/>
      <url>2020/04/03/%E6%A8%A1%E7%94%B5%E5%A4%8D%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h2 id="00-01-绪论"><a class="markdownIt-Anchor" href="#00-01-绪论"></a> 00-01 绪论</h2><ol><li>为什么要学模电？学什么？怎么学？</li><li>电子技术是研究电子器件、电子电路及其应用的科学技术</li></ol><h2 id="00-02-基本概念"><a class="markdownIt-Anchor" href="#00-02-基本概念"></a> 00-02 基本概念</h2><ol><li>电子系统处理信号，信号是信息的载体</li><li>模拟信号和数字信号的概念</li><li>通过A/D和D/A将模拟和数字信号进行转换</li></ol><h2 id="01-01-本征半导体"><a class="markdownIt-Anchor" href="#01-01-本征半导体"></a> 01-01 本征半导体</h2><ol><li>半导体材料：锗、硅、砷化镓和一些硫化物、氧化物</li><li>半导体的导电特性：热敏性、光敏性、掺杂性</li><li>本征半导体的概念</li><li>本征激发和复合的概念</li><li>自由电子和空穴成为载流子</li></ol><h2 id="01-02-杂质半导体"><a class="markdownIt-Anchor" href="#01-02-杂质半导体"></a> 01-02 杂质半导体</h2><ol><li>掺入三价或者五价元素</li><li>掺入五价元素，如磷原子   N型半导体/电子半导体</li><li>掺入三价元素，如硼原子   P型半导体/空穴半导体</li><li>多子和少子的概念</li><li>在杂志半导体中，多子的浓度主要取决于掺杂浓度（本征激发），少子的浓度与温度有较大关系</li><li>在杂质半导体中，少子数目比未掺杂的数目减少了</li><li>杂质半导体呈电中性，本身不带电</li><li>在杂质半导体中，温度变化，载流子数目变化，多子和少子数目变化相同，浓度变化不同，少子浓度变化大</li></ol><h2 id="01-03-pn结"><a class="markdownIt-Anchor" href="#01-03-pn结"></a> 01-03 PN结</h2><ol><li>空间电荷区的概念及形成（耗尽层，势垒区）</li><li>内电场的概念，内电场阻碍多子运动，少子在内电场的作用下运动，称为漂移运动</li><li>达到动态平衡，空间电荷区厚度保持不变</li><li>掺杂浓度不同，空间电荷区在两种不同杂质半导体的厚度不同，浓度低的厚度大</li><li>加正偏电压，产生外电场，多子在外电场的作用下定向移动形成正向电流</li><li>加正偏电压，产生外电场，外电场阻碍多子的运动，促进少子漂移运动，增大空间电荷区厚度</li><li>温度越高，少子浓度越大，反向电流增大</li><li>势垒电容<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mi>b</mi></msub></mrow><annotation encoding="application/x-tex">C_b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，扩散电容<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mi>d</mi></msub></mrow><annotation encoding="application/x-tex">C_d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的概念，总电容=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mi>b</mi></msub><mo>+</mo><msub><mi>C</mi><mi>d</mi></msub></mrow><annotation encoding="application/x-tex">C_b+C_d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li><li>势垒电容，反偏时起主要作用，扩散电容正偏时起主要作用</li><li>任何电子或电气系统都是对频率敏感的</li></ol><h2 id="02-01-二极管的组成"><a class="markdownIt-Anchor" href="#02-01-二极管的组成"></a> 02-01 二极管的组成</h2><ol><li>二极管的分类：小功率、大功率、稳压、点接触型、面接触型、平面型</li><li>点接触型：结面积小，结允许电流小，结电容小，最高工作频率高</li><li>面接触型：结面积大，结允许电流大，结电容大，最高工作频率底</li><li>平面型：结面积可大可小，小的工作频率高，大的允许电流大</li></ol><h2 id="02-02-二极管的伏安特性及电流方程"><a class="markdownIt-Anchor" href="#02-02-二极管的伏安特性及电流方程"></a> 02-02 二极管的伏安特性及电流方程</h2><ol><li><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>=</mo><msub><mi>f</mi><mo stretchy="false">(</mo></msub><mi>u</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">i=f_(u)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3551999999999999em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mopen mtight">(</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"><span></span></span></span></span></span></span><span class="mord mathdefault">u</span><span class="mclose">)</span></span></span></span></p></li><li><p>测量电路</p></li><li><p>曲线图，特点：非线性</p></li><li><p>工作区划分：死区，导通区，反向截至区，反向击穿区</p></li><li><p>反向饱和电流和导通压降在图中的位置及各种半导体材料的值</p></li><li><p>电击穿（可逆）：雪崩击穿（掺杂浓度低），齐纳击穿（掺杂浓度高）</p></li><li><p>热击穿（不可逆）</p></li><li><p>特性方程：<img src="https://s1.ax1x.com/2020/09/30/0K9YCj.png" alt="" /></p><p>温度电压当量<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>U</mi><mi>T</mi></msub><mo>=</mo><mn>26</mn><mi>m</mi><mi>v</mi></mrow><annotation encoding="application/x-tex">U_T=26mv</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">6</span><span class="mord mathdefault">m</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span></span></span></span></p></li><li><p>正向偏置: <img src="https://s1.ax1x.com/2020/09/30/0K9s54.png" alt="" /></p><p>反向偏置，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>I</mi><mi>D</mi></msub><mo>≈</mo><msub><mi>I</mi><mi>S</mi></msub></mrow><annotation encoding="application/x-tex">I_D\approx I_S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p></li><li><p>正向特性为指数曲线，反向特性为横轴平行线</p></li><li><p>电压不变，温度增大，正向特性曲线左移，反向特性曲线下移</p></li><li><p>温度对单行特性的影响较大</p></li><li><p>二极管的动态电阻个静态电阻的概念</p></li><li><p>静态电阻<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>R</mi><mi>D</mi></msub><mo>=</mo><mfrac><msub><mi>V</mi><mi>D</mi></msub><msub><mi>I</mi><mi>D</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">R_D=\frac{V_D}{I_D}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.3339409999999998em;vertical-align:-0.44530499999999995em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8886359999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567071428571427em;margin-left:-0.07847em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.14329285714285717em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.410305em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567071428571427em;margin-left:-0.22222em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.14329285714285717em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.44530499999999995em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p></li><li><p>动态电阻<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>r</mi><mi>D</mi></msub><mo>=</mo><mfrac><mrow><mi mathvariant="normal">Δ</mi><msub><mi>V</mi><mi>D</mi></msub></mrow><mrow><mi mathvariant="normal">Δ</mi><msub><mi>I</mi><mi>D</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">r_D=\frac{\Delta V_D}{\Delta I_D}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.3339409999999998em;vertical-align:-0.44530499999999995em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8886359999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">Δ</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567071428571427em;margin-left:-0.07847em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.14329285714285717em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.410305em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">Δ</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567071428571427em;margin-left:-0.22222em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.14329285714285717em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.44530499999999995em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p></li></ol><h2 id="02-03-二极管的主要参数"><a class="markdownIt-Anchor" href="#02-03-二极管的主要参数"></a> 02-03 二极管的主要参数</h2><ol><li>最大整流电流<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>I</mi><mi>F</mi></msub></mrow><annotation encoding="application/x-tex">I_F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：二极管长期使用时允许二极管的最大正向平均电流</li><li>最大反向工作电压<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>U</mi><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">U_R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：保证二极管不被击穿而给出的反向峰值电压，一般是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>U</mi><mrow><mi>B</mi><mi>R</mi></mrow></msub></mrow><annotation encoding="application/x-tex">U_{BR}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li><li>反向电流<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>I</mi><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">I_R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：二极管加规定工作电压时的反向电流</li><li>最高工作频率<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>f</mi><mi>M</mi></msub></mrow><annotation encoding="application/x-tex">f_M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：取决于PN结的结电容大小，超过的话，单向导电性变得较差</li><li>选用二极管的一般原则：<ul><li>要求导通压降较小时选锗管，要求反向电流小时选硅管</li><li>要求工作电流大时选面接触型</li><li>要求频率高时选点接触型</li><li>要求反向击穿电压高时选硅管</li><li>要求温度特性好时选硅管</li></ul></li><li>为什么二极管的反向饱和电流与所加的电压基本没有关系，而当温度升高时又明显增大</li><li>怎样用万用表判断二极管的正负极和管子的好坏</li><li>用万用表的X10档测得二极管的正向电阻为200欧姆，若用X100档测量，读数会有什么变化</li></ol><h2 id="03-01-二极管电路的分析思路"><a class="markdownIt-Anchor" href="#03-01-二极管电路的分析思路"></a> 03-01 二极管电路的分析思路</h2><ol><li><p>电源反接保护电路</p><p><img src="https://s1.ax1x.com/2020/09/25/09GZ4J.png" alt="" /></p></li><li><p>叠加原理，信号响应=直流响应+交流响应</p></li><li><p>静态和动态的概念</p></li><li><p>分析电路先静态后动态</p></li><li><p>符号规定：</p><ul><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>I</mi><mi>B</mi></msub></mrow><annotation encoding="application/x-tex">I_B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 直流分量（大符号，大下标）</li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>i</mi><mi>b</mi></msub></mrow><annotation encoding="application/x-tex">i_b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 交流分量（小符号，小下标）</li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>i</mi><mi>B</mi></msub></mrow><annotation encoding="application/x-tex">i_B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 电流总瞬时值（小符号，大下标）</li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>I</mi><mi>b</mi></msub></mrow><annotation encoding="application/x-tex">I_b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 电流有效值（大符号，小下标）</li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>I</mi><mrow><mi>b</mi><mi>m</mi></mrow></msub></mrow><annotation encoding="application/x-tex">I_{bm}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">b</span><span class="mord mathdefault mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 交流幅值</li></ul></li><li><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>i</mi><mi>B</mi></msub><mo>=</mo><msub><mi>I</mi><mi>B</mi></msub><mo>+</mo><msub><mi>i</mi><mi>b</mi></msub></mrow><annotation encoding="application/x-tex">i_B=I_B+i_b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p></li><li><p>交流信号驮载在直流信号之上</p></li><li><p>分析方法：</p><ul><li>数值求解法</li><li>图解法</li><li>等效模型分析方法</li></ul></li></ol><h2 id="03-02-二极管电路图解分析方法"><a class="markdownIt-Anchor" href="#03-02-二极管电路图解分析方法"></a> 03-02 二极管电路图解分析方法</h2><ol><li>图解分析：利用器件伏安特性曲线和外电路的特性曲线，通过作图的方法求解电路问题</li><li>静态分析：假设交流信号为0，得到直流通路，结合外电路的特性曲线得到静态工作点Q(<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>I</mi><mi>D</mi></msub><mo separator="true">,</mo><msub><mi>V</mi><mi>D</mi></msub></mrow><annotation encoding="application/x-tex">I_D,V_D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>)</li><li>动态分析：直流电源置0，得到交流通路，在静态工作点基础上，进行小信号分析</li><li>图解法：<ul><li>优点：直观，帮助理解电路参数对特性的影响</li><li>缺点：有作图误差，某些参数无法求取</li><li>前提：已知器件的实际伏安特性曲线</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> 电子技术基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 模电 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DNS污染问题</title>
      <link href="2017/11/03/DNS%E6%B1%A1%E6%9F%93%E9%97%AE%E9%A2%98/"/>
      <url>2017/11/03/DNS%E6%B1%A1%E6%9F%93%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="什么是dns污染"><a class="markdownIt-Anchor" href="#什么是dns污染"></a> 什么是DNS污染</h2><p>​某些网络运营商为了某些目的，对DNS进行了某些操作，导致使用ISP的正常上网设置无法通过域名取得正确的IP地址。某些国家或地区出于某些目的为了防止某网站被访问，而且其又掌握部分国际DNS根目录服务器或镜像，也会利用此方法进行屏蔽。<br />​常用的手段有：DNS劫持和DNS污染。</p><h2 id="防除方法"><a class="markdownIt-Anchor" href="#防除方法"></a> 防除方法</h2><p>​对付DNS劫持，只需要把系统的DNS设置手动切换为国外的DNS服务器的IP地址即可解决。<br />对于DNS污染，一般除了使用代理服务器和VPN之类的软件之外，并没有什么其它办法。但是利用我们对DNS污染的了解，还是可以做到不用代理服务器和VPN之类的软件就能解决DNS污染的问题，从而在不使用代理服务器或VPN的情况下访问原本访问不了的一些网站。当然这无法解决所有问题，当一些无法访问的网站本身并不是由DNS污染问题导致的时候，还是需要使用代理服务器或VPN才能访问的。<br />​DNS污染的数据包并不是在网络数据包经过的路由器上，而是在其旁路产生的。所以DNS污染并无法阻止正确的DNS解析结果返回，但由于旁路产生的数据包发回的速度较国外DNS服务器发回的快，操作系统认为第一个收到的数据包就是返回结果，从而忽略其后收到的数据包，从而使得DNS污染得逞。而某些国家的DNS污染在一段时期内的污染IP却是固定不变的，从而可以忽略返回结果是这些IP地址的数据包，直接解决DNS污染的问题。</p><h2 id="验证是否遭遇dns污染"><a class="markdownIt-Anchor" href="#验证是否遭遇dns污染"></a> 验证是否遭遇DNS污染</h2><ol><li><p>Powershell中输入</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ipconfig /all </span><br></pre></td></tr></table></figure><p>在下“DNS 服务器”里找到你使用的DNS服务器地址。</p></li><li><p>再输入</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nslookup https://letanga.github.io（你的域名） 你的DNS服务器IP</span><br></pre></td></tr></table></figure><p>查看是否能解析。</p></li><li><p>再输入</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nslookup https://letanga.github.io8.<span class="number">8.8</span>.<span class="number">8</span></span><br></pre></td></tr></table></figure><p>使用Google的DNS服务器验证。</p></li></ol><h2 id="解决办法"><a class="markdownIt-Anchor" href="#解决办法"></a> 解决办法</h2><ol><li>手动修改DNS地址</li><li>使用各种SSH加密代理，在加密代理里进行远程DNS解析，或者使用VPN上网</li><li>修改hosts文件，操作系统中hosts的权限优先级高于DNS服务器，操作系统在访问某个域名时，会先检测HOSTS文件，然后再查询DNS服务器。可以在hosts添加受到污染的DNS地址来解决DNS污染和DNS劫持。</li><li>通过一些软件编程处理，可以直接忽略返回结果是虚假IP地址的数据包，直接解决DNS污染的问题</li><li>如果你是Firefox only用户，并且只用Firefox，又懒得折腾，直接打开Firefox的远程DNS解析就行了。在地址栏中输入：about:config找到network.proxy.socks_remote_dns一项改成true</li><li>使用DNSCrypt软件，此软件与使用的OpenDNS直接建立相对安全的TCP连接并加密请求数据，从而不会被污染</li></ol><h2 id="手动修改dns地址"><a class="markdownIt-Anchor" href="#手动修改dns地址"></a> 手动修改DNS地址</h2><ol><li>任务栏按鼠标右键打开“网络和Internet”设置</li><li>打开更改适配器选项</li><li>鼠标右键点击连接的适配器属性</li><li>双击列表中的Internet协议版本4</li><li>弹出窗口中选择使用下面的DNS服务地址</li><li>修改需要更换的DNS服务地址</li></ol><h2 id="如何修改hosts文件"><a class="markdownIt-Anchor" href="#如何修改hosts文件"></a> 如何修改hosts文件</h2><p>Windows 用户hosts文件是在“c:\windows\system32\drivers\etc，注意这个文件一定是在系统盘，如果你的系统在D盘请自行修改前面的盘符，由于Win10系统默认是没有权限去编辑保存系统里的文件，解决方法：</p><p>方法一：把自己的帐户权限提高，在属性-安全里面修改权限，更改hosts为允许安全控制状态</p><p>方法二：将hosts文件复制/移动到桌面，用记事本打开！将修改后的hosts文件放入原来的位置替换以前的hosts文件即可</p><p>方法三：用Notepad++打开hosts文件，修改后保存时提示使用管理员模式修改点确定再次保存</p><h3 id="解决dns污染问题"><a class="markdownIt-Anchor" href="#解决dns污染问题"></a> 解决DNS污染问题</h3><p>打开hosts文件，在末尾加上可用的DNS   无法解析的域名，如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">223.6.6.6 letanga.github.io</span><br></pre></td></tr></table></figure><p>常用的DNS有：</p><ul><li>阿里DNS：223.5.5.5 / 223.6.6.6</li><li>114 DNS：114.114.114.114</li><li>Google DNS：8.8.8.8</li><li>百度DNS：180.76.76.76</li></ul>]]></content>
      
      
      <categories>
          
          <category> Windows </category>
          
          <category> DNS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> DNS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VMware虚拟机安装黑苹果</title>
      <link href="2017/10/27/VMware15%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E9%BB%91%E8%8B%B9%E6%9E%9C/"/>
      <url>2017/10/27/VMware15%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E9%BB%91%E8%8B%B9%E6%9E%9C/</url>
      
        <content type="html"><![CDATA[<h2 id="准备"><a class="markdownIt-Anchor" href="#准备"></a> 准备</h2><p>以Vmware15为例:</p><ol><li>下载黑苹果镜像，地址：<a href="https://pan.baidu.com/s/17maORsJXqHmw0MXumBsNxQ">点击下载</a>，提取码e8qp；</li><li>安装Vmware15，步骤省略，<a href="https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html">VMware15官方下载</a>；</li><li>安装VMware的mac os系统补丁unlock，开源地址：<a href="https://github.com/DrDonk/unlocker.git">点击进入</a>，不会使用用git的，直接点release，下载源码解压，点win-install.cmd安装；</li></ol><h2 id="新建虚拟机"><a class="markdownIt-Anchor" href="#新建虚拟机"></a> 新建虚拟机</h2><ol><li><p>打开VMware15，新建虚拟机；</p></li><li><p>选择下载的镜像，注意右下角要选择所有文件，不然看不到镜像；</p></li><li><p>选择Apple Mac os x(M)，版本选择10.14（根据镜像版本选择）；</p></li><li><p>设置虚拟机名称，安装位置，配置等，设置好了点击完成；</p></li></ol><h2 id="开始安装"><a class="markdownIt-Anchor" href="#开始安装"></a> 开始安装</h2><ol><li><p>开启虚拟机，可能会出现无法获取VMCI驱动程序版本错误（一般家庭版系统会出现这样的错误，我用的企业版win10不会出现此错误），解决方法见下面问题处理</p></li><li><p>等待</p></li><li><p>进入系统安装界面，选择语言；</p></li><li><p>点磁盘工具，格式化磁盘，点抹除</p><p>名称随意，</p><p>格式日志式或者APFS都行，</p><p>方案选择GUI分区图,</p><p>完成后，选择安装macos</p></li><li><p>选择刚格式化的磁盘，安装系统</p></li><li><p>等待完成重启</p></li><li><p>安装好就能进入系统了，但此时可能不能全屏，解决办法见下面常见问题解决办法。</p></li></ol><h2 id="问题处理"><a class="markdownIt-Anchor" href="#问题处理"></a> 问题处理</h2><ol><li><p>虚拟机无法获取 vmci 驱动程序</p><p>解决方法：以文本方式虚拟机安装位置的*.vmx文件，将vmci0.present=&quot;TRUE“的TRUE改为false；</p></li><li><p>VMware不可恢复错误</p><p>解决方法：以文本方式虚拟机安装位置的*.vmx文件，在vmci0.present后添加一行vmci0.version = ”0“，注意等号前面有空格；</p></li><li><p>不能全屏的问题</p><p>解决方法：</p><ol><li><p>桌面有个光盘图标，鼠标右键选择推出；</p></li><li><p>下载Darwin，<a href="https://pan.baidu.com/s/1VWxpQT4G3ApZnwV7M1vuTg">下载地址</a>，提取码qfm1，设置虚拟机挂载该文件，重启虚拟机；</p></li><li><p>桌面会多了VMware tools图标，打开安装vmtools；</p></li><li><p>关闭虚拟机，设置该虚拟机显示器，选择指定显示器，设置分辨率位你电脑的最大分辨率。</p></li><li><p>开启虚拟机就能全屏了，如果不行，重装vmtools重启，多试几次。</p></li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> Windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 黑苹果 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Win10家庭版启用组策略gpedit</title>
      <link href="2017/10/12/Win10%E5%AE%B6%E5%BA%AD%E7%89%88%E5%90%AF%E7%94%A8%E7%BB%84%E7%AD%96%E7%95%A5gpedit/"/>
      <url>2017/10/12/Win10%E5%AE%B6%E5%BA%AD%E7%89%88%E5%90%AF%E7%94%A8%E7%BB%84%E7%AD%96%E7%95%A5gpedit/</url>
      
        <content type="html"><![CDATA[<ol><li>新建文本文件；</li><li>编辑文本内容:</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line">　　<span class="built_in">pushd</span> <span class="string">&quot;%~dp0&quot;</span></span><br><span class="line">　　dir /b %systemroot%\Windows\servicing\Packages\Microsoft-Windows-GroupPolicy-ClientExtensions-Package~3*.mum &gt;gp.txt</span><br><span class="line">　　dir /b  %systemroot%\servicing\Packages\Microsoft-Windows-GroupPolicy-ClientTools-Package~3*.mum &gt;&gt;gp.txt</span><br><span class="line">　　<span class="keyword">for</span> /f %%i <span class="keyword">in</span> (<span class="string">&#x27;findstr /i . gp.txt 2^&gt;nul&#x27;</span>) <span class="keyword">do</span> dism /online /norestart /add-package:<span class="string">&quot;%systemroot%\servicing\Packages\%%i&quot;</span></span><br><span class="line">　　pause</span><br></pre></td></tr></table></figure><p>3.另存为gpedit.bat ；<br />4.以管理员身份运行，等待完成。</p>]]></content>
      
      
      <categories>
          
          <category> Windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>adb命令使用大全</title>
      <link href="2017/09/03/adb%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8%E5%A4%A7%E5%85%A8/"/>
      <url>2017/09/03/adb%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8%E5%A4%A7%E5%85%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="awesome-adb"><a class="markdownIt-Anchor" href="#awesome-adb"></a> Awesome Adb</h2><p>ADB，即 Android Debug Bridge，它是 Android 开发/测试人员不可替代的强大工具，也是 Android 设备玩家的好玩具。</p><p><strong>注：</strong> 有部分命令的支持情况可能与 Android 系统版本及定制 ROM 的实现有关。</p><h2 id="基本用法"><a class="markdownIt-Anchor" href="#基本用法"></a> 基本用法</h2><h3 id="命令语法"><a class="markdownIt-Anchor" href="#命令语法"></a> 命令语法</h3><p>adb 命令的基本语法如下：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb [-d|-e|-s &lt;serialNumber&gt;] &lt;<span class="built_in">command</span>&gt;</span><br></pre></td></tr></table></figure><p>如果只有一个设备/模拟器连接时，可以省略掉 <code>[-d|-e|-s &lt;serialNumber&gt;]</code> 这一部分，直接使用 <code>adb &lt;command&gt;</code>。</p><h3 id="为命令指定目标设备"><a class="markdownIt-Anchor" href="#为命令指定目标设备"></a> 为命令指定目标设备</h3><p>如果有多个设备/模拟器连接，则需要为命令指定目标设备。</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-d</td><td>指定当前唯一通过 USB 连接的 Android 设备为命令目标</td></tr><tr><td>-e</td><td>指定当前唯一运行的模拟器为命令目标</td></tr><tr><td><code>-s &lt;serialNumber&gt;</code></td><td>指定相应 serialNumber 号的设备/模拟器为命令目标</td></tr></tbody></table><p>在多个设备/模拟器连接的情况下较常用的是 <code>-s &lt;serialNumber&gt;</code> 参数，serialNumber 可以通过 <code>adb devices</code> 命令获取。如：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ adb devices</span><br><span class="line"></span><br><span class="line">List of devices attached</span><br><span class="line">cf264b8fdevice</span><br><span class="line">emulator-5554device</span><br><span class="line">10.129.164.6:5555device</span><br></pre></td></tr></table></figure><p>输出里的 <code>cf264b8f</code>、<code>emulator-5554</code> 和 <code>10.129.164.6:5555</code> 即为 serialNumber。</p><p>比如这时想指定 <code>cf264b8f</code> 这个设备来运行 adb 命令获取屏幕分辨率：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb -s cf264b8f shell wm size</span><br></pre></td></tr></table></figure><p>又如想给 <code>10.129.164.6:5555</code> 这个设备安装应用（<em>这种形式的 serialNumber 格式为 <code>&lt;IP&gt;:&lt;Port&gt;</code>，一般为无线连接的设备或 Genymotion 等第三方 Android 模拟器</em>）：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb -s 10.129.164.6:5555 install test.apk</span><br></pre></td></tr></table></figure><p><strong>遇到多设备/模拟器的情况均使用这几个参数为命令指定目标设备，下文中为简化描述，不再重复。</strong></p><h3 id="启动停止"><a class="markdownIt-Anchor" href="#启动停止"></a> 启动/停止</h3><p>启动 adb server 命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb start-server</span><br></pre></td></tr></table></figure><p>（一般无需手动执行此命令，在运行 adb 命令时若发现 adb server 没有启动会自动调起。）</p><p>停止 adb server 命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb kill-server</span><br></pre></td></tr></table></figure><h3 id="查看-adb-版本"><a class="markdownIt-Anchor" href="#查看-adb-版本"></a> 查看 adb 版本</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb version</span><br></pre></td></tr></table></figure><p>示例输出：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Android Debug Bridge version 1.0.36</span><br><span class="line">Revision 8f855a3d9b35-android</span><br></pre></td></tr></table></figure><h3 id="以-root-权限运行-adbd"><a class="markdownIt-Anchor" href="#以-root-权限运行-adbd"></a> 以 root 权限运行 adbd</h3><p>adb 的运行原理是 PC 端的 adb server 与手机端的守护进程 adbd 建立连接，然后 PC 端的 adb client 通过 adb server 转发命令，adbd 接收命令后解析运行。</p><p>所以如果 adbd 以普通权限执行，有些需要 root 权限才能执行的命令无法直接用 <code>adb xxx</code> 执行。这时可以 <code>adb shell</code> 然后 <code>su</code> 后执行命令，也可以让 adbd 以 root 权限执行，这个就能随意执行高权限命令了。</p><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb root</span><br></pre></td></tr></table></figure><p>正常输出：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">restarting adbd as root</span><br></pre></td></tr></table></figure><p>现在再运行 <code>adb shell</code>，看看命令行提示符是不是变成 <code>#</code> 了？</p><p>有些手机 root 后也无法通过 <code>adb root</code> 命令让 adbd 以 root 权限执行，比如三星的部分机型，会提示 <code>adbd cannot run as root in production builds</code>，此时可以先安装 adbd Insecure，然后 <code>adb root</code> 试试。</p><p>相应地，如果要恢复 adbd 为非 root 权限的话，可以使用 <code>adb unroot</code> 命令。</p><h3 id="指定-adb-server-的网络端口"><a class="markdownIt-Anchor" href="#指定-adb-server-的网络端口"></a> 指定 adb server 的网络端口</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb -P &lt;port&gt; start-server</span><br></pre></td></tr></table></figure><p>默认端口为 5037。</p><h2 id="设备连接管理"><a class="markdownIt-Anchor" href="#设备连接管理"></a> 设备连接管理</h2><h3 id="查询已连接设备模拟器"><a class="markdownIt-Anchor" href="#查询已连接设备模拟器"></a> 查询已连接设备/模拟器</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb devices</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List of devices attached</span><br><span class="line">cf264b8fdevice</span><br><span class="line">emulator-5554device</span><br><span class="line">10.129.164.6:5555device</span><br></pre></td></tr></table></figure><p>输出格式为 <code>[serialNumber] [state]</code>，serialNumber 即我们常说的 SN，state 有如下几种：</p><ul><li><p><code>offline</code> —— 表示设备未连接成功或无响应。</p></li><li><p><code>device</code> —— 设备已连接。注意这个状态并不能标识 Android 系统已经完全启动和可操作，在设备启动过程中设备实例就可连接到 adb，但启动完毕后系统才处于可操作状态。</p></li><li><p><code>no device</code> —— 没有设备/模拟器连接。</p></li></ul><p>以上输出显示当前已经连接了三台设备/模拟器，<code>cf264b8f</code>、<code>emulator-5554</code> 和 <code>10.129.164.6:5555</code> 分别是它们的 SN。从 <code>emulator-5554</code> 这个名字可以看出它是一个 Android 模拟器，而 <code>10.129.164.6:5555</code> 这种形为 <code>&lt;IP&gt;:&lt;Port&gt;</code> 的 serialNumber 一般是无线连接的设备或 Genymotion 等第三方 Android 模拟器。</p><p>常见异常输出：</p><ol><li><p>没有设备/模拟器连接成功。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List of devices attached</span><br></pre></td></tr></table></figure></li><li><p>设备/模拟器未连接到 adb 或无响应。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List of devices attached</span><br><span class="line">cf264b8foffline</span><br></pre></td></tr></table></figure></li></ol><h3 id="usb-连接"><a class="markdownIt-Anchor" href="#usb-连接"></a> USB 连接</h3><p>通过 USB 连接来正常使用 adb 需要保证几点：</p><ol><li><p>硬件状态正常。</p><p>包括 Android 设备处于正常开机状态，USB 连接线和各种接口完好。</p></li><li><p>Android 设备的开发者选项和 USB 调试模式已开启。</p><p>可以到「设置」-「开发者选项」-「Android 调试」查看。</p><p>如果在设置里找不到开发者选项，那需要通过一个彩蛋来让它显示出来：在「设置」-「关于手机」连续点击「版本号」7 次。</p></li><li><p>设备驱动状态正常。</p><p>这一点貌似在 Linux 和 Mac OS X 下不用操心，在 Windows 下有可能遇到需要安装驱动的情况，确认这一点可以右键「计算机」-「属性」，到「设备管理器」里查看相关设备上是否有黄色感叹号或问号，如果没有就说明驱动状态已经好了。否则可以下载一个手机助手类程序来安装驱动先。</p></li><li><p>通过 USB 线连接好电脑和设备后确认状态。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb devices</span><br></pre></td></tr></table></figure><p>如果能看到</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xxxxxx device</span><br></pre></td></tr></table></figure><p>说明连接成功。</p></li></ol><h3 id="无线连接需要借助-usb-线"><a class="markdownIt-Anchor" href="#无线连接需要借助-usb-线"></a> 无线连接（需要借助 USB 线）</h3><p>除了可以通过 USB 连接设备与电脑来使用 adb，也可以通过无线连接——虽然连接过程中也有需要使用 USB 的步骤，但是连接成功之后你的设备就可以在一定范围内摆脱 USB 连接线的限制啦！</p><p>操作步骤：</p><ol><li><p>将 Android 设备与要运行 adb 的电脑连接到同一个局域网，比如连到同一个 WiFi。</p></li><li><p>将设备与电脑通过 USB 线连接。</p><p>应确保连接成功（可运行 <code>adb devices</code> 看是否能列出该设备）。</p></li><li><p>让设备在 5555 端口监听 TCP/IP 连接：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb tcpip 5555</span><br></pre></td></tr></table></figure></li><li><p>断开 USB 连接。</p></li><li><p>找到设备的 IP 地址。</p><p>一般能在「设置」-「关于手机」-「状态信息」-「IP地址」找到，也可以使用下文里 [查看设备信息 - IP 地址][1] 一节里的方法用 adb 命令来查看。</p></li><li><p>通过 IP 地址连接设备。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb connect &lt;device-ip-address&gt;</span><br></pre></td></tr></table></figure><p>这里的 <code>&lt;device-ip-address&gt;</code> 就是上一步中找到的设备 IP 地址。</p></li><li><p>确认连接状态。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb devices</span><br></pre></td></tr></table></figure><p>如果能看到</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;device-ip-address&gt;:5555 device</span><br></pre></td></tr></table></figure><p>说明连接成功。</p></li></ol><p>如果连接不了，请确认 Android 设备与电脑是连接到了同一个 WiFi，然后再次执行 <code>adb connect &lt;device-ip-address&gt;</code> 那一步；</p><p>如果还是不行的话，通过 <code>adb kill-server</code> 重新启动 adb 然后从头再来一次试试。</p><p><strong>断开无线连接</strong></p><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb disconnect &lt;device-ip-address&gt;</span><br></pre></td></tr></table></figure><h3 id="无线连接无需借助-usb-线"><a class="markdownIt-Anchor" href="#无线连接无需借助-usb-线"></a> 无线连接（无需借助 USB 线）</h3><p><strong>注：需要 root 权限。</strong></p><p>上一节「无线连接（需要借助 USB 线）」是官方文档里介绍的方法，需要借助于 USB 数据线来实现无线连接。</p><p>既然我们想要实现无线连接，那能不能所有步骤下来都是无线的呢？答案是能的。</p><ol><li><p>在 Android 设备上安装一个终端模拟器。</p><p>已经安装过的设备可以跳过此步。我使用的终端模拟器下载地址是：<a href="https://jackpal.github.io/Android-Terminal-Emulator/">Terminal Emulator for Android Downloads</a></p></li><li><p>将 Android 设备与要运行 adb 的电脑连接到同一个局域网，比如连到同一个 WiFi。</p></li><li><p>打开 Android 设备上的终端模拟器，在里面依次运行命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su</span><br><span class="line">setprop service.adb.tcp.port 5555</span><br></pre></td></tr></table></figure></li><li><p>找到 Android 设备的 IP 地址。</p><p>一般能在「设置」-「关于手机」-「状态信息」-「IP地址」找到，也可以使用下文里 [查看设备信息 - IP 地址][1] 一节里的方法用 adb 命令来查看。</p></li><li><p>在电脑上通过 adb 和 IP 地址连接 Android 设备。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb connect &lt;device-ip-address&gt;</span><br></pre></td></tr></table></figure><p>这里的 <code>&lt;device-ip-address&gt;</code> 就是上一步中找到的设备 IP 地址。</p><p>如果能看到 <code>connected to &lt;device-ip-address&gt;:5555</code> 这样的输出则表示连接成功。</p></li></ol><p><em>节注一：</em></p><p>有的设备，比如小米 5S + MIUI 8.0 + Android 6.0.1 MXB48T，可能在第 5 步之前需要重启 adbd 服务，在设备的终端模拟器上运行：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">restart adbd</span><br></pre></td></tr></table></figure><p>如果 restart 无效，尝试以下命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stop adbd</span><br><span class="line">start adbd</span><br></pre></td></tr></table></figure><h2 id="应用管理"><a class="markdownIt-Anchor" href="#应用管理"></a> 应用管理</h2><h3 id="查看应用列表"><a class="markdownIt-Anchor" href="#查看应用列表"></a> 查看应用列表</h3><p>查看应用列表的基本命令格式是</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell pm list packages [-f] [-d] [-e] [-s] [-3] [-i] [-u] [--user USER_ID] [FILTER]</span><br></pre></td></tr></table></figure><p>即在 <code>adb shell pm list packages</code> 的基础上可以加一些参数进行过滤查看不同的列表，支持的过滤参数如下：</p><table><thead><tr><th>参数</th><th>显示列表</th></tr></thead><tbody><tr><td>无</td><td>所有应用</td></tr><tr><td>-f</td><td>显示应用关联的 apk 文件</td></tr><tr><td>-d</td><td>只显示 disabled 的应用</td></tr><tr><td>-e</td><td>只显示 enabled 的应用</td></tr><tr><td>-s</td><td>只显示系统应用</td></tr><tr><td>-3</td><td>只显示第三方应用</td></tr><tr><td>-i</td><td>显示应用的 installer</td></tr><tr><td>-u</td><td>包含已卸载应用</td></tr><tr><td><code>&lt;FILTER&gt;</code></td><td>包名包含 <code>&lt;FILTER&gt;</code> 字符串</td></tr></tbody></table><h4 id="所有应用"><a class="markdownIt-Anchor" href="#所有应用"></a> 所有应用</h4><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell pm list packages</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package:com.android.smoketest</span><br><span class="line">package:com.example.android.livecubes</span><br><span class="line">package:com.android.providers.telephony</span><br><span class="line">package:com.google.android.googlequicksearchbox</span><br><span class="line">package:com.android.providers.calendar</span><br><span class="line">package:com.android.providers.media</span><br><span class="line">package:com.android.protips</span><br><span class="line">package:com.android.documentsui</span><br><span class="line">package:com.android.gallery</span><br><span class="line">package:com.android.externalstorage</span><br><span class="line">...</span><br><span class="line">// other packages here</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="系统应用"><a class="markdownIt-Anchor" href="#系统应用"></a> 系统应用</h4><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell pm list packages -s</span><br></pre></td></tr></table></figure><h4 id="第三方应用"><a class="markdownIt-Anchor" href="#第三方应用"></a> 第三方应用</h4><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell pm list packages -3</span><br></pre></td></tr></table></figure><h4 id="包名包含某字符串的应用"><a class="markdownIt-Anchor" href="#包名包含某字符串的应用"></a> 包名包含某字符串的应用</h4><p>比如要查看包名包含字符串 <code>mazhuang</code> 的应用列表，命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell pm list packages mazhuang</span><br></pre></td></tr></table></figure><p>当然也可以使用 grep 来过滤：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell pm list packages | grep mazhuang</span><br></pre></td></tr></table></figure><h3 id="安装-apk"><a class="markdownIt-Anchor" href="#安装-apk"></a> 安装 APK</h3><p>命令格式：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb install [-lrtsdg] &lt;path_to_apk&gt;</span><br></pre></td></tr></table></figure><p>参数：</p><p><code>adb install</code> 后面可以跟一些可选参数来控制安装 APK 的行为，可用参数及含义如下：</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-l</td><td>将应用安装到保护目录 /mnt/asec</td></tr><tr><td>-r</td><td>允许覆盖安装</td></tr><tr><td>-t</td><td>允许安装 AndroidManifest.xml 里 application 指定 <code>android:testOnly=&quot;true&quot;</code> 的应用</td></tr><tr><td>-s</td><td>将应用安装到 sdcard</td></tr><tr><td>-d</td><td>允许降级覆盖安装</td></tr><tr><td>-g</td><td>授予所有运行时权限</td></tr></tbody></table><p>运行命令后如果见到类似如下输出（状态为 <code>Success</code>）代表安装成功：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[100%] /data/<span class="built_in">local</span>/tmp/1.apk</span><br><span class="line">pkg: /data/<span class="built_in">local</span>/tmp/1.apk</span><br><span class="line">Success</span><br></pre></td></tr></table></figure><p>上面是当前最新版 v1.0.36 的 adb 的输出，会显示 push apk 文件到手机的进度百分比。</p><p>使用旧版本 adb 的输出则是这样的：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">12040 KB/s (22205609 bytes <span class="keyword">in</span> 1.801s)</span><br><span class="line">        pkg: /data/<span class="built_in">local</span>/tmp/SogouInput_android_v8.3_sweb.apk</span><br><span class="line">Success</span><br></pre></td></tr></table></figure><p>而如果状态为 <code>Failure</code> 则表示安装失败，比如：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[100%] /data/<span class="built_in">local</span>/tmp/map-20160831.apk</span><br><span class="line">        pkg: /data/<span class="built_in">local</span>/tmp/map-20160831.apk</span><br><span class="line">Failure [INSTALL_FAILED_ALREADY_EXISTS]</span><br></pre></td></tr></table></figure><p>常见安装失败输出代码、含义及可能的解决办法如下：</p><table><thead><tr><th>输出</th><th>含义</th><th>解决办法</th></tr></thead><tbody><tr><td>INSTALL_FAILED_ALREADY_EXISTS</td><td>应用已经存在，或卸载了但没卸载干净</td><td><code>adb install</code> 时使用 <code>-r</code> 参数，或者先 <code>adb uninstall &lt;packagename&gt;</code> 再安装</td></tr><tr><td>INSTALL_FAILED_INVALID_APK</td><td>无效的 APK 文件</td><td></td></tr><tr><td>INSTALL_FAILED_INVALID_URI</td><td>无效的 APK 文件名</td><td>确保 APK 文件名里无中文</td></tr><tr><td>INSTALL_FAILED_INSUFFICIENT_STORAGE</td><td>空间不足</td><td>清理空间</td></tr><tr><td>INSTALL_FAILED_DUPLICATE_PACKAGE</td><td>已经存在同名程序</td><td></td></tr><tr><td>INSTALL_FAILED_NO_SHARED_USER</td><td>请求的共享用户不存在</td><td></td></tr><tr><td>INSTALL_FAILED_UPDATE_INCOMPATIBLE</td><td>以前安装过同名应用，但卸载时数据没有移除；或者已安装该应用，但签名不一致</td><td>先 <code>adb uninstall &lt;packagename&gt;</code> 再安装</td></tr><tr><td>INSTALL_FAILED_SHARED_USER_INCOMPATIBLE</td><td>请求的共享用户存在但签名不一致</td><td></td></tr><tr><td>INSTALL_FAILED_MISSING_SHARED_LIBRARY</td><td>安装包使用了设备上不可用的共享库</td><td></td></tr><tr><td>INSTALL_FAILED_REPLACE_COULDNT_DELETE</td><td>替换时无法删除</td><td></td></tr><tr><td>INSTALL_FAILED_DEXOPT</td><td>dex 优化验证失败或空间不足</td><td></td></tr><tr><td>INSTALL_FAILED_OLDER_SDK</td><td>设备系统版本低于应用要求</td><td></td></tr><tr><td>INSTALL_FAILED_CONFLICTING_PROVIDER</td><td>设备里已经存在与应用里同名的 content provider</td><td></td></tr><tr><td>INSTALL_FAILED_NEWER_SDK</td><td>设备系统版本高于应用要求</td><td></td></tr><tr><td>INSTALL_FAILED_TEST_ONLY</td><td>应用是 test-only 的，但安装时没有指定 <code>-t</code> 参数</td><td></td></tr><tr><td>INSTALL_FAILED_CPU_ABI_INCOMPATIBLE</td><td>包含不兼容设备 CPU 应用程序二进制接口的 native code</td><td></td></tr><tr><td>INSTALL_FAILED_MISSING_FEATURE</td><td>应用使用了设备不可用的功能</td><td></td></tr><tr><td>INSTALL_FAILED_CONTAINER_ERROR</td><td>1. sdcard 访问失败;<br />2. 应用签名与 ROM 签名一致，被当作内置应用。</td><td>1. 确认 sdcard 可用，或者安装到内置存储;<br />2. 打包时不与 ROM 使用相同签名。</td></tr><tr><td>INSTALL_FAILED_INVALID_INSTALL_LOCATION</td><td>1. 不能安装到指定位置;<br />2. 应用签名与 ROM 签名一致，被当作内置应用。</td><td>1. 切换安装位置，添加或删除 <code>-s</code> 参数;<br />2. 打包时不与 ROM 使用相同签名。</td></tr><tr><td>INSTALL_FAILED_MEDIA_UNAVAILABLE</td><td>安装位置不可用</td><td>一般为 sdcard，确认 sdcard 可用或安装到内置存储</td></tr><tr><td>INSTALL_FAILED_VERIFICATION_TIMEOUT</td><td>验证安装包超时</td><td></td></tr><tr><td>INSTALL_FAILED_VERIFICATION_FAILURE</td><td>验证安装包失败</td><td></td></tr><tr><td>INSTALL_FAILED_PACKAGE_CHANGED</td><td>应用与调用程序期望的不一致</td><td></td></tr><tr><td>INSTALL_FAILED_UID_CHANGED</td><td>以前安装过该应用，与本次分配的 UID 不一致</td><td>清除以前安装过的残留文件</td></tr><tr><td>INSTALL_FAILED_VERSION_DOWNGRADE</td><td>已经安装了该应用更高版本</td><td>使用 <code>-d</code> 参数</td></tr><tr><td>INSTALL_FAILED_PERMISSION_MODEL_DOWNGRADE</td><td>已安装 target SDK 支持运行时权限的同名应用，要安装的版本不支持运行时权限</td><td></td></tr><tr><td>INSTALL_PARSE_FAILED_NOT_APK</td><td>指定路径不是文件，或不是以 <code>.apk</code> 结尾</td><td></td></tr><tr><td>INSTALL_PARSE_FAILED_BAD_MANIFEST</td><td>无法解析的 AndroidManifest.xml 文件</td><td></td></tr><tr><td>INSTALL_PARSE_FAILED_UNEXPECTED_EXCEPTION</td><td>解析器遇到异常</td><td></td></tr><tr><td>INSTALL_PARSE_FAILED_NO_CERTIFICATES</td><td>安装包没有签名</td><td></td></tr><tr><td>INSTALL_PARSE_FAILED_INCONSISTENT_CERTIFICATES</td><td>已安装该应用，且签名与 APK 文件不一致</td><td>先卸载设备上的该应用，再安装</td></tr><tr><td>INSTALL_PARSE_FAILED_CERTIFICATE_ENCODING</td><td>解析 APK 文件时遇到 <code>CertificateEncodingException</code></td><td></td></tr><tr><td>INSTALL_PARSE_FAILED_BAD_PACKAGE_NAME</td><td>manifest 文件里没有或者使用了无效的包名</td><td></td></tr><tr><td>INSTALL_PARSE_FAILED_BAD_SHARED_USER_ID</td><td>manifest 文件里指定了无效的共享用户 ID</td><td></td></tr><tr><td>INSTALL_PARSE_FAILED_MANIFEST_MALFORMED</td><td>解析 manifest 文件时遇到结构性错误</td><td></td></tr><tr><td>INSTALL_PARSE_FAILED_MANIFEST_EMPTY</td><td>在 manifest 文件里找不到找可操作标签（instrumentation 或 application）</td><td></td></tr><tr><td>INSTALL_FAILED_INTERNAL_ERROR</td><td>因系统问题安装失败</td><td></td></tr><tr><td>INSTALL_FAILED_USER_RESTRICTED</td><td>用户被限制安装应用</td><td>在开发者选项里将「USB安装」打开，如果已经打开了，那先关闭再打开。</td></tr><tr><td>INSTALL_FAILED_DUPLICATE_PERMISSION</td><td>应用尝试定义一个已经存在的权限名称</td><td></td></tr><tr><td>INSTALL_FAILED_NO_MATCHING_ABIS</td><td>应用包含设备的应用程序二进制接口不支持的 native code</td><td></td></tr><tr><td>INSTALL_CANCELED_BY_USER</td><td>应用安装需要在设备上确认，但未操作设备或点了取消</td><td>在设备上同意安装</td></tr><tr><td>INSTALL_FAILED_ACWF_INCOMPATIBLE</td><td>应用程序与设备不兼容</td><td></td></tr><tr><td>INSTALL_FAILED_TEST_ONLY</td><td>APK 文件是使用 Android Studio 直接 RUN 编译出来的文件</td><td>通过 Gradle 的 assembleDebug 或 assembleRelease 重新编译，或者 Generate Signed APK</td></tr><tr><td>does not contain AndroidManifest.xml</td><td>无效的 APK 文件</td><td></td></tr><tr><td>is not a valid zip file</td><td>无效的 APK 文件</td><td></td></tr><tr><td>Offline</td><td>设备未连接成功</td><td>先将设备与 adb 连接成功</td></tr><tr><td>unauthorized</td><td>设备未授权允许调试</td><td></td></tr><tr><td>error: device not found</td><td>没有连接成功的设备</td><td>先将设备与 adb 连接成功</td></tr><tr><td>protocol failure</td><td>设备已断开连接</td><td>先将设备与 adb 连接成功</td></tr><tr><td>Unknown option: -s</td><td>Android 2.2 以下不支持安装到 sdcard</td><td>不使用 <code>-s</code> 参数</td></tr><tr><td>No space left on device</td><td>空间不足</td><td>清理空间</td></tr><tr><td>Permission denied … sdcard …</td><td>sdcard 不可用</td><td></td></tr><tr><td>signatures do not match the previously installed version; ignoring!</td><td>已安装该应用且签名不一致</td><td>先卸载设备上的该应用，再安装</td></tr></tbody></table><p>参考：<a href="https://github.com/android/platform_frameworks_base/blob/master/core%2Fjava%2Fandroid%2Fcontent%2Fpm%2FPackageManager.java">PackageManager.java</a></p><p><em><code>adb install</code> 内部原理简介</em></p><p><code>adb install</code> 实际是分三步完成：</p><ol><li><p>push apk 文件到 /data/local/tmp。</p></li><li><p>调用 pm install 安装。</p></li><li><p>删除 /data/local/tmp 下的对应 apk 文件。</p></li></ol><p>所以，必要的时候也可以根据这个步骤，手动分步执行安装过程。</p><h3 id="卸载应用"><a class="markdownIt-Anchor" href="#卸载应用"></a> 卸载应用</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb uninstall [-k] &lt;packagename&gt;</span><br></pre></td></tr></table></figure><p><code>&lt;packagename&gt;</code> 表示应用的包名，<code>-k</code> 参数可选，表示卸载应用但保留数据和缓存目录。</p><p>命令示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb uninstall com.qihoo360.mobilesafe</span><br></pre></td></tr></table></figure><p>表示卸载 360 手机卫士。</p><h3 id="清除应用数据与缓存"><a class="markdownIt-Anchor" href="#清除应用数据与缓存"></a> 清除应用数据与缓存</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell pm clear &lt;packagename&gt;</span><br></pre></td></tr></table></figure><p><code>&lt;packagename&gt;</code> 表示应用名包，这条命令的效果相当于在设置里的应用信息界面点击了「清除缓存」和「清除数据」。</p><p>命令示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell pm clear com.qihoo360.mobilesafe</span><br></pre></td></tr></table></figure><p>表示清除 360 手机卫士的数据和缓存。</p><h3 id="查看前台-activity"><a class="markdownIt-Anchor" href="#查看前台-activity"></a> 查看前台 Activity</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys activity activities | grep mResumedActivity</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mResumedActivity: ActivityRecord&#123;8079d7e u0 com.cyanogenmod.trebuchet/com.android.launcher3.Launcher t42&#125;</span><br></pre></td></tr></table></figure><p>其中的 <code>com.cyanogenmod.trebuchet/com.android.launcher3.Launcher</code> 就是当前处于前台的 Activity。</p><p><em>在 Windows 下以上命令可能不可用，可以尝试 <code>adb shell dumpsys activity activities | findstr mResumedActivity</code> 或 <code>adb shell &quot;dumpsys activity activities | grep mResumedActivity&quot;</code>。</em></p><h3 id="查看正在运行的-services"><a class="markdownIt-Anchor" href="#查看正在运行的-services"></a> 查看正在运行的 Services</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys activity services [&lt;packagename&gt;]</span><br></pre></td></tr></table></figure><p><code>&lt;packagename&gt;</code> 参数不是必须的，指定 <code>&lt;packagename&gt;</code> 表示查看与某个包名相关的 Services，不指定表示查看所有 Services。</p><p><code>&lt;packagename&gt;</code> 不一定要给出完整的包名，比如运行 <code>adb shell dumpsys activity services org.mazhuang</code>，那么包名 <code>org.mazhuang.demo1</code>、<code>org.mazhuang.demo2</code> 和 <code>org.mazhuang123</code> 等相关的 Services 都会列出来。</p><h3 id="查看应用详细信息"><a class="markdownIt-Anchor" href="#查看应用详细信息"></a> 查看应用详细信息</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys package &lt;packagename&gt;</span><br></pre></td></tr></table></figure><p>输出中包含很多信息，包括 Activity Resolver Table、Registered ContentProviders、包名、userId、安装后的文件资源代码等路径、版本信息、权限信息和授予状态、签名版本信息等。</p><p><code>&lt;packagename&gt;</code> 表示应用包名。</p><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">Activity Resolver Table:</span><br><span class="line">  Non-Data Actions:</span><br><span class="line">      android.intent.action.MAIN:</span><br><span class="line">        5b4cba8 org.mazhuang.guanggoo/.SplashActivity filter 5ec9dcc</span><br><span class="line">          Action: <span class="string">&quot;android.intent.action.MAIN&quot;</span></span><br><span class="line">          Category: <span class="string">&quot;android.intent.category.LAUNCHER&quot;</span></span><br><span class="line">          AutoVerify=<span class="literal">false</span></span><br><span class="line"></span><br><span class="line">Registered ContentProviders:</span><br><span class="line">  org.mazhuang.guanggoo/com.tencent.bugly.beta.utils.BuglyFileProvider:</span><br><span class="line">    Provider&#123;7a3c394 org.mazhuang.guanggoo/com.tencent.bugly.beta.utils.BuglyFileProvider&#125;</span><br><span class="line"></span><br><span class="line">ContentProvider Authorities:</span><br><span class="line">  [org.mazhuang.guanggoo.fileProvider]:</span><br><span class="line">    Provider&#123;7a3c394 org.mazhuang.guanggoo/com.tencent.bugly.beta.utils.BuglyFileProvider&#125;</span><br><span class="line">      applicationInfo=ApplicationInfo&#123;7754242 org.mazhuang.guanggoo&#125;</span><br><span class="line"></span><br><span class="line">Key Set Manager:</span><br><span class="line">  [org.mazhuang.guanggoo]</span><br><span class="line">      Signing KeySets: 501</span><br><span class="line"></span><br><span class="line">Packages:</span><br><span class="line">  Package [org.mazhuang.guanggoo] (c1d7f):</span><br><span class="line">    userId=10394</span><br><span class="line">    pkg=Package&#123;55f714c org.mazhuang.guanggoo&#125;</span><br><span class="line">    codePath=/data/app/org.mazhuang.guanggoo-2</span><br><span class="line">    resourcePath=/data/app/org.mazhuang.guanggoo-2</span><br><span class="line">    legacyNativeLibraryDir=/data/app/org.mazhuang.guanggoo-2/lib</span><br><span class="line">    primaryCpuAbi=null</span><br><span class="line">    secondaryCpuAbi=null</span><br><span class="line">    versionCode=74 minSdk=15 targetSdk=25</span><br><span class="line">    versionName=1.1.74</span><br><span class="line">    splits=[base]</span><br><span class="line">    apkSigningVersion=2</span><br><span class="line">    applicationInfo=ApplicationInfo&#123;7754242 org.mazhuang.guanggoo&#125;</span><br><span class="line">    flags=[ HAS_CODE ALLOW_CLEAR_USER_DATA ALLOW_BACKUP ]</span><br><span class="line">    privateFlags=[ RESIZEABLE_ACTIVITIES ]</span><br><span class="line">    dataDir=/data/user/0/org.mazhuang.guanggoo</span><br><span class="line">    supportsScreens=[small, medium, large, xlarge, resizeable, anyDensity]</span><br><span class="line">    timeStamp=2017-10-22 23:50:53</span><br><span class="line">    firstInstallTime=2017-10-22 23:50:25</span><br><span class="line">    lastUpdateTime=2017-10-22 23:50:55</span><br><span class="line">    installerPackageName=com.miui.packageinstaller</span><br><span class="line">    signatures=PackageSignatures&#123;af09595 [53c7caa2]&#125;</span><br><span class="line">    installPermissionsFixed=<span class="literal">true</span> installStatus=1</span><br><span class="line">    pkgFlags=[ HAS_CODE ALLOW_CLEAR_USER_DATA ALLOW_BACKUP ]</span><br><span class="line">    requested permissions:</span><br><span class="line">      android.permission.READ_PHONE_STATE</span><br><span class="line">      android.permission.INTERNET</span><br><span class="line">      android.permission.ACCESS_NETWORK_STATE</span><br><span class="line">      android.permission.ACCESS_WIFI_STATE</span><br><span class="line">      android.permission.READ_LOGS</span><br><span class="line">      android.permission.WRITE_EXTERNAL_STORAGE</span><br><span class="line">      android.permission.READ_EXTERNAL_STORAGE</span><br><span class="line">    install permissions:</span><br><span class="line">      android.permission.INTERNET: granted=<span class="literal">true</span></span><br><span class="line">      android.permission.ACCESS_NETWORK_STATE: granted=<span class="literal">true</span></span><br><span class="line">      android.permission.ACCESS_WIFI_STATE: granted=<span class="literal">true</span></span><br><span class="line">    User 0: ceDataInode=1155675 installed=<span class="literal">true</span> hidden=<span class="literal">false</span> suspended=<span class="literal">false</span> stopped=<span class="literal">true</span> notLaunched=<span class="literal">false</span> enabled=0</span><br><span class="line">      gids=[3003]</span><br><span class="line">      runtime permissions:</span><br><span class="line">        android.permission.READ_EXTERNAL_STORAGE: granted=<span class="literal">true</span></span><br><span class="line">        android.permission.READ_PHONE_STATE: granted=<span class="literal">true</span></span><br><span class="line">        android.permission.WRITE_EXTERNAL_STORAGE: granted=<span class="literal">true</span></span><br><span class="line">    User 999: ceDataInode=0 installed=<span class="literal">false</span> hidden=<span class="literal">false</span> suspended=<span class="literal">false</span> stopped=<span class="literal">true</span> notLaunched=<span class="literal">true</span> enabled=0</span><br><span class="line">      gids=[3003]</span><br><span class="line">      runtime permissions:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Dexopt state:</span><br><span class="line">  [org.mazhuang.guanggoo]</span><br><span class="line">    Instruction Set: arm64</span><br><span class="line">      path: /data/app/org.mazhuang.guanggoo-2/base.apk</span><br><span class="line">      status: /data/app/org.mazhuang.guanggoo-2/oat/arm64/base.odex [compilation_filter=speed-profile, status=kOatUpToDa</span><br><span class="line">      te]</span><br></pre></td></tr></table></figure><h3 id="查看应用安装路径"><a class="markdownIt-Anchor" href="#查看应用安装路径"></a> 查看应用安装路径</h3><p>命令:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell pm path &lt;PACKAGE&gt;</span><br></pre></td></tr></table></figure><p>输出应用安装路径</p><p>输出示例:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adb shell pm path ecarx.weather</span><br><span class="line"></span><br><span class="line">package:&#x2F;data&#x2F;app&#x2F;ecarx.weather-1.apk</span><br></pre></td></tr></table></figure><h2 id="与应用交互"><a class="markdownIt-Anchor" href="#与应用交互"></a> 与应用交互</h2><p>主要是使用 <code>am &lt;command&gt;</code> 命令，常用的 <code>&lt;command&gt;</code> 如下：</p><table><thead><tr><th>command</th><th>用途</th></tr></thead><tbody><tr><td><code>start [options] &lt;INTENT&gt;</code></td><td>启动 <code>&lt;INTENT&gt;</code> 指定的 Activity</td></tr><tr><td><code>startservice [options] &lt;INTENT&gt;</code></td><td>启动 <code>&lt;INTENT&gt;</code> 指定的 Service</td></tr><tr><td><code>broadcast [options] &lt;INTENT&gt;</code></td><td>发送 <code>&lt;INTENT&gt;</code> 指定的广播</td></tr><tr><td><code>force-stop &lt;packagename&gt;</code></td><td>停止 <code>&lt;packagename&gt;</code> 相关的进程</td></tr></tbody></table><p><code>&lt;INTENT&gt;</code> 参数很灵活，和写 Android 程序时代码里的 Intent 相对应。</p><p>用于决定 intent 对象的选项如下：</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td><code>-a &lt;ACTION&gt;</code></td><td>指定 action，比如 <code>android.intent.action.VIEW</code></td></tr><tr><td><code>-c &lt;CATEGORY&gt;</code></td><td>指定 category，比如 <code>android.intent.category.APP_CONTACTS</code></td></tr><tr><td><code>-n &lt;COMPONENT&gt;</code></td><td>指定完整 component 名，用于明确指定启动哪个 Activity，如 <code>com.example.app/.ExampleActivity</code></td></tr></tbody></table><p><code>&lt;INTENT&gt;</code> 里还能带数据，就像写代码时的 Bundle 一样：</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td><code>--esn &lt;EXTRA_KEY&gt;</code></td><td>null 值（只有 key 名）</td></tr><tr><td><code>-e|--es &lt;EXTRA_KEY&gt; &lt;EXTRA_STRING_VALUE&gt;</code></td><td>string 值</td></tr><tr><td><code>--ez &lt;EXTRA_KEY&gt; &lt;EXTRA_BOOLEAN_VALUE&gt;</code></td><td>boolean 值</td></tr><tr><td><code>--ei &lt;EXTRA_KEY&gt; &lt;EXTRA_INT_VALUE&gt;</code></td><td>integer 值</td></tr><tr><td><code>--el &lt;EXTRA_KEY&gt; &lt;EXTRA_LONG_VALUE&gt;</code></td><td>long 值</td></tr><tr><td><code>--ef &lt;EXTRA_KEY&gt; &lt;EXTRA_FLOAT_VALUE&gt;</code></td><td>float 值</td></tr><tr><td><code>--eu &lt;EXTRA_KEY&gt; &lt;EXTRA_URI_VALUE&gt;</code></td><td>URI</td></tr><tr><td><code>--ecn &lt;EXTRA_KEY&gt; &lt;EXTRA_COMPONENT_NAME_VALUE&gt;</code></td><td>component name</td></tr><tr><td><code>--eia &lt;EXTRA_KEY&gt; &lt;EXTRA_INT_VALUE&gt;[,&lt;EXTRA_INT_VALUE...]</code></td><td>integer 数组</td></tr><tr><td><code>--ela &lt;EXTRA_KEY&gt; &lt;EXTRA_LONG_VALUE&gt;[,&lt;EXTRA_LONG_VALUE...]</code></td><td>long 数组</td></tr></tbody></table><h3 id="启动应用-调起-activity"><a class="markdownIt-Anchor" href="#启动应用-调起-activity"></a> 启动应用/ 调起 Activity</h3><blockquote><p>指定Activity名称启动</p></blockquote><p>命令格式：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am start [options] &lt;INTENT&gt;</span><br></pre></td></tr></table></figure><p>例如：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am start -n com.tencent.mm/.ui.LauncherUI</span><br></pre></td></tr></table></figure><p>表示调起微信主界面。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am start -n org.mazhuang.boottimemeasure/.MainActivity --es <span class="string">&quot;toast&quot;</span> <span class="string">&quot;hello, world&quot;</span></span><br></pre></td></tr></table></figure><p>表示调起 <code>org.mazhuang.boottimemeasure/.MainActivity</code> 并传给它 string 数据键值对 <code>toast - hello, world</code>。</p><blockquote><p>不指定Activity名称启动（启动主Activity）</p></blockquote><p>命令格式：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell monkey -p &lt;packagename&gt; -c android.intent.category.LAUNCHER 1</span><br></pre></td></tr></table></figure><p>例如：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell monkey -p com.tencent.mm -c android.intent.category.LAUNCHER 1</span><br></pre></td></tr></table></figure><p>表示调起微信主界面。</p><h3 id="调起-service"><a class="markdownIt-Anchor" href="#调起-service"></a> 调起 Service</h3><p>命令格式：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am startservice [options] &lt;INTENT&gt;</span><br></pre></td></tr></table></figure><p>例如：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am startservice -n com.tencent.mm/.plugin.accountsync.model.AccountAuthenticatorService</span><br></pre></td></tr></table></figure><p>表示调起微信的某 Service。</p><p>另外一个典型的用例是如果设备上原本应该显示虚拟按键但是没有显示，可以试试这个：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am startservice -n com.android.systemui/.SystemUIService</span><br></pre></td></tr></table></figure><h3 id="停止-service"><a class="markdownIt-Anchor" href="#停止-service"></a> 停止 Service</h3><p>命令格式：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am stopservice [options] &lt;INTENT&gt;</span><br></pre></td></tr></table></figure><h3 id="发送广播"><a class="markdownIt-Anchor" href="#发送广播"></a> 发送广播</h3><p>命令格式：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am broadcast [options] &lt;INTENT&gt;</span><br></pre></td></tr></table></figure><p>可以向所有组件广播，也可以只向指定组件广播。</p><p>例如，向所有组件广播 <code>BOOT_COMPLETED</code>：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am broadcast -a android.intent.action.BOOT_COMPLETED</span><br></pre></td></tr></table></figure><p>又例如，只向 <code>org.mazhuang.boottimemeasure/.BootCompletedReceiver</code> 广播 <code>BOOT_COMPLETED</code>：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am broadcast -a android.intent.action.BOOT_COMPLETED -n org.mazhuang.boottimemeasure/.BootCompletedReceiver</span><br></pre></td></tr></table></figure><p>这类用法在测试的时候很实用，比如某个广播的场景很难制造，可以考虑通过这种方式来发送广播。</p><p>既能发送系统预定义的广播，也能发送自定义广播。如下是部分系统预定义广播及正常触发时机：</p><table><thead><tr><th>action</th><th>触发时机</th></tr></thead><tbody><tr><td>android.net.conn.CONNECTIVITY_CHANGE</td><td>网络连接发生变化</td></tr><tr><td>android.intent.action.SCREEN_ON</td><td>屏幕点亮</td></tr><tr><td>android.intent.action.SCREEN_OFF</td><td>屏幕熄灭</td></tr><tr><td>android.intent.action.BATTERY_LOW</td><td>电量低，会弹出电量低提示框</td></tr><tr><td>android.intent.action.BATTERY_OKAY</td><td>电量恢复了</td></tr><tr><td>android.intent.action.BOOT_COMPLETED</td><td>设备启动完毕</td></tr><tr><td>android.intent.action.DEVICE_STORAGE_LOW</td><td>存储空间过低</td></tr><tr><td>android.intent.action.DEVICE_STORAGE_OK</td><td>存储空间恢复</td></tr><tr><td>android.intent.action.PACKAGE_ADDED</td><td>安装了新的应用</td></tr><tr><td>android.net.wifi.STATE_CHANGE</td><td>WiFi 连接状态发生变化</td></tr><tr><td>android.net.wifi.WIFI_STATE_CHANGED</td><td>WiFi 状态变为启用/关闭/正在启动/正在关闭/未知</td></tr><tr><td>android.intent.action.BATTERY_CHANGED</td><td>电池电量发生变化</td></tr><tr><td>android.intent.action.INPUT_METHOD_CHANGED</td><td>系统输入法发生变化</td></tr><tr><td>android.intent.action.ACTION_POWER_CONNECTED</td><td>外部电源连接</td></tr><tr><td>android.intent.action.ACTION_POWER_DISCONNECTED</td><td>外部电源断开连接</td></tr><tr><td>android.intent.action.DREAMING_STARTED</td><td>系统开始休眠</td></tr><tr><td>android.intent.action.DREAMING_STOPPED</td><td>系统停止休眠</td></tr><tr><td>android.intent.action.WALLPAPER_CHANGED</td><td>壁纸发生变化</td></tr><tr><td>android.intent.action.HEADSET_PLUG</td><td>插入耳机</td></tr><tr><td>android.intent.action.MEDIA_UNMOUNTED</td><td>卸载外部介质</td></tr><tr><td>android.intent.action.MEDIA_MOUNTED</td><td>挂载外部介质</td></tr><tr><td>android.os.action.POWER_SAVE_MODE_CHANGED</td><td>省电模式开启</td></tr></tbody></table><p><em>（以上广播均可使用 adb 触发）</em></p><h3 id="强制停止应用"><a class="markdownIt-Anchor" href="#强制停止应用"></a> 强制停止应用</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am force-stop &lt;packagename&gt;</span><br></pre></td></tr></table></figure><p>命令示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am force-stop com.qihoo360.mobilesafe</span><br></pre></td></tr></table></figure><p>表示停止 360 安全卫士的一切进程与服务。</p><h3 id="收紧内存"><a class="markdownIt-Anchor" href="#收紧内存"></a> 收紧内存</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am send-trim-memory  &lt;pid&gt; &lt;level&gt;</span><br></pre></td></tr></table></figure><p>pid: 进程 ID<br />level:<br />HIDDEN、RUNNING_MODERATE、BACKGROUND、<br />RUNNING_LOW、MODERATE、RUNNING_CRITICAL、COMPLETE</p><p>命令示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am send-trim-memory 12345 RUNNING_LOW</span><br></pre></td></tr></table></figure><p>表示向 pid=12345 的进程，发出 level=RUNNING_LOW 的收紧内存命令。</p><h2 id="文件管理"><a class="markdownIt-Anchor" href="#文件管理"></a> 文件管理</h2><h3 id="复制设备里的文件到电脑"><a class="markdownIt-Anchor" href="#复制设备里的文件到电脑"></a> 复制设备里的文件到电脑</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb pull &lt;设备里的文件路径&gt; [电脑上的目录]</span><br></pre></td></tr></table></figure><p>其中 <code>电脑上的目录</code> 参数可以省略，默认复制到当前目录。</p><p>例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb pull /sdcard/sr.mp4 ~/tmp/</span><br></pre></td></tr></table></figure><p>*小技巧：*设备上的文件路径可能需要 root 权限才能访问，如果你的设备已经 root 过，可以先使用 <code>adb shell</code> 和 <code>su</code> 命令在 adb shell 里获取 root 权限后，先 <code>cp /path/on/device /sdcard/filename</code> 将文件复制到 sdcard，然后 <code>adb pull /sdcard/filename /path/on/pc</code>。</p><h3 id="复制电脑里的文件到设备"><a class="markdownIt-Anchor" href="#复制电脑里的文件到设备"></a> 复制电脑里的文件到设备</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb push &lt;电脑上的文件路径&gt; &lt;设备里的目录&gt;</span><br></pre></td></tr></table></figure><p>例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb push ~/sr.mp4 /sdcard/</span><br></pre></td></tr></table></figure><p>*小技巧：*设备上的文件路径普通权限可能无法直接写入，如果你的设备已经 root 过，可以先 <code>adb push /path/on/pc /sdcard/filename</code>，然后 <code>adb shell</code> 和 <code>su</code> 在 adb shell 里获取 root 权限后，<code>cp /sdcard/filename /path/on/device</code>。</p><h2 id="模拟按键输入"><a class="markdownIt-Anchor" href="#模拟按键输入"></a> 模拟按键/输入</h2><p>在 <code>adb shell</code> 里有个很实用的命令叫 <code>input</code>，通过它可以做一些有趣的事情。</p><p><code>input</code> 命令的完整 help 信息如下：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Usage: input [&lt;<span class="built_in">source</span>&gt;] &lt;<span class="built_in">command</span>&gt; [&lt;arg&gt;...]</span><br><span class="line"></span><br><span class="line">The sources are:</span><br><span class="line">      mouse</span><br><span class="line">      keyboard</span><br><span class="line">      joystick</span><br><span class="line">      touchnavigation</span><br><span class="line">      touchpad</span><br><span class="line">      trackball</span><br><span class="line">      stylus</span><br><span class="line">      dpad</span><br><span class="line">      gesture</span><br><span class="line">      touchscreen</span><br><span class="line">      gamepad</span><br><span class="line"></span><br><span class="line">The commands and default sources are:</span><br><span class="line">      text &lt;string&gt; (Default: touchscreen)</span><br><span class="line">      keyevent [--longpress] &lt;key code number or name&gt; ... (Default: keyboard)</span><br><span class="line">      tap &lt;x&gt; &lt;y&gt; (Default: touchscreen)</span><br><span class="line">      swipe &lt;x1&gt; &lt;y1&gt; &lt;x2&gt; &lt;y2&gt; [duration(ms)] (Default: touchscreen)</span><br><span class="line">      press (Default: trackball)</span><br><span class="line">      roll &lt;dx&gt; &lt;dy&gt; (Default: trackball)</span><br></pre></td></tr></table></figure><p>比如使用 <code>adb shell input keyevent &lt;keycode&gt;</code> 命令，不同的 keycode 能实现不同的功能，完整的 keycode 列表详见 <a href="https://developer.android.com/reference/android/view/KeyEvent.html">KeyEvent</a>，摘引部分我觉得有意思的如下：</p><table><thead><tr><th>keycode</th><th>含义</th></tr></thead><tbody><tr><td>3</td><td>HOME 键</td></tr><tr><td>4</td><td>返回键</td></tr><tr><td>5</td><td>打开拨号应用</td></tr><tr><td>6</td><td>挂断电话</td></tr><tr><td>24</td><td>增加音量</td></tr><tr><td>25</td><td>降低音量</td></tr><tr><td>26</td><td>电源键</td></tr><tr><td>27</td><td>拍照（需要在相机应用里）</td></tr><tr><td>64</td><td>打开浏览器</td></tr><tr><td>82</td><td>菜单键</td></tr><tr><td>85</td><td>播放/暂停</td></tr><tr><td>86</td><td>停止播放</td></tr><tr><td>87</td><td>播放下一首</td></tr><tr><td>88</td><td>播放上一首</td></tr><tr><td>122</td><td>移动光标到行首或列表顶部</td></tr><tr><td>123</td><td>移动光标到行末或列表底部</td></tr><tr><td>126</td><td>恢复播放</td></tr><tr><td>127</td><td>暂停播放</td></tr><tr><td>164</td><td>静音</td></tr><tr><td>176</td><td>打开系统设置</td></tr><tr><td>187</td><td>切换应用</td></tr><tr><td>207</td><td>打开联系人</td></tr><tr><td>208</td><td>打开日历</td></tr><tr><td>209</td><td>打开音乐</td></tr><tr><td>210</td><td>打开计算器</td></tr><tr><td>220</td><td>降低屏幕亮度</td></tr><tr><td>221</td><td>提高屏幕亮度</td></tr><tr><td>223</td><td>系统休眠</td></tr><tr><td>224</td><td>点亮屏幕</td></tr><tr><td>231</td><td>打开语音助手</td></tr><tr><td>276</td><td>如果没有 wakelock 则让系统休眠</td></tr></tbody></table><p>下面是 <code>input</code> 命令的一些用法举例。</p><h3 id="电源键"><a class="markdownIt-Anchor" href="#电源键"></a> 电源键</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell input keyevent 26</span><br></pre></td></tr></table></figure><p>执行效果相当于按电源键。</p><h3 id="菜单键"><a class="markdownIt-Anchor" href="#菜单键"></a> 菜单键</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell input keyevent 82</span><br></pre></td></tr></table></figure><h3 id="home-键"><a class="markdownIt-Anchor" href="#home-键"></a> HOME 键</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell input keyevent 3</span><br></pre></td></tr></table></figure><h3 id="返回键"><a class="markdownIt-Anchor" href="#返回键"></a> 返回键</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell input keyevent 4</span><br></pre></td></tr></table></figure><h3 id="音量控制"><a class="markdownIt-Anchor" href="#音量控制"></a> 音量控制</h3><p>增加音量：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell input keyevent 24</span><br></pre></td></tr></table></figure><p>降低音量：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell input keyevent 25</span><br></pre></td></tr></table></figure><p>静音：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell input keyevent 164</span><br></pre></td></tr></table></figure><h3 id="媒体控制"><a class="markdownIt-Anchor" href="#媒体控制"></a> 媒体控制</h3><p>播放/暂停：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell input keyevent 85</span><br></pre></td></tr></table></figure><p>停止播放：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell input keyevent 86</span><br></pre></td></tr></table></figure><p>播放下一首：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell input keyevent 87</span><br></pre></td></tr></table></figure><p>播放上一首：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell input keyevent 88</span><br></pre></td></tr></table></figure><p>恢复播放：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell input keyevent 126</span><br></pre></td></tr></table></figure><p>暂停播放：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell input keyevent 127</span><br></pre></td></tr></table></figure><h3 id="点亮熄灭屏幕"><a class="markdownIt-Anchor" href="#点亮熄灭屏幕"></a> 点亮/熄灭屏幕</h3><p>可以通过上文讲述过的模拟电源键来切换点亮和熄灭屏幕，但如果明确地想要点亮或者熄灭屏幕，那可以使用如下方法。</p><p>点亮屏幕：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell input keyevent 224</span><br></pre></td></tr></table></figure><p>熄灭屏幕：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell input keyevent 223</span><br></pre></td></tr></table></figure><h3 id="滑动解锁"><a class="markdownIt-Anchor" href="#滑动解锁"></a> 滑动解锁</h3><p>如果锁屏没有密码，是通过滑动手势解锁，那么可以通过 <code>input swipe</code> 来解锁。</p><p>命令（参数以机型 Nexus 5，向上滑动手势解锁举例）：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell input swipe 300 1000 300 500</span><br></pre></td></tr></table></figure><p>参数 <code>300 1000 300 500</code> 分别表示<code>起始点x坐标 起始点y坐标 结束点x坐标 结束点y坐标</code>。</p><h3 id="输入文本"><a class="markdownIt-Anchor" href="#输入文本"></a> 输入文本</h3><p>在焦点处于某文本框时，可以通过 <code>input</code> 命令来输入文本。</p><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell input text hello</span><br></pre></td></tr></table></figure><p>现在 <code>hello</code> 出现在文本框了。</p><h2 id="查看日志"><a class="markdownIt-Anchor" href="#查看日志"></a> 查看日志</h2><p>Android 系统的日志分为两部分，底层的 Linux 内核日志输出到 /proc/kmsg，Android 的日志输出到 /dev/log。</p><h3 id="android-日志"><a class="markdownIt-Anchor" href="#android-日志"></a> Android 日志</h3><p>命令格式：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[adb] logcat [&lt;option&gt;] ... [&lt;filter-spec&gt;] ...</span><br></pre></td></tr></table></figure><p>常用用法列举如下：</p><h4 id="按级别过滤日志"><a class="markdownIt-Anchor" href="#按级别过滤日志"></a> 按级别过滤日志</h4><p>Android 的日志分为如下几个优先级（priority）：</p><ul><li>V —— Verbose（最低，输出得最多）</li><li>D —— Debug</li><li>I —— Info</li><li>W —— Warning</li><li>E —— Error</li><li>F —— Fatal</li><li>S —— Silent（最高，啥也不输出）</li></ul><p>按某级别过滤日志则会将该级别及以上的日志输出。</p><p>比如，命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb logcat *:W</span><br></pre></td></tr></table></figure><p>会将 Warning、Error、Fatal 和 Silent 日志输出。</p><p>（<strong>注：</strong> 在 macOS 下需要给 <code>*:W</code> 这样以 <code>*</code> 作为 tag 的参数加双引号，如 <code>adb logcat &quot;*:W&quot;</code>，不然会报错 <code>no matches found: *:W</code>。）</p><h4 id="按-tag-和级别过滤日志"><a class="markdownIt-Anchor" href="#按-tag-和级别过滤日志"></a> 按 tag 和级别过滤日志</h4><p><code>&lt;filter-spec&gt;</code> 可以由多个 <code>&lt;tag&gt;[:priority]</code> 组成。</p><p>比如，命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb logcat ActivityManager:I MyApp:D *:S</span><br></pre></td></tr></table></figure><p>表示输出 tag <code>ActivityManager</code> 的 Info 以上级别日志，输出 tag <code>MyApp</code> 的 Debug 以上级别日志，及其它 tag 的 Silent 级别日志（即屏蔽其它 tag 日志）。</p><h4 id="日志格式"><a class="markdownIt-Anchor" href="#日志格式"></a> 日志格式</h4><p>可以用 <code>adb logcat -v &lt;format&gt;</code> 选项指定日志输出格式。</p><p>日志支持按以下几种 <code>&lt;format&gt;</code>：</p><ul><li><p>brief</p><p>默认格式。格式为：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;priority&gt;/&lt;tag&gt;(&lt;pid&gt;): &lt;message&gt;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D/HeadsetStateMachine( 1785): Disconnected process message: 10, size: 0</span><br></pre></td></tr></table></figure></li><li><p>process</p><p>格式为：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;priority&gt;(&lt;pid&gt;) &lt;message&gt;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D( 1785) Disconnected process message: 10, size: 0  (HeadsetStateMachine)</span><br></pre></td></tr></table></figure></li><li><p>tag</p><p>格式为：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;priority&gt;/&lt;tag&gt;: &lt;message&gt;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D/HeadsetStateMachine: Disconnected process message: 10, size: 0</span><br></pre></td></tr></table></figure></li><li><p>raw</p><p>格式为：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;message&gt;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Disconnected process message: 10, size: 0</span><br></pre></td></tr></table></figure></li><li><p>time</p><p>格式为：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;datetime&gt; &lt;priority&gt;/&lt;tag&gt;(&lt;pid&gt;): &lt;message&gt;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">08-28 22:39:39.974 D/HeadsetStateMachine( 1785): Disconnected process message: 10, size: 0</span><br></pre></td></tr></table></figure></li><li><p>threadtime</p><p>格式为：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;datetime&gt; &lt;pid&gt; &lt;tid&gt; &lt;priority&gt; &lt;tag&gt;: &lt;message&gt;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">08-28 22:39:39.974  1785  1832 D HeadsetStateMachine: Disconnected process message: 10, size: 0</span><br></pre></td></tr></table></figure></li><li><p>long</p><p>格式为：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ &lt;datetime&gt; &lt;pid&gt;:&lt;tid&gt; &lt;priority&gt;/&lt;tag&gt; ]</span><br><span class="line">&lt;message&gt;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ 08-28 22:39:39.974  1785: 1832 D/HeadsetStateMachine ]</span><br><span class="line">Disconnected process message: 10, size: 0</span><br></pre></td></tr></table></figure></li></ul><p>指定格式可与上面的过滤同时使用。比如：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb logcat -v long ActivityManager:I *:S</span><br></pre></td></tr></table></figure><h4 id="清空日志"><a class="markdownIt-Anchor" href="#清空日志"></a> 清空日志</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb logcat -c</span><br></pre></td></tr></table></figure><h3 id="内核日志"><a class="markdownIt-Anchor" href="#内核日志"></a> 内核日志</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dmesg</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;6&gt;[14201.684016] PM: noirq resume of devices complete after 0.982 msecs</span><br><span class="line">&lt;6&gt;[14201.685525] PM: early resume of devices complete after 0.838 msecs</span><br><span class="line">&lt;6&gt;[14201.753642] PM: resume of devices complete after 68.106 msecs</span><br><span class="line">&lt;4&gt;[14201.755954] Restarting tasks ... <span class="keyword">done</span>.</span><br><span class="line">&lt;6&gt;[14201.771229] PM: <span class="built_in">suspend</span> <span class="built_in">exit</span> 2016-08-28 13:31:32.679217193 UTC</span><br><span class="line">&lt;6&gt;[14201.872373] PM: <span class="built_in">suspend</span> entry 2016-08-28 13:31:32.780363596 UTC</span><br><span class="line">&lt;6&gt;[14201.872498] PM: Syncing filesystems ... <span class="keyword">done</span>.</span><br></pre></td></tr></table></figure><p>中括号里的 <code>[14201.684016]</code> 代表内核开始启动后的时间，单位为秒。</p><p>通过内核日志我们可以做一些事情，比如衡量内核启动时间，在系统启动完毕后的内核日志里找到 <code>Freeing init memory</code> 那一行前面的时间就是。</p><h2 id="查看设备信息"><a class="markdownIt-Anchor" href="#查看设备信息"></a> 查看设备信息</h2><h3 id="型号"><a class="markdownIt-Anchor" href="#型号"></a> 型号</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell getprop ro.product.model</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Nexus 5</span><br></pre></td></tr></table></figure><h3 id="电池状况"><a class="markdownIt-Anchor" href="#电池状况"></a> 电池状况</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys battery</span><br></pre></td></tr></table></figure><p>输入示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Current Battery Service state:</span><br><span class="line">  AC powered: <span class="literal">false</span></span><br><span class="line">  USB powered: <span class="literal">true</span></span><br><span class="line">  Wireless powered: <span class="literal">false</span></span><br><span class="line">  status: 2</span><br><span class="line">  health: 2</span><br><span class="line">  present: <span class="literal">true</span></span><br><span class="line">  level: 44</span><br><span class="line">  scale: 100</span><br><span class="line">  voltage: 3872</span><br><span class="line">  temperature: 280</span><br><span class="line">  technology: Li-poly</span><br></pre></td></tr></table></figure><p>其中 <code>scale</code> 代表最大电量，<code>level</code> 代表当前电量。上面的输出表示还剩下 44% 的电量。</p><h3 id="屏幕分辨率"><a class="markdownIt-Anchor" href="#屏幕分辨率"></a> 屏幕分辨率</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell wm size</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Physical size: 1080x1920</span><br></pre></td></tr></table></figure><p>该设备屏幕分辨率为 1080px * 1920px。</p><p>如果使用命令修改过，那输出可能是：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Physical size: 1080x1920</span><br><span class="line">Override size: 480x1024</span><br></pre></td></tr></table></figure><p>表明设备的屏幕分辨率原本是 1080px * 1920px，当前被修改为 480px * 1024px。</p><h3 id="屏幕密度"><a class="markdownIt-Anchor" href="#屏幕密度"></a> 屏幕密度</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell wm density</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Physical density: 420</span><br></pre></td></tr></table></figure><p>该设备屏幕密度为 420dpi。</p><p>如果使用命令修改过，那输出可能是：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Physical density: 480</span><br><span class="line">Override density: 160</span><br></pre></td></tr></table></figure><p>表明设备的屏幕密度原来是 480dpi，当前被修改为 160dpi。</p><h3 id="显示屏参数"><a class="markdownIt-Anchor" href="#显示屏参数"></a> 显示屏参数</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys window displays</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">WINDOW MANAGER DISPLAY CONTENTS (dumpsys window displays)</span><br><span class="line">  Display: mDisplayId=0</span><br><span class="line">    init=1080x1920 420dpi cur=1080x1920 app=1080x1794 rng=1080x1017-1810x1731</span><br><span class="line">    deferred=<span class="literal">false</span> layoutNeeded=<span class="literal">false</span></span><br></pre></td></tr></table></figure><p>其中 <code>mDisplayId</code> 为 显示屏编号，<code>init</code> 是初始分辨率和屏幕密度，<code>app</code> 的高度比 <code>init</code> 里的要小，表示屏幕底部有虚拟按键，高度为 1920 - 1794 = 126px 合 42dp。</p><h3 id="android_id"><a class="markdownIt-Anchor" href="#android_id"></a> android_id</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell settings get secure android_id</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">51b6be48bac8c569</span><br></pre></td></tr></table></figure><h3 id="imei"><a class="markdownIt-Anchor" href="#imei"></a> IMEI</h3><p>在 Android 4.4 及以下版本可通过如下命令获取 IMEI：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys iphonesubinfo</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Phone Subscriber Info:</span><br><span class="line">  Phone Type = GSM</span><br><span class="line">  Device ID = 860955027785041</span><br></pre></td></tr></table></figure><p>其中的 <code>Device ID</code> 就是 IMEI。</p><p>而在 Android 5.0 及以上版本里这个命令输出为空，得通过其它方式获取了（需要 root 权限）：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adb shell</span><br><span class="line">su</span><br><span class="line">service call iphonesubinfo 1</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Result: Parcel(</span><br><span class="line">  0x00000000: 00000000 0000000f 00360038 00390030 <span class="string">&#x27;........8.6.0.9.&#x27;</span></span><br><span class="line">  0x00000010: 00350035 00320030 00370037 00350038 <span class="string">&#x27;5.5.0.2.7.7.8.5.&#x27;</span></span><br><span class="line">  0x00000020: 00340030 00000031                   <span class="string">&#x27;0.4.1...        &#x27;</span>)</span><br></pre></td></tr></table></figure><p>把里面的有效内容提取出来就是 IMEI 了，比如这里的是 <code>860955027785041</code>。</p><p>参考：<a href="http://stackoverflow.com/questions/27002663/adb-shell-dumpsys-iphonesubinfo-not-working-since-android-5-0-lollipop">adb shell dumpsys iphonesubinfo not working since Android 5.0 Lollipop</a></p><h3 id="android-系统版本"><a class="markdownIt-Anchor" href="#android-系统版本"></a> Android 系统版本</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell getprop ro.build.version.release</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5.0.2</span><br></pre></td></tr></table></figure><h3 id="ip-地址"><a class="markdownIt-Anchor" href="#ip-地址"></a> IP 地址</h3><p>每次想知道设备的 IP 地址的时候都得「设置」-「关于手机」-「状态信息」-「IP地址」很烦对不对？通过 adb 可以方便地查看。</p><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell ifconfig | grep Mask</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">inet addr:10.130.245.230  Mask:255.255.255.252</span><br><span class="line">inet addr:127.0.0.1  Mask:255.0.0.0</span><br></pre></td></tr></table></figure><p>那么 <code>10.130.245.230</code> 就是设备 IP 地址。</p><p>在有的设备上这个命令没有输出，如果设备连着 WiFi，可以使用如下命令来查看局域网 IP：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell ifconfig wlan0</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wlan0: ip 10.129.160.99 mask 255.255.240.0 flags [up broadcast running multicast]</span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wlan0     Link encap:UNSPEC</span><br><span class="line">          inet addr:10.129.168.57  Bcast:10.129.175.255  Mask:255.255.240.0</span><br><span class="line">          inet6 addr: fe80::66cc:2eff:fe68:b6b6/64 Scope: Link</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:496520 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:68215 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:3000</span><br><span class="line">          RX bytes:116266821 TX bytes:8311736</span><br></pre></td></tr></table></figure><p>如果以上命令仍然不能得到期望的信息，那可以试试以下命令（部分系统版本里可用）：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell netcfg</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">wlan0    UP                               10.129.160.99/20  0x00001043 f8:a9:d0:17:42:4d</span><br><span class="line">lo       UP                                   127.0.0.1/8   0x00000049 00:00:00:00:00:00</span><br><span class="line">p2p0     UP                                     0.0.0.0/0   0x00001003 fa:a9:d0:17:42:4d</span><br><span class="line">sit0     DOWN                                   0.0.0.0/0   0x00000080 00:00:00:00:00:00</span><br><span class="line">rmnet0   DOWN                                   0.0.0.0/0   0x00000000 00:00:00:00:00:00</span><br><span class="line">rmnet1   DOWN                                   0.0.0.0/0   0x00000000 00:00:00:00:00:00</span><br><span class="line">rmnet3   DOWN                                   0.0.0.0/0   0x00000000 00:00:00:00:00:00</span><br><span class="line">rmnet2   DOWN                                   0.0.0.0/0   0x00000000 00:00:00:00:00:00</span><br><span class="line">rmnet4   DOWN                                   0.0.0.0/0   0x00000000 00:00:00:00:00:00</span><br><span class="line">rmnet6   DOWN                                   0.0.0.0/0   0x00000000 00:00:00:00:00:00</span><br><span class="line">rmnet5   DOWN                                   0.0.0.0/0   0x00000000 00:00:00:00:00:00</span><br><span class="line">rmnet7   DOWN                                   0.0.0.0/0   0x00000000 00:00:00:00:00:00</span><br><span class="line">rev_rmnet3 DOWN                                   0.0.0.0/0   0x00001002 4e:b7:e4:2e:17:58</span><br><span class="line">rev_rmnet2 DOWN                                   0.0.0.0/0   0x00001002 4e:f0:c8:bf:7a:cf</span><br><span class="line">rev_rmnet4 DOWN                                   0.0.0.0/0   0x00001002 a6:c0:3b:6b:c4:1f</span><br><span class="line">rev_rmnet6 DOWN                                   0.0.0.0/0   0x00001002 66:bb:5d:64:2e:e9</span><br><span class="line">rev_rmnet5 DOWN                                   0.0.0.0/0   0x00001002 0e:1b:eb:b9:23:a0</span><br><span class="line">rev_rmnet7 DOWN                                   0.0.0.0/0   0x00001002 7a:d9:f6:81:40:5a</span><br><span class="line">rev_rmnet8 DOWN                                   0.0.0.0/0   0x00001002 4e:e2:a9:bb:d0:1b</span><br><span class="line">rev_rmnet0 DOWN                                   0.0.0.0/0   0x00001002 fe:65:d0:ca:82:a9</span><br><span class="line">rev_rmnet1 DOWN                                   0.0.0.0/0   0x00001002 da:d8:e8:4f:2e:fe</span><br></pre></td></tr></table></figure><p>可以看到网络连接名称、启用状态、IP 地址和 Mac 地址等信息。</p><h3 id="mac-地址"><a class="markdownIt-Anchor" href="#mac-地址"></a> Mac 地址</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell cat /sys/class/net/wlan0/address</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f8:a9:d0:17:42:4d</span><br></pre></td></tr></table></figure><p>这查看的是局域网 Mac 地址，移动网络或其它连接的信息可以通过前面的小节「IP 地址」里提到的 <code>adb shell netcfg</code> 命令来查看。</p><h3 id="cpu-信息"><a class="markdownIt-Anchor" href="#cpu-信息"></a> CPU 信息</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell cat /proc/cpuinfo</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Processor       : ARMv7 Processor rev 0 (v7l)</span><br><span class="line">processor       : 0</span><br><span class="line">BogoMIPS        : 38.40</span><br><span class="line"></span><br><span class="line">processor       : 1</span><br><span class="line">BogoMIPS        : 38.40</span><br><span class="line"></span><br><span class="line">processor       : 2</span><br><span class="line">BogoMIPS        : 38.40</span><br><span class="line"></span><br><span class="line">processor       : 3</span><br><span class="line">BogoMIPS        : 38.40</span><br><span class="line"></span><br><span class="line">Features        : swp half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt</span><br><span class="line">CPU implementer : 0x51</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant     : 0x2</span><br><span class="line">CPU part        : 0x06f</span><br><span class="line">CPU revision    : 0</span><br><span class="line"></span><br><span class="line">Hardware        : Qualcomm MSM 8974 HAMMERHEAD (Flattened Device Tree)</span><br><span class="line">Revision        : 000b</span><br><span class="line">Serial          : 0000000000000000</span><br></pre></td></tr></table></figure><p>这是 Nexus 5 的 CPU 信息，我们从输出里可以看到使用的硬件是 <code>Qualcomm MSM 8974</code>，processor 的编号是 0 到 3，所以它是四核的，采用的架构是 <code>ARMv7 Processor rev 0 (v71)</code>。</p><h3 id="内存信息"><a class="markdownIt-Anchor" href="#内存信息"></a> 内存信息</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell cat /proc/meminfo</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">MemTotal:        1027424 kB</span><br><span class="line">MemFree:          486564 kB</span><br><span class="line">Buffers:           15224 kB</span><br><span class="line">Cached:            72464 kB</span><br><span class="line">SwapCached:        24152 kB</span><br><span class="line">Active:           110572 kB</span><br><span class="line">Inactive:         259060 kB</span><br><span class="line">Active(anon):      79176 kB</span><br><span class="line">Inactive(anon):   207736 kB</span><br><span class="line">Active(file):      31396 kB</span><br><span class="line">Inactive(file):    51324 kB</span><br><span class="line">Unevictable:        3948 kB</span><br><span class="line">Mlocked:               0 kB</span><br><span class="line">HighTotal:        409600 kB</span><br><span class="line">HighFree:         132612 kB</span><br><span class="line">LowTotal:         617824 kB</span><br><span class="line">LowFree:          353952 kB</span><br><span class="line">SwapTotal:        262140 kB</span><br><span class="line">SwapFree:         207572 kB</span><br><span class="line">Dirty:                 0 kB</span><br><span class="line">Writeback:             0 kB</span><br><span class="line">AnonPages:        265324 kB</span><br><span class="line">Mapped:            47072 kB</span><br><span class="line">Shmem:              1020 kB</span><br><span class="line">Slab:              57372 kB</span><br><span class="line">SReclaimable:       7692 kB</span><br><span class="line">SUnreclaim:        49680 kB</span><br><span class="line">KernelStack:        4512 kB</span><br><span class="line">PageTables:         5912 kB</span><br><span class="line">NFS_Unstable:          0 kB</span><br><span class="line">Bounce:                0 kB</span><br><span class="line">WritebackTmp:          0 kB</span><br><span class="line">CommitLimit:      775852 kB</span><br><span class="line">Committed_AS:   13520632 kB</span><br><span class="line">VmallocTotal:     385024 kB</span><br><span class="line">VmallocUsed:       61004 kB</span><br><span class="line">VmallocChunk:     209668 kB</span><br></pre></td></tr></table></figure><p>其中，<code>MemTotal</code> 就是设备的总内存，<code>MemFree</code> 是当前空闲内存。</p><h3 id="更多硬件与系统属性"><a class="markdownIt-Anchor" href="#更多硬件与系统属性"></a> 更多硬件与系统属性</h3><p>设备的更多硬件与系统属性可以通过如下命令查看：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell cat /system/build.prop</span><br></pre></td></tr></table></figure><p>这会输出很多信息，包括前面几个小节提到的「型号」和「Android 系统版本」等。</p><p>输出里还包括一些其它有用的信息，它们也可通过 <code>adb shell getprop &lt;属性名&gt;</code> 命令单独查看，列举一部分属性如下：</p><table><thead><tr><th>属性名</th><th>含义</th></tr></thead><tbody><tr><td>ro.build.version.sdk</td><td>SDK 版本</td></tr><tr><td>ro.build.version.release</td><td>Android 系统版本</td></tr><tr><td>ro.build.version.security_patch</td><td>Android 安全补丁程序级别</td></tr><tr><td>ro.product.model</td><td>型号</td></tr><tr><td>ro.product.brand</td><td>品牌</td></tr><tr><td><a href="http://ro.product.name">ro.product.name</a></td><td>设备名</td></tr><tr><td>ro.product.board</td><td>处理器型号</td></tr><tr><td>ro.product.cpu.abilist</td><td>CPU 支持的 abi 列表[<em>节注一</em>]</td></tr><tr><td>persist.sys.isUsbOtgEnabled</td><td>是否支持 OTG</td></tr><tr><td>dalvik.vm.heapsize</td><td>每个应用程序的内存上限</td></tr><tr><td>ro.sf.lcd_density</td><td>屏幕密度</td></tr></tbody></table><p><em>节注一：</em></p><p>一些小厂定制的 ROM 可能修改过 CPU 支持的 abi 列表的属性名，如果用 <code>ro.product.cpu.abilist</code> 属性名查找不到，可以这样试试：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell cat /system/build.prop | grep ro.product.cpu.abi</span><br></pre></td></tr></table></figure><p>示例输出：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ro.product.cpu.abi=armeabi-v7a</span><br><span class="line">ro.product.cpu.abi2=armeabi</span><br></pre></td></tr></table></figure><h2 id="修改设置"><a class="markdownIt-Anchor" href="#修改设置"></a> 修改设置</h2><p><strong>注：</strong> 修改设置之后，运行恢复命令有可能显示仍然不太正常，可以运行 <code>adb reboot</code> 重启设备，或手动重启。</p><p>修改设置的原理主要是通过 settings 命令修改 /data/data/com.android.providers.settings/databases/settings.db 里存放的设置值。</p><h3 id="分辨率"><a class="markdownIt-Anchor" href="#分辨率"></a> 分辨率</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell wm size 480x1024</span><br></pre></td></tr></table></figure><p>表示将分辨率修改为 480px * 1024px。</p><p>恢复原分辨率命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell wm size reset</span><br></pre></td></tr></table></figure><h3 id="屏幕密度-2"><a class="markdownIt-Anchor" href="#屏幕密度-2"></a> 屏幕密度</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell wm density 160</span><br></pre></td></tr></table></figure><p>表示将屏幕密度修改为 160dpi。</p><p>恢复原屏幕密度命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell wm density reset</span><br></pre></td></tr></table></figure><h3 id="显示区域"><a class="markdownIt-Anchor" href="#显示区域"></a> 显示区域</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell wm overscan 0,0,0,200</span><br></pre></td></tr></table></figure><p>四个数字分别表示距离左、上、右、下边缘的留白像素，以上命令表示将屏幕底部 200px 留白。</p><p>恢复原显示区域命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell wm overscan reset</span><br></pre></td></tr></table></figure><h3 id="关闭-usb-调试模式"><a class="markdownIt-Anchor" href="#关闭-usb-调试模式"></a> 关闭 USB 调试模式</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell settings put global adb_enabled 0</span><br></pre></td></tr></table></figure><p>恢复：</p><p>用命令恢复不了了，毕竟关闭了 USB 调试 adb 就连接不上 Android 设备了。</p><p>去设备上手动恢复吧：「设置」-「开发者选项」-「Android 调试」。</p><h3 id="允许禁止访问非-sdk-api"><a class="markdownIt-Anchor" href="#允许禁止访问非-sdk-api"></a> 允许/禁止访问非 SDK API</h3><p>允许访问非 SDK API：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb shell settings put global hidden_api_policy_pre_p_apps 1</span><br><span class="line">adb shell settings put global hidden_api_policy_p_apps 1</span><br></pre></td></tr></table></figure><p>禁止访问非 SDK API：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb shell settings delete global hidden_api_policy_pre_p_apps</span><br><span class="line">adb shell settings delete global hidden_api_policy_p_apps</span><br></pre></td></tr></table></figure><p>不需要设备获得 Root 权限。</p><p>命令最后的数字的含义：</p><table><thead><tr><th>值</th><th>含义</th></tr></thead><tbody><tr><td>0</td><td>禁止检测非 SDK 接口的调用。该情况下，日志记录功能被禁用，并且令 strict mode API，即 detectNonSdkApiUsage() 无效。不推荐。</td></tr><tr><td>1</td><td>仅警告——允许访问所有非 SDK 接口，但保留日志中的警告信息，可继续使用 strick mode API。</td></tr><tr><td>2</td><td>禁止调用深灰名单和黑名单中的接口。</td></tr><tr><td>3</td><td>禁止调用黑名单中的接口，但允许调用深灰名单中的接口。</td></tr></tbody></table><h3 id="状态栏和导航栏的显示隐藏"><a class="markdownIt-Anchor" href="#状态栏和导航栏的显示隐藏"></a> 状态栏和导航栏的显示隐藏</h3><p>本节所说的相关设置对应 Cyanogenmod 里的「扩展桌面」。</p><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell settings put global policy_control &lt;key-values&gt;</span><br></pre></td></tr></table></figure><p><code>&lt;key-values&gt;</code> 可由如下几种键及其对应的值组成，格式为 <code>&lt;key1&gt;=&lt;value1&gt;:&lt;key2&gt;=&lt;value2&gt;</code>。</p><table><thead><tr><th>key</th><th>含义</th></tr></thead><tbody><tr><td>immersive.full</td><td>同时隐藏</td></tr><tr><td>immersive.status</td><td>隐藏状态栏</td></tr><tr><td>immersive.navigation</td><td>隐藏导航栏</td></tr><tr><td>immersive.preconfirms</td><td>?</td></tr></tbody></table><p>这些键对应的值可则如下值用逗号组合：</p><table><thead><tr><th>value</th><th>含义</th></tr></thead><tbody><tr><td><code>apps</code></td><td>所有应用</td></tr><tr><td><code>*</code></td><td>所有界面</td></tr><tr><td><code>packagename</code></td><td>指定应用</td></tr><tr><td><code>-packagename</code></td><td>排除指定应用</td></tr></tbody></table><p>例如：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell settings put global policy_control immersive.full=*</span><br></pre></td></tr></table></figure><p>表示设置在所有界面下都同时隐藏状态栏和导航栏。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell settings put global policy_control immersive.status=com.package1,com.package2:immersive.navigation=apps,-com.package3</span><br></pre></td></tr></table></figure><p>表示设置在包名为 <code>com.package1</code> 和 <code>com.package2</code> 的应用里隐藏状态栏，在除了包名为 <code>com.package3</code> 的所有应用里隐藏导航栏。</p><h2 id="实用功能"><a class="markdownIt-Anchor" href="#实用功能"></a> 实用功能</h2><h3 id="屏幕截图"><a class="markdownIt-Anchor" href="#屏幕截图"></a> 屏幕截图</h3><p>截图保存到电脑：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb exec-out screencap -p &gt; sc.png</span><br></pre></td></tr></table></figure><p>如果 adb 版本较老，无法使用 <code>exec-out</code> 命令，这时候建议更新 adb 版本。无法更新的话可以使用以下麻烦点的办法：</p><p>先截图保存到设备里：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell screencap -p /sdcard/sc.png</span><br></pre></td></tr></table></figure><p>然后将 png 文件导出到电脑：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb pull /sdcard/sc.png</span><br></pre></td></tr></table></figure><p>可以使用 <code>adb shell screencap -h</code> 查看 <code>screencap</code> 命令的帮助信息，下面是两个有意义的参数及含义：</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-p</td><td>指定保存文件为 png 格式</td></tr><tr><td>-d display-id</td><td>指定截图的显示屏编号（有多显示屏的情况下）</td></tr></tbody></table><p>实测如果指定文件名以 <code>.png</code> 结尾时可以省略 -p 参数；否则需要使用 -p 参数。如果不指定文件名，截图文件的内容将直接输出到 stdout。</p><p>另外一种一行命令截图并保存到电脑的方法：</p><p><em>Linux 和 Windows</em></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell screencap -p | sed <span class="string">&quot;s/\r$//&quot;</span> &gt; sc.png</span><br></pre></td></tr></table></figure><p><em>Mac OS X</em></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell screencap -p | gsed <span class="string">&quot;s/\r$//&quot;</span> &gt; sc.png</span><br></pre></td></tr></table></figure><p>这个方法需要用到 gnu sed 命令，在 Linux 下直接就有，在 Windows 下 Git 安装目录的 bin 文件夹下也有。如果确实找不到该命令，可以下载 <a href="http://gnuwin32.sourceforge.net/packages/sed.htm">sed for Windows</a> 并将 sed.exe 所在文件夹添加到 PATH 环境变量里。</p><p>而在 Mac 下使用系统自带的 sed 命令会报错：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed: RE error: illegal byte sequence</span><br></pre></td></tr></table></figure><p>需要安装 gnu-sed，然后使用 gsed 命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install gnu-sed</span><br></pre></td></tr></table></figure><h3 id="录制屏幕"><a class="markdownIt-Anchor" href="#录制屏幕"></a> 录制屏幕</h3><p>录制屏幕以 mp4 格式保存到 /sdcard：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell screenrecord /sdcard/filename.mp4</span><br></pre></td></tr></table></figure><p>需要停止时按 <kbd>Ctrl-C</kbd>，默认录制时间和最长录制时间都是 180 秒。</p><p>如果需要导出到电脑：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb pull /sdcard/filename.mp4</span><br></pre></td></tr></table></figure><p>可以使用 <code>adb shell screenrecord --help</code> 查看 <code>screenrecord</code> 命令的帮助信息，下面是常见参数及含义：</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>–size WIDTHxHEIGHT</td><td>视频的尺寸，比如 <code>1280x720</code>，默认是屏幕分辨率。</td></tr><tr><td>–bit-rate RATE</td><td>视频的比特率，默认是 4Mbps。</td></tr><tr><td>–time-limit TIME</td><td>录制时长，单位秒。</td></tr><tr><td>–verbose</td><td>输出更多信息。</td></tr></tbody></table><h3 id="重新挂载-system-分区为可写"><a class="markdownIt-Anchor" href="#重新挂载-system-分区为可写"></a> 重新挂载 system 分区为可写</h3><p><strong>注：需要 root 权限。</strong></p><p>/system 分区默认挂载为只读，但有些操作比如给 Android 系统添加命令、删除自带应用等需要对 /system 进行写操作，所以需要重新挂载它为可读写。</p><p>步骤：</p><ol><li><p>进入 shell 并切换到 root 用户权限。</p><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb shell</span><br><span class="line">su</span><br></pre></td></tr></table></figure></li><li><p>查看当前分区挂载情况。</p><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">rootfs / rootfs ro,relatime 0 0</span><br><span class="line">tmpfs /dev tmpfs rw,seclabel,nosuid,relatime,mode=755 0 0</span><br><span class="line">devpts /dev/pts devpts rw,seclabel,relatime,mode=600 0 0</span><br><span class="line">proc /proc proc rw,relatime 0 0</span><br><span class="line">sysfs /sys sysfs rw,seclabel,relatime 0 0</span><br><span class="line">selinuxfs /sys/fs/selinux selinuxfs rw,relatime 0 0</span><br><span class="line">debugfs /sys/kernel/debug debugfs rw,relatime 0 0</span><br><span class="line">none /var tmpfs rw,seclabel,relatime,mode=770,gid=1000 0 0</span><br><span class="line">none /acct cgroup rw,relatime,cpuacct 0 0</span><br><span class="line">none /sys/fs/cgroup tmpfs rw,seclabel,relatime,mode=750,gid=1000 0 0</span><br><span class="line">none /sys/fs/cgroup/memory cgroup rw,relatime,memory 0 0</span><br><span class="line">tmpfs /mnt/asec tmpfs rw,seclabel,relatime,mode=755,gid=1000 0 0</span><br><span class="line">tmpfs /mnt/obb tmpfs rw,seclabel,relatime,mode=755,gid=1000 0 0</span><br><span class="line">none /dev/memcg cgroup rw,relatime,memory 0 0</span><br><span class="line">none /dev/cpuctl cgroup rw,relatime,cpu 0 0</span><br><span class="line">none /sys/fs/cgroup tmpfs rw,seclabel,relatime,mode=750,gid=1000 0 0</span><br><span class="line">none /sys/fs/cgroup/memory cgroup rw,relatime,memory 0 0</span><br><span class="line">none /sys/fs/cgroup/freezer cgroup rw,relatime,freezer 0 0</span><br><span class="line">/dev/block/platform/msm_sdcc.1/by-name/system /system ext4 ro,seclabel,relatime,data=ordered 0 0</span><br><span class="line">/dev/block/platform/msm_sdcc.1/by-name/userdata /data ext4 rw,seclabel,nosuid,nodev,relatime,noauto_da_alloc,data=ordered 0 0</span><br><span class="line">/dev/block/platform/msm_sdcc.1/by-name/cache /cache ext4 rw,seclabel,nosuid,nodev,relatime,data=ordered 0 0</span><br><span class="line">/dev/block/platform/msm_sdcc.1/by-name/persist /persist ext4 rw,seclabel,nosuid,nodev,relatime,data=ordered 0 0</span><br><span class="line">/dev/block/platform/msm_sdcc.1/by-name/modem /firmware vfat ro,context=u:object_r:firmware_file:s0,relatime,uid=1000,gid=1000,fmask=0337,dmask=0227,codepage=cp437,iocharset=iso8859-1,shortname=lower,errors=remount-ro 0 0</span><br><span class="line">/dev/fuse /mnt/shell/emulated fuse rw,nosuid,nodev,relatime,user_id=1023,group_id=1023,default_permissions,allow_other 0 0</span><br><span class="line">/dev/fuse /mnt/shell/emulated/0 fuse rw,nosuid,nodev,relatime,user_id=1023,group_id=1023,default_permissions,allow_other 0 0</span><br></pre></td></tr></table></figure><p>找到其中我们关注的带 /system 的那一行：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/dev/block/platform/msm_sdcc.1/by-name/system /system ext4 ro,seclabel,relatime,data=ordered 0 0</span><br></pre></td></tr></table></figure></li><li><p>重新挂载。</p><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -o remount,rw -t yaffs2 /dev/block/platform/msm_sdcc.1/by-name/system /system</span><br></pre></td></tr></table></figure><p>这里的 <code>/dev/block/platform/msm_sdcc.1/by-name/system</code> 就是我们从上一步的输出里得到的文件路径。</p></li></ol><p>如果输出没有提示错误的话，操作就成功了，可以对 /system 下的文件为所欲为了。</p><h3 id="查看连接过的-wifi-密码"><a class="markdownIt-Anchor" href="#查看连接过的-wifi-密码"></a> 查看连接过的 WiFi 密码</h3><p><strong>注：需要 root 权限。</strong></p><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adb shell</span><br><span class="line">su</span><br><span class="line">cat /data/misc/wifi/*.conf</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">network=&#123;</span><br><span class="line">ssid=<span class="string">&quot;TP-LINK_9DFC&quot;</span></span><br><span class="line">scan_ssid=1</span><br><span class="line">psk=<span class="string">&quot;123456789&quot;</span></span><br><span class="line">key_mgmt=WPA-PSK</span><br><span class="line">group=CCMP TKIP</span><br><span class="line">auth_alg=OPEN</span><br><span class="line">sim_num=1</span><br><span class="line">priority=13893</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">network=&#123;</span><br><span class="line">ssid=<span class="string">&quot;TP-LINK_F11E&quot;</span></span><br><span class="line">psk=<span class="string">&quot;987654321&quot;</span></span><br><span class="line">key_mgmt=WPA-PSK</span><br><span class="line">sim_num=1</span><br><span class="line">priority=17293</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>ssid</code> 即为我们在 WLAN 设置里看到的名称，<code>psk</code> 为密码，<code>key_mgmt</code> 为安全加密方式。</p><h3 id="设置系统日期和时间"><a class="markdownIt-Anchor" href="#设置系统日期和时间"></a> 设置系统日期和时间</h3><p><strong>注：需要 root 权限。</strong></p><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adb shell</span><br><span class="line">su</span><br><span class="line">date -s 20160823.131500</span><br></pre></td></tr></table></figure><p>表示将系统日期和时间更改为 2016 年 08 月 23 日 13 点 15 分 00 秒。</p><h3 id="重启手机"><a class="markdownIt-Anchor" href="#重启手机"></a> 重启手机</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb reboot</span><br></pre></td></tr></table></figure><h3 id="检测设备是否已-root"><a class="markdownIt-Anchor" href="#检测设备是否已-root"></a> 检测设备是否已 root</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb shell</span><br><span class="line">su</span><br></pre></td></tr></table></figure><p>此时命令行提示符是 <code>$</code> 则表示没有 root 权限，是 <code>#</code> 则表示已 root。</p><h3 id="使用-monkey-进行压力测试"><a class="markdownIt-Anchor" href="#使用-monkey-进行压力测试"></a> 使用 Monkey 进行压力测试</h3><p>Monkey 可以生成伪随机用户事件来模拟单击、触摸、手势等操作，可以对正在开发中的程序进行随机压力测试。</p><p>简单用法：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell monkey -p &lt;packagename&gt; -v 500</span><br></pre></td></tr></table></figure><p>表示向 <code>&lt;packagename&gt;</code> 指定的应用程序发送 500 个伪随机事件。</p><p>Monkey 的详细用法参考 <a href="https://developer.android.com/studio/test/monkey.html">官方文档</a>。</p><h3 id="开启关闭-wifi"><a class="markdownIt-Anchor" href="#开启关闭-wifi"></a> 开启/关闭 WiFi</h3><p><strong>注：需要 root 权限。</strong></p><p>有时需要控制设备的 WiFi 状态，可以用以下指令完成。</p><p>开启 WiFi：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb root</span><br><span class="line">adb shell svc wifi <span class="built_in">enable</span></span><br></pre></td></tr></table></figure><p>关闭 WiFi：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb root</span><br><span class="line">adb shell svc wifi <span class="built_in">disable</span></span><br></pre></td></tr></table></figure><p>若执行成功，输出为空；若未取得 root 权限执行此命令，将执行失败，输出 <code>Killed</code>。</p><h2 id="刷机相关命令"><a class="markdownIt-Anchor" href="#刷机相关命令"></a> 刷机相关命令</h2><h3 id="重启到-recovery-模式"><a class="markdownIt-Anchor" href="#重启到-recovery-模式"></a> 重启到 Recovery 模式</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb reboot recovery</span><br></pre></td></tr></table></figure><h3 id="从-recovery-重启到-android"><a class="markdownIt-Anchor" href="#从-recovery-重启到-android"></a> 从 Recovery 重启到 Android</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb reboot</span><br></pre></td></tr></table></figure><h3 id="重启到-fastboot-模式"><a class="markdownIt-Anchor" href="#重启到-fastboot-模式"></a> 重启到 Fastboot 模式</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb reboot bootloader</span><br></pre></td></tr></table></figure><h3 id="通过-sideload-更新系统"><a class="markdownIt-Anchor" href="#通过-sideload-更新系统"></a> 通过 sideload 更新系统</h3><p>如果我们下载了 Android 设备对应的系统更新包到电脑上，那么也可以通过 adb 来完成更新。</p><p>以 Recovery 模式下更新为例：</p><ol><li><p>重启到 Recovery 模式。</p><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb reboot recovery</span><br></pre></td></tr></table></figure></li><li><p>在设备的 Recovery 界面上操作进入 <code>Apply update</code>-<code>Apply from ADB</code>。</p><p>注：不同的 Recovery 菜单可能与此有差异，有的是一级菜单就有 <code>Apply update from ADB</code>。</p></li><li><p>通过 adb 上传和更新系统。</p><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb sideload &lt;path-to-update.zip&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="安全相关命令"><a class="markdownIt-Anchor" href="#安全相关命令"></a> 安全相关命令</h2><h3 id="启用禁用-selinux"><a class="markdownIt-Anchor" href="#启用禁用-selinux"></a> 启用/禁用 SELinux</h3><p>启用 SELinux</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb root</span><br><span class="line">adb shell setenforce 1</span><br></pre></td></tr></table></figure><p>禁用 SELinux</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb root</span><br><span class="line">adb shell setenforce 0</span><br></pre></td></tr></table></figure><h3 id="启用禁用-dm_verity"><a class="markdownIt-Anchor" href="#启用禁用-dm_verity"></a> 启用/禁用 dm_verity</h3><p>启用 dm_verity</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb root</span><br><span class="line">adb enable-verity</span><br></pre></td></tr></table></figure><p>禁用 dm_verity</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb root</span><br><span class="line">adb disable-verity</span><br></pre></td></tr></table></figure><h2 id="更多-adb-shell-命令"><a class="markdownIt-Anchor" href="#更多-adb-shell-命令"></a> 更多 adb shell 命令</h2><p>Android 系统是基于 Linux 内核的，所以 Linux 里的很多命令在 Android 里也有相同或类似的实现，在 <code>adb shell</code> 里可以调用。本文档前面的部分内容已经用到了 <code>adb shell</code> 命令。</p><h3 id="查看进程"><a class="markdownIt-Anchor" href="#查看进程"></a> 查看进程</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell ps</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">USER     PID   PPID  VSIZE  RSS     WCHAN    PC        NAME</span><br><span class="line">root      1     0     8904   788   ffffffff 00000000 S /init</span><br><span class="line">root      2     0     0      0     ffffffff 00000000 S kthreadd</span><br><span class="line">...</span><br><span class="line">u0_a71    7779  5926  1538748 48896 ffffffff 00000000 S com.sohu.inputmethod.sogou:classic</span><br><span class="line">u0_a58    7963  5926  1561916 59568 ffffffff 00000000 S org.mazhuang.boottimemeasure</span><br><span class="line">...</span><br><span class="line">shell     8750  217   10640  740   00000000 b6f28340 R ps</span><br></pre></td></tr></table></figure><p>各列含义：</p><table><thead><tr><th>列名</th><th>含义</th></tr></thead><tbody><tr><td>USER</td><td>所属用户</td></tr><tr><td>PID</td><td>进程 ID</td></tr><tr><td>PPID</td><td>父进程 ID</td></tr><tr><td>NAME</td><td>进程名</td></tr></tbody></table><h3 id="查看实时资源占用情况"><a class="markdownIt-Anchor" href="#查看实时资源占用情况"></a> 查看实时资源占用情况</h3><p>命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell top</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">User 0%, System 6%, IOW 0%, IRQ 0%</span><br><span class="line">User 3 + Nice 0 + Sys 21 + Idle 280 + IOW 0 + IRQ 0 + SIRQ 3 = 307</span><br><span class="line"></span><br><span class="line">  PID PR CPU% S  <span class="comment">#THR     VSS     RSS PCY UID      Name</span></span><br><span class="line"> 8763  0   3% R     1  10640K   1064K  <span class="built_in">fg</span> shell    top</span><br><span class="line">  131  0   3% S     1      0K      0K  <span class="built_in">fg</span> root     dhd_dpc</span><br><span class="line"> 6144  0   0% S   115 1682004K 115916K  <span class="built_in">fg</span> system   system_server</span><br><span class="line">  132  0   0% S     1      0K      0K  <span class="built_in">fg</span> root     dhd_rxf</span><br><span class="line"> 1731  0   0% S     6  20288K    788K  <span class="built_in">fg</span> root     /system/bin/mpdecision</span><br><span class="line">  217  0   0% S     6  18008K    356K  <span class="built_in">fg</span> shell    /sbin/adbd</span><br><span class="line"> ...</span><br><span class="line"> 7779  2   0% S    19 1538748K  48896K  <span class="built_in">bg</span> u0_a71   com.sohu.inputmethod.sogou:classic</span><br><span class="line"> 7963  0   0% S    18 1561916K  59568K  <span class="built_in">fg</span> u0_a58   org.mazhuang.boottimemeasure</span><br><span class="line"> ...</span><br></pre></td></tr></table></figure><p>各列含义：</p><table><thead><tr><th>列名</th><th>含义</th></tr></thead><tbody><tr><td>PID</td><td>进程 ID</td></tr><tr><td>PR</td><td>优先级</td></tr><tr><td>CPU%</td><td>当前瞬间占用 CPU 百分比</td></tr><tr><td>S</td><td>进程状态（R=运行，S=睡眠，T=跟踪/停止，Z=僵尸进程）</td></tr><tr><td>#THR</td><td>线程数</td></tr><tr><td>VSS</td><td>Virtual Set Size 虚拟耗用内存（包含共享库占用的内存）</td></tr><tr><td>RSS</td><td>Resident Set Size 实际使用物理内存（包含共享库占用的内存）</td></tr><tr><td>PCY</td><td>调度策略优先级，SP_BACKGROUND/SPFOREGROUND</td></tr><tr><td>UID</td><td>进程所有者的用户 ID</td></tr><tr><td>NAME</td><td>进程名</td></tr></tbody></table><p><code>top</code> 命令还支持一些命令行参数，详细用法如下：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Usage: top [ -m max_procs ] [ -n iterations ] [ -d delay ] [ -s sort_column ] [ -t ] [ -h ]</span><br><span class="line">    -m num  最多显示多少个进程</span><br><span class="line">    -n num  刷新多少次后退出</span><br><span class="line">    -d num  刷新时间间隔（单位秒，默认值 5）</span><br><span class="line">    -s col  按某列排序（可用 col 值：cpu, vss, rss, thr）</span><br><span class="line">    -t      显示线程信息</span><br><span class="line">    -h      显示帮助文档</span><br></pre></td></tr></table></figure><h3 id="查看进程-uid"><a class="markdownIt-Anchor" href="#查看进程-uid"></a> 查看进程 UID</h3><p>有两种方案：</p><ol><li><p><code>adb shell dumpsys package &lt;packagename&gt; | grep userId=</code></p><p>如：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ adb shell dumpsys package org.mazhuang.guanggoo | grep userId=</span><br><span class="line">   userId=10394</span><br></pre></td></tr></table></figure></li><li><p>通过 ps 命令找到对应进程的 pid 之后 <code>adb shell cat /proc/&lt;pid&gt;/status | grep Uid</code></p><p>如：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ adb shell</span><br><span class="line">gemini:/ $ ps | grep org.mazhuang.guanggoo</span><br><span class="line">u0_a394   28635 770   1795812 78736 SyS_epoll_ 0000000000 S org.mazhuang.guanggoo</span><br><span class="line">gemini:/ $ cat /proc/28635/status | grep Uid</span><br><span class="line">Uid:    10394   10394   10394   10394</span><br><span class="line">gemini:/ $</span><br></pre></td></tr></table></figure></li></ol><h3 id="其它"><a class="markdownIt-Anchor" href="#其它"></a> 其它</h3><p>如下是其它常用命令的简单描述，前文已经专门讲过的命令不再额外说明：</p><table><thead><tr><th>命令</th><th>功能</th></tr></thead><tbody><tr><td>cat</td><td>显示文件内容</td></tr><tr><td>cd</td><td>切换目录</td></tr><tr><td>chmod</td><td>改变文件的存取模式/访问权限</td></tr><tr><td>df</td><td>查看磁盘空间使用情况</td></tr><tr><td>grep</td><td>过滤输出</td></tr><tr><td>kill</td><td>杀死指定 PID 的进程</td></tr><tr><td>ls</td><td>列举目录内容</td></tr><tr><td>mount</td><td>挂载目录的查看和管理</td></tr><tr><td>mv</td><td>移动或重命名文件</td></tr><tr><td>ps</td><td>查看正在运行的进程</td></tr><tr><td>rm</td><td>删除文件</td></tr><tr><td>top</td><td>查看进程的资源占用情况</td></tr></tbody></table><h2 id="常见问题"><a class="markdownIt-Anchor" href="#常见问题"></a> 常见问题</h2><h3 id="启动-adb-server-失败"><a class="markdownIt-Anchor" href="#启动-adb-server-失败"></a> 启动 adb server 失败</h3><p><strong>出错提示</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error: protocol fault (couldn<span class="string">&#x27;t read status): No error</span></span><br></pre></td></tr></table></figure><p><strong>可能原因</strong></p><p>adb server 进程想使用的 5037 端口被占用。</p><p><strong>解决方案</strong></p><p>找到占用 5037 端口的进程，然后终止它。以 Windows 下为例：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano | findstr LISTENING</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">TCP    0.0.0.0:5037           0.0.0.0:0              LISTENING       1548</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>这里 1548 即为进程 ID，用命令结束该进程：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">taskkill /PID 1548</span><br></pre></td></tr></table></figure><p>然后再启动 adb 就没问题了。</p><h3 id="comandroidddmlibadbcommandrejectedexception"><a class="markdownIt-Anchor" href="#comandroidddmlibadbcommandrejectedexception"></a> com.android.ddmlib.AdbCommandRejectedException</h3><p>在 Android Studio 里新建一个模拟器，但是用 adb 一直连接不上，提示：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">com.android.ddmlib.AdbCommandRejectedException: device unauthorized.</span><br><span class="line">This adb server&#39;s $ADB_VENDOR_KEYS is not set</span><br><span class="line">Try &#39;adb kill-server&#39; if that seems wrong.</span><br><span class="line">Otherwise check for a confirmation dialog on your device.</span><br></pre></td></tr></table></figure><p>在手机上安装一个终端然后执行 su 提示没有该命令，这不正常。</p><p>于是删除该模拟器后重新下载安装一次，这次就正常了。</p><h2 id="adb-的非官方实现"><a class="markdownIt-Anchor" href="#adb-的非官方实现"></a> adb 的非官方实现</h2><ul><li><a href="https://github.com/facebook/fb-adb">fb-adb</a> - A better shell for Android devices (for Mac).</li></ul><h2 id="相关命令"><a class="markdownIt-Anchor" href="#相关命令"></a> 相关命令</h2><ul><li><a href="./related/aapt.md">aapt</a></li><li><a href="./related/am.md">am</a></li><li><a href="./related/dumpsys.md">dumsys</a></li><li><a href="./related/pm.md">pm</a></li><li><a href="./related/uiautomator.md">uiautomator</a></li></ul><h2 id="参考链接"><a class="markdownIt-Anchor" href="#参考链接"></a> 参考链接</h2><ul><li><a href="https://developer.android.com/studio/command-line/adb.html">Android Debug Bridge</a></li><li><a href="https://developer.android.com/studio/command-line/shell.html">ADB Shell Commands</a></li><li><a href="https://developer.android.com/studio/command-line/logcat.html">logcat Command-line Tool</a></li><li><a href="http://zmywly8866.github.io/2015/01/24/all-adb-command.html">Android ADB命令大全</a></li><li><a href="https://github.com/ZQiang94/StudyRecords/blob/master/other/src/main/java/com/other/adb%20%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%9A%84%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95.md">adb 命令行的使用记录</a></li><li><a href="http://www.jianshu.com/p/860bc2bf1a6a">Android ADB命令大全(通过ADB命令查看wifi密码、MAC地址、设备信息、操作文件、查看文件、日志信息、卸载、启动和安装APK等)</a></li><li><a href="http://yifeiyuan.me/2016/06/30/ADB%E5%91%BD%E4%BB%A4%E6%95%B4%E7%90%86/">那些做Android开发必须知道的ADB命令</a></li><li><a href="http://blog.csdn.net/kittyboy0001/article/details/38562515">adb shell top</a></li><li><a href="http://cabins.github.io/2016/03/25/UseAdbLikeAPro-2/">像高手一样使用ADB命令行（2）</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> 刷机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Win10局域网文件共享手机访问</title>
      <link href="2017/08/03/Win10%E5%B1%80%E5%9F%9F%E7%BD%91%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%89%8B%E6%9C%BA%E8%AE%BF%E9%97%AE/"/>
      <url>2017/08/03/Win10%E5%B1%80%E5%9F%9F%E7%BD%91%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%89%8B%E6%9C%BA%E8%AE%BF%E9%97%AE/</url>
      
        <content type="html"><![CDATA[<p>关于通过win10电脑使用局域网共享文件，手机访问一直提示权限不足，今天终于找到了解决方法。</p><h2 id="电脑端设置"><a class="markdownIt-Anchor" href="#电脑端设置"></a> 电脑端设置</h2><ol><li><p>选择要共享的硬盘/U盘/移动硬盘等，鼠标右键选择授予访问权限-&gt;高级共享；</p></li><li><p>点击高级共享，勾选共享此文件夹，点确定，也可以点权限设置用户权限，默认只有读权限；</p></li><li><p>点密码保护下面的网络和共享中心进行设置；</p></li><li><p>进入计算机管理，可鼠标右键桌面此电脑图标选择管理打开</p></li><li><p>选择本地用户和组，鼠标右键选择新建用户，填好用户名和明码；</p></li><li><p>再刚刚新建的用户处，鼠标右键选择设置密码，会弹出提示窗口，选择继续；</p></li><li><p>设置好密码，至此电脑端的设置完成；</p></li></ol><h2 id="手机端设置"><a class="markdownIt-Anchor" href="#手机端设置"></a> 手机端设置</h2><p>以ios设备为例</p><ol><li><p>打开有关软件，以FE文件管理为例；</p></li><li><p>点击右上角+号，选择Windows，往下拉，再网络邻居下选择你的电脑名字的选项，选择注册的用户</p></li><li><p>弹出设置账号密码选项，将电脑端设置的账号密码输入进去后选择保存&amp;登录；</p></li><li><p>至此手机端设置完成，以后可以在FE文件管理应用首页就可以进入浏览共享的文件了。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> 局域网文件共享 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小米手机刷机</title>
      <link href="2017/08/03/%E5%B0%8F%E7%B1%B3%E6%89%8B%E6%9C%BA%E5%88%B7%E6%9C%BA/"/>
      <url>2017/08/03/%E5%B0%8F%E7%B1%B3%E6%89%8B%E6%9C%BA%E5%88%B7%E6%9C%BA/</url>
      
        <content type="html"><![CDATA[<h2 id="环境准备"><a class="markdownIt-Anchor" href="#环境准备"></a> 环境准备</h2><ol><li>已解锁小米手机一部；<ul><li>解锁点击<a href="http://www.miui.com/unlock/index.html">申请解锁</a></li><li>通过申请后下载解锁工具进行解锁</li></ul></li><li>电脑一台；</li><li>驱动已安装好；</li><li>刷机包<ul><li>线刷包下载地址<a href="https://www.miui.com/shuaji-393.html">官网下载</a>；</li><li>卡刷包下载地址<a href="http://www.miui.com/download.html">官网下载</a>；</li><li>第三方包可以从智友，移动叔叔等论坛下载；</li></ul></li><li>资料备份好<ul><li>可以通过自带备份功能备份；</li><li>其他方式备份；</li></ul></li><li>刷机工具miflash<ul><li>下载地址同线刷包下载地址</li></ul></li></ol><h2 id="开始刷机"><a class="markdownIt-Anchor" href="#开始刷机"></a> 开始刷机</h2><h3 id="卡刷"><a class="markdownIt-Anchor" href="#卡刷"></a> 卡刷</h3><ol><li>将卡刷包放进内存；</li><li>进入recovery模式；<ul><li>长按电源键+音量加键</li></ul></li><li>双请，比较大的版本更新需要三清；</li><li>根据提示选择刷机包刷机；</li><li>重启，需等待较长时间。</li></ol><h2 id="线刷"><a class="markdownIt-Anchor" href="#线刷"></a> 线刷</h2><ol><li>打开线刷工具miflash；</li><li>选择好刷机包（需要解压）；</li><li>手机进入fastboot模式<ul><li>长按电源键+音量减键</li></ul></li><li>连接手机，点刷新，选择设备，清除哪些东西，选择好后开始刷机；</li><li>重启。</li></ol><h2 id="三方包卡刷"><a class="markdownIt-Anchor" href="#三方包卡刷"></a> 三方包卡刷</h2><ol><li>刷入三方recovery；<ul><li>论坛下载三方recovery刷入工具</li><li>手机进入fastboot模式选择刷入</li></ul></li><li>其他步骤跟官方卡刷一样。</li></ol>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> 刷机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GL-iNeT MT300v2路由器原厂固件刷入SSR</title>
      <link href="2017/07/16/GL-iNeT%20MT300v2%E8%B7%AF%E7%94%B1%E5%99%A8%E5%8E%9F%E5%8E%82%E5%9B%BA%E4%BB%B6%E5%88%B7%E5%85%A5SSR/"/>
      <url>2017/07/16/GL-iNeT%20MT300v2%E8%B7%AF%E7%94%B1%E5%99%A8%E5%8E%9F%E5%8E%82%E5%9B%BA%E4%BB%B6%E5%88%B7%E5%85%A5SSR/</url>
      
        <content type="html"><![CDATA[<h2 id="下载"><a class="markdownIt-Anchor" href="#下载"></a> 下载</h2><p>下载基于openwrt的ssr客户端，<a href="https://pan.baidu.com/s/1rJcwYu0PbGFTtqPLbmj_2A">mt300v2专版ssr</a>，提取码501b；</p><p>winscp，用于传文件；</p><p>xshell等远程连接工具；</p><h2 id="刷入"><a class="markdownIt-Anchor" href="#刷入"></a> 刷入</h2><ol><li><p>打开winscp，选中scp协议，主机名填路由器地址，端口号22，用户名密码使用root账户密码；</p></li><li><p>解压下载的ssr客户端，得到两个文件，一般使用luci-app-shadowsocksR_1.2.1_all这个，GFW版是黑名单版的，将这个文件上传到路由器的/tmp文件夹；</p></li><li><p>使用xshel连接路由器，类似winscp连接，协议要选择ssh，其余选项一样；</p></li><li><p>连接好后</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /tmp</span><br><span class="line">opkg install luci-app-shadowsocksR_1.2.1_all.ipk</span><br></pre></td></tr></table></figure></li><li><p>如果错误，电脑需要联网执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">opkg update</span><br></pre></td></tr></table></figure></li></ol><p>后再执行安装；</p><ol start="6"><li>安装好后就可以进入路由器管理界面，选择高级进入openwrt管理，选择服务下拉就有ssr了；</li></ol><h2 id="qa"><a class="markdownIt-Anchor" href="#qa"></a> Q&amp;A</h2><p>进入ssr显示Failed to execute arcombine dispatcher target for entry …解决办法：</p><p>用xhell连接路由器，用vim分别打开</p><p>/usr/lib/lua/luci/model/cbi/shadowsocksr/client.lua<br />/usr/lib/lua/luci/model/cbi/shadowsocksr/client-config.lua</p><p>在26行附近,<br />将local arp_table = luci.sys.net.arptable() or {}<br />修改为local arp_table = luci.ip.neighbors()即可。</p>]]></content>
      
      
      <categories>
          
          <category> 路由器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 路由器 </tag>
            
            <tag> mt300v2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安卓SSR热点共享（免流）</title>
      <link href="2017/07/11/%E5%AE%89%E5%8D%93SSR%E7%83%AD%E7%82%B9%E5%85%B1%E4%BA%AB%EF%BC%88%E5%85%8D%E6%B5%81%EF%BC%89/"/>
      <url>2017/07/11/%E5%AE%89%E5%8D%93SSR%E7%83%AD%E7%82%B9%E5%85%B1%E4%BA%AB%EF%BC%88%E5%85%8D%E6%B5%81%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h2 id="关于粉色飞机"><a class="markdownIt-Anchor" href="#关于粉色飞机"></a> 关于粉色飞机</h2><p>粉色飞机SSR客户端只能实现手机自身科学上网，那要怎样开热点共享给电脑等其他设备呢，一种通过安卓手机共享的方法：</p><h2 id="准备"><a class="markdownIt-Anchor" href="#准备"></a> 准备</h2><ol><li>一台已root的安卓手机；</li><li>安装RE文件管理；</li><li>安装busyboxpro；</li><li>下载蓝飞机<a href="https://pan.baidu.com/s/1l7qLZJLXhCVqUAdAaddWOA">sussr</a>，提取码8bcd。</li></ol><h2 id="手机上配置"><a class="markdownIt-Anchor" href="#手机上配置"></a> 手机上配置</h2><ol><li>打开busybox，加载到100%后点安装；</li><li>打开RE文件管理，将下载文件解压到/system/xbin；</li><li>文本编辑器打开setting.ini，vpsconf项填入ssr；</li><li>在vps文件夹下新建文件ssr.txt；</li><li>将ssr链接拷贝到ssr.txt文件中；</li><li>设置sussr整个文件夹权限为0777；</li><li><a href="http://xn--vpsSSR-kp7it6ds47bjhxbvar4ppp8du9zccmwalnbo71c.sh">运行vps文件夹下的SSR链接转换.sh</a>；</li><li>查看ssr.txt内容是否转换成功，</li><li>编辑ssr.txt，将host前的#删除，host后修改成自己混线参数；</li><li>再次设置sussr文件夹的权限为0777；</li><li>打开sussr文件夹，运行start.sh就成功了；</li><li>打开浏览器，百度或其他搜索网站搜ip，查看当前ip，是否为ssr服务器的ip；</li><li>打开手机热点就可以共享了。</li></ol><h2 id="注意的问题"><a class="markdownIt-Anchor" href="#注意的问题"></a> 注意的问题</h2><ol><li>手机必须root；</li><li>每次设置了ssr.txt文件内容或其他文件，都要重新设置权限为0777；</li><li>设置权限为整个文件夹及子目录文件，RE文件管理下，选择文件-&gt;设置文件权限，上面三排全勾上，下面的不应用到子目录必须去掉勾。</li></ol><h2 id="关于免流"><a class="markdownIt-Anchor" href="#关于免流"></a> 关于免流</h2><ol><li>准备手机卡的免流混淆参数，没有混淆参数的可以搜索，比如大王卡等卡的混淆参数，网上有现成的；</li><li>网上没有的可以自己抓包，下载抓包软件，打开抓包软件，打开免流的应用执行一些免流操作，等待抓包一段时间，查看记录的内容，一般host后面的为需要的混淆参数；</li><li>有混淆参数后就可以设置配置文件ssr.txt下的混淆参数了；</li></ol>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> SSR </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos7删除多余内核</title>
      <link href="2017/07/10/Centos7%E5%88%A0%E9%99%A4%E5%A4%9A%E4%BD%99%E5%86%85%E6%A0%B8/"/>
      <url>2017/07/10/Centos7%E5%88%A0%E9%99%A4%E5%A4%9A%E4%BD%99%E5%86%85%E6%A0%B8/</url>
      
        <content type="html"><![CDATA[<p>Centos更新内核后，开机的启动项就会增加更新的内核选项，同时会保留旧的内核选项，看着不舒服，如何删除旧的内核及选项:</p><ol><li><p>打开终端，查看当前使用的内核；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -a</span><br></pre></td></tr></table></figure></li><li><p>查看所有内核选项；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa|grep kernel</span><br></pre></td></tr></table></figure></li><li><p>进入root模式，删除多余内核；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum remove 多余内核</span><br></pre></td></tr></table></figure></li><li><p>重新编译引导；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub2-mkconfig -o /boot/grub2/grub.cfg</span><br></pre></td></tr></table></figure></li><li><p>重启；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">init 6</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntu 卡在waiting for unattended-upgr to exit</title>
      <link href="2017/06/16/ubuntu%20%E5%8D%A1%E5%9C%A8waiting%20for%20unattended-upgr%20to%20exit%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/"/>
      <url>2017/06/16/ubuntu%20%E5%8D%A1%E5%9C%A8waiting%20for%20unattended-upgr%20to%20exit%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>需要删除以下几个lock file就OK了</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo rm /var/lib/apt/lists/lock</span><br><span class="line">sudo rm /var/cache/apt/archives/lock</span><br><span class="line">sudo rm /var/lib/dpkg/lock</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何搭个人博客</title>
      <link href="2017/05/20/%E5%A6%82%E4%BD%95%E6%90%AD%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
      <url>2017/05/20/%E5%A6%82%E4%BD%95%E6%90%AD%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<p>以Linux系统(centos)为例，介绍环境搭建及如何部署到gitub</p><h2 id="搭建hexo博客框架"><a class="markdownIt-Anchor" href="#搭建hexo博客框架"></a> 搭建Hexo博客框架</h2><h3 id="安装git"><a class="markdownIt-Anchor" href="#安装git"></a> 安装Git</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum -y install git</span><br></pre></td></tr></table></figure><h3 id="安装nodejs平台"><a class="markdownIt-Anchor" href="#安装nodejs平台"></a> 安装Node.js平台</h3><ol><li><p>下载Node.js，<a href="https://nodejs.org/en/download/">官网下载</a>，选择对应系统二进制文件下载；</p></li><li><p>解压；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xz -d node-v10.16.0-linux-x64.tar.xz</span><br></pre></td></tr></table></figure></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line">3. 添加环境变量，编辑&#x2F;etc&#x2F;profile，在</span><br><span class="line"></span><br><span class="line">   &#96;&#96;&#96;bash</span><br><span class="line">   export PATH USER LOGNAME MAIL HOSTNAME HISTSIZE HISTCONTROL</span><br></pre></td></tr></table></figure><p>上面添加</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PATH=<span class="variable">$PATH</span>:/home/tangle/node/node-v10.16.0-linux-x64/bin</span><br></pre></td></tr></table></figure><p>取决于node压缩包解压在那个文件夹；</p><ol start="4"><li><p>重启系统使环境变量生效，可运行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span></span><br></pre></td></tr></table></figure></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line">查看环境变量有没有添加成功；</span><br><span class="line"></span><br><span class="line">### 安装Hexo</span><br><span class="line"></span><br><span class="line">1. 新建博客文件夹blog；</span><br><span class="line"></span><br><span class="line">   &#96;&#96;&#96;bash</span><br><span class="line">   mkdir blog</span><br></pre></td></tr></table></figure><ol start="2"><li><p>因为npm直接安装Hexo太慢了，推荐先安装某宝的镜像源cnpm，再用cnpm安装Hexo</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry==https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line">3. 用cnpm安装Hexo</span><br><span class="line"></span><br><span class="line">   &#96;&#96;&#96;bash</span><br><span class="line">   cnpm install -g hexo-cli</span><br></pre></td></tr></table></figure><ol start="4"><li><p>在blog文件夹初始化Hexo博客</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line">5. 开启服务预览</span><br><span class="line"></span><br><span class="line">   &#96;&#96;&#96;bash</span><br><span class="line">   hexo s</span><br></pre></td></tr></table></figure><p>浏览器输入localhost:4000查看</p><ol start="6"><li><p>常用命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">&quot;博客名字&quot;</span> <span class="comment">#新建博客</span></span><br><span class="line">hexo g <span class="comment">#重新生成内容</span></span><br><span class="line">hexo s <span class="comment">#开启本地预览服务</span></span><br><span class="line">hexo d <span class="comment">#部署到远端</span></span><br></pre></td></tr></table></figure></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 部署博客到github</span><br><span class="line"></span><br><span class="line">1. 新建github仓库，注意仓库名字为：昵称.github.io；</span><br><span class="line"></span><br><span class="line">2. 在blog目录安装git插件；</span><br><span class="line"></span><br><span class="line">   &#96;&#96;&#96;bash</span><br><span class="line">   cnpm install --save hexo-deployer-git</span><br></pre></td></tr></table></figure><ol start="3"><li><p>设置blog目录配置文件,在deloy后添加内容，样式如下；</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deloy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: 仓库地址</span><br><span class="line">  branch：master</span><br></pre></td></tr></table></figure></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line">4. 部署到github远端；</span><br><span class="line"></span><br><span class="line">   &#96;&#96;&#96;bash</span><br><span class="line">   hexo d</span><br></pre></td></tr></table></figure><h2 id="电脑重装系统后恢复blog"><a class="markdownIt-Anchor" href="#电脑重装系统后恢复blog"></a> 电脑重装系统后恢复Blog</h2><p><em><strong>以下方法只适用于没有删除 hexo blog 文件夹</strong></em></p><p>因为重装系统后，Hexo 相关依赖插件 / 软件和在 C 盘的缓存资料都会被删除，以至于 Hexo 的相关<br />命令都无法运行。所有，在重装系统后，都要重新部署 Hexo。但是重新部署并不难，只需要几个步骤就行。</p><p>hexo blog 文件夹不存储于 C 盘，并没有因为重装系统被删掉。所有重新部署很容易。</p><h3 id="1-安装-git-和-node"><a class="markdownIt-Anchor" href="#1-安装-git-和-node"></a> 1. 安装 git 和 node</h3><h3 id="2-生成-ssh-密鑰"><a class="markdownIt-Anchor" href="#2-生成-ssh-密鑰"></a> 2. 生成 ssh 密鑰</h3><p>配置 git 个人信息和生成 ssh 密钥</p><p>打开 git bash，输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;xxxxx&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;xxxxxx@xx.com&quot;</span></span><br><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;xxxxxx@xx.com&quot;</span></span><br></pre></td></tr></table></figure><p>把上面的 xxxx 换成自己的资料，然后一直 Enter 就行。</p><h3 id="3-设置-github-的-ssh-密钥"><a class="markdownIt-Anchor" href="#3-设置-github-的-ssh-密钥"></a> 3. 设置 Github 的 ssh 密钥</h3><p>当上面的运行完成后，会在 C:\Users\主用户里出现.ssh 文件夹，里面有 id_rsa 和 id_rsa.pub 两个文件，复制 id_rsa.pub 的内容。</p><p><img src="https://s1.ax1x.com/2020/04/11/GHkOaD.png" alt="" /></p><p>打开 Github 网页，依次是 右上角Settings - SSH and GPG keys - New SSH key 把复制的内容粘贴到 Key 栏，然后保存。<br /><img src="https://s1.ax1x.com/2020/04/11/GHkvPH.png" alt="" /></p><p><img src="https://s1.ax1x.com/2020/04/11/GHkLVO.png" alt="" /></p><p>PS：如果你有把 blog 同步到 coding 的，记得同样把 id_rsa.pub 的内容复制到 coding 的 ssh 公钥去，具体为右上角个人设置 - SSH公钥 - 新增公钥</p><p><img src="https://s1.ax1x.com/2020/04/11/GHkXIe.png" alt="" /></p><h3 id="4-安装-hexo"><a class="markdownIt-Anchor" href="#4-安装-hexo"></a> 4. 安装 Hexo</h3><p>git bash 上 输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure><h3 id="5-删掉原-blog-文件夹部分文件"><a class="markdownIt-Anchor" href="#5-删掉原-blog-文件夹部分文件"></a> 5. 删掉原 blog 文件夹部分文件</h3><p>打开你原有的 blog 文件夹，只需保留_config.yml，theme/，source/，scaffolds/，package.json，.gitignore 这些项目，删除其他的文件。</p><h3 id="6-安装依赖文件"><a class="markdownIt-Anchor" href="#6-安装依赖文件"></a> 6. 安装依赖文件</h3><p>git bash 上 输入 npm install</p><h3 id="7-安装部署插件"><a class="markdownIt-Anchor" href="#7-安装部署插件"></a> 7. 安装部署插件</h3><p>git bash 上 输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>最后 运行 hexo clean &amp;&amp; hexo g &amp;&amp; hexo d 看看是否成功。</p>]]></content>
      
      
      <categories>
          
          <category> 个人博客 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux达人养成计划2</title>
      <link href="2017/04/15/Linux%E8%BE%BE%E4%BA%BA%E5%85%BB%E6%88%90%E8%AE%A1%E5%88%922/"/>
      <url>2017/04/15/Linux%E8%BE%BE%E4%BA%BA%E5%85%BB%E6%88%90%E8%AE%A1%E5%88%922/</url>
      
        <content type="html"><![CDATA[<ol><li>df 查看磁盘分区使用情况<ul><li>-l仅显示本地磁盘(默认)</li><li>-h以1024进制显示容量</li></ul></li><li>分区：mbr分区最多四个主分区，扩展分区不能存储数据，只能添加逻辑分区；</li><li>必须对磁盘进行分区，格式化，挂载后才能使用；</li><li>MBR分区命令fdisk；</li><li>fdisk<ul><li>-l 显示分区情况</li><li>fdisk 需要分区的磁盘</li></ul></li><li>GPT分区最多可以有128个主分区，并且突破了每个分区不能大于2TB的限制；</li><li>GPT分区命令parted；</li><li>GPT分区不适合x86系统；</li><li>分区格式化使用mkfs命令；</li><li>mkfs.exts /dev/sdb*或者mkfs -t /dev/sdb…  都是格式化，效果是一样的；</li><li>扩展分区不能格式化，只能格式化下面的逻辑分区；</li><li>分好区后必须挂载分区才能使用，一般挂载到/mnt分区；</li><li>先建立文件夹，mkdir -p /mnt/tal      mount /dev/sdb1 /mnt/tal；</li><li>卸载umount /mnt/tal；</li><li>系统自动挂载需要修改/etc/fstab文件；</li><li>添加swap分区：<ul><li>建立一个普通分区</li><li>修改分区类型的16进制编码</li><li>格式化交换分区 mkswap</li><li>启用交换分区 swapon</li></ul></li><li>free命令查看swap分区状况；</li><li>swapoff停止swap分区；</li><li>用户和用户组的概念；</li><li>/etc/group存储当前系统中所有用户组的信息；</li><li>root用户组号0，用户创建的从500号开始；</li><li>/etc/gshadow存储当前系统中用户组的密码信息；</li><li>/etc/passwd存储当前系统中所有用户的信息；</li><li>/etc/gshadow存储当前系统中用户的密码信息；</li><li>groupadd sexy 创建用户组sexy；</li><li>groupmod -n market sexy 修改sexy用户组名为market；</li><li>groupmod -g 668 market 修改用户组编号为668；</li><li>groupadd -g 888 boss 创建用户组号为888用户组名为boss的用户组；</li><li>groupdel market删除market用户组；</li><li>删除用户组前需先删除组中的用户；</li><li>useradd -g sexy sdf 向sexy用户组中添加用户sdf；</li><li>创建用户未指定用户目录系统会在home目录下创建用户名同名文件夹；</li><li>useradd -d /home/*** tang 添加用户并指定用户目录；</li><li>usermod -c dgdzmx sdf 修改用户注释；</li><li>usermod -l cls sdf 修改sdf用户名为cls；</li><li>usermod -d /home/cls cls修改cls的个人文件夹路径为cls；</li><li>usermod -g sexy tan’g 将tang用户切换到sexy用户组；</li><li>userdel jzmb删除用户未删除个人文件，要删除文件加上-r参数；</li><li>创建文件nologin可以禁止除root外所有用户登录，touch /etc/nologin；</li><li>passwd -l cls 锁定cls用户；</li><li>passwd -u cls 解锁用cls户；</li><li>passwd -d cls 清除cls用户密码；</li><li>用户可以同时属于多个组，一个主要组，一个附属组；</li><li>gpasswd -a cls boss为cls添加附属组boss；</li><li>newgrp boss切换到附属组boss，需要输入组密码；</li><li>gpasswd -a cls boss删除cls的附属用户组boss；</li><li>useradd -g group1 -G group2，group3.。。。。。添加用户指定为用户组group1并添加附属组2，3.。。。；</li><li>设置tang组密码gpassws tang；</li><li>su 用户名，切换用户；</li><li>whoami我是谁；</li><li>id 用户名  显示指定用户信息；</li><li>groups 用户名显示用户所在的用户组；</li></ol>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vim常用插件</title>
      <link href="2017/04/10/Vim%E5%B8%B8%E7%94%A8%E6%8F%92%E4%BB%B6/"/>
      <url>2017/04/10/Vim%E5%B8%B8%E7%94%A8%E6%8F%92%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="vim常用插件"><a class="markdownIt-Anchor" href="#vim常用插件"></a> Vim常用插件</h2><h3 id="插件管理"><a class="markdownIt-Anchor" href="#插件管理"></a> 插件管理</h3><p>可在<a href="https://vimawesome.com/">vimAwesome</a>找自己想要的插件，以下使用vim-plug插件管理器安装及管理插件，vim-plug安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -fLo ~/.vim/<span class="built_in">autoload</span>/plug.vim --create-dirs \</span><br><span class="line">    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim</span><br></pre></td></tr></table></figure><p>安装完成后再配置文件加上，中间添加安装插件。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">call plug</span><br><span class="line"><span class="comment">#begin(&#x27;~/.vim/plugged&#x27;)</span></span><br><span class="line"></span><br><span class="line">call plug</span><br><span class="line"><span class="comment">#end()</span></span><br></pre></td></tr></table></figure><h3 id="常用插件列表"><a class="markdownIt-Anchor" href="#常用插件列表"></a> 常用插件列表</h3><table><thead><tr><th>插件</th><th>说明</th></tr></thead><tbody><tr><td><a href="https://github.com/chxuan/cpp-mode">cpp-mode</a></td><td>提供生成函数实现、函数声明/实现跳转、.h .cpp切换等功能</td></tr><tr><td><a href="https://github.com/chxuan/vim-edit">vim-edit</a></td><td>方便的文本编辑插件</td></tr><tr><td><a href="https://github.com/chxuan/change-colorscheme">change-colorscheme</a></td><td>快速切换主题</td></tr><tr><td><a href="https://github.com/chxuan/prepare-code">prepare-code</a></td><td>新建文件时，生成预定义代码片段</td></tr><tr><td><a href="https://github.com/mhinz/vim-startify">vim-startify</a></td><td>vim开始页面</td></tr><tr><td><a href="https://github.com/majutsushi/tagbar">tagbar</a></td><td>显示类/方法/变量</td></tr><tr><td><a href="https://github.com/junegunn/vim-plug">vim-plug</a></td><td>插件管理软件</td></tr><tr><td><a href="https://github.com/Valloric/YouCompleteMe">YouCompleteMe</a></td><td>基于语义的自动补全插件，支持C/C++、C#、Python、PHP等语言</td></tr><tr><td><a href="https://github.com/scrooloose/nerdtree">NerdTree</a></td><td>代码资源管理器</td></tr><tr><td><a href="https://github.com/tiagofumo/vim-nerdtree-syntax-highlight">vim-nerdtree-syntax-highlight</a></td><td>NerdTree文件类型高亮</td></tr><tr><td><a href="https://github.com/Xuyuanp/nerdtree-git-plugin">nerdtree-git-plugin</a></td><td>NerdTree显示git状态</td></tr><tr><td><a href="https://github.com/ryanoasis/vim-devicons">vim-devicons</a></td><td>显示文件类型图标</td></tr><tr><td><a href="https://github.com/vim-airline/vim-airline">Airline</a></td><td>状态栏美化插件</td></tr><tr><td><a href="https://github.com/jiangmiao/auto-pairs">auto-pairs</a></td><td>自动补全引号、圆括号、花括号等</td></tr><tr><td><a href="https://github.com/Yggdroot/LeaderF">LeaderF</a></td><td>强大的文件的模糊搜索工具</td></tr><tr><td><a href="https://github.com/mileszs/ack.vim">ack</a></td><td>强大的文本搜索工具</td></tr><tr><td><a href="https://github.com/tpope/vim-surround">vim-surround</a></td><td>自动增加、替换配对符的插件</td></tr><tr><td><a href="https://github.com/tpope/vim-commentary">vim-commentary</a></td><td>快速注释代码插件</td></tr><tr><td><a href="https://github.com/tpope/vim-repeat">vim-repeat</a></td><td>重复上一次操作</td></tr><tr><td><a href="https://github.com/tpope/vim-endwise">vim-endwise</a></td><td>if/end/endif/endfunction补全</td></tr><tr><td><a href="https://github.com/godlygeek/tabular">tabular</a></td><td>代码、注释、表格对齐</td></tr><tr><td><a href="https://github.com/easymotion/vim-easymotion">vim-easymotion</a></td><td>强大的光标快速移动工具，强大到颠覆你的插件观</td></tr><tr><td><a href="https://github.com/haya14busa/incsearch.vim">incsearch.vim</a></td><td>模糊字符搜索插件</td></tr><tr><td><a href="https://github.com/iamcco/markdown-preview.vim">markdown-preview</a></td><td>markdown实时预览</td></tr><tr><td><a href="https://github.com/tpope/vim-fugitive">vim-fugitive</a></td><td>集成Git</td></tr><tr><td><a href="https://github.com/junegunn/gv.vim">gv</a></td><td>显示git提交记录</td></tr><tr><td><a href="https://github.com/junegunn/vim-slash">vim-slash</a></td><td>优化搜索，移动光标后清除高亮</td></tr><tr><td><a href="https://github.com/Shougo/echodoc.vim">echodoc</a></td><td>补全函数时在命令栏显示函数签名</td></tr><tr><td><a href="https://github.com/terryma/vim-smooth-scroll">vim-smooth-scroll</a></td><td>让翻页更顺畅</td></tr><tr><td><a href="https://github.com/rhysd/clever-f.vim">clever-f.vim</a></td><td>强化f和F键</td></tr><tr><td><a href="https://github.com/rhysd/github-complete.vim">github-complete.vim</a></td><td>Emoji🐶补全</td></tr><tr><td><a href="https://github.com/yianwillis/vimcdoc">vimcdoc</a></td><td>vim中文文档</td></tr></tbody></table><h3 id="配置文件"><a class="markdownIt-Anchor" href="#配置文件"></a> 配置文件</h3><p>leader键设置为, 打开配置文件快捷键leader键+e</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">&quot;</span> 通用设置</span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">let mapleader = &quot;</span>,<span class="string">&quot;      &quot;</span> 定义&lt;leader&gt;键</span><br><span class="line"><span class="built_in">set</span> nocompatible         <span class="string">&quot; 设置不兼容原始vi模式</span></span><br><span class="line"><span class="string">filetype on              &quot;</span> 设置开启文件类型侦测</span><br><span class="line">filetype plugin on       <span class="string">&quot; 设置加载对应文件类型的插件</span></span><br><span class="line"><span class="string">set noeb                 &quot;</span> 关闭错误的提示</span><br><span class="line">syntax <span class="built_in">enable</span>            <span class="string">&quot; 开启语法高亮功能</span></span><br><span class="line"><span class="string">syntax on                &quot;</span> 自动语法高亮</span><br><span class="line"><span class="built_in">set</span> t_Co=256             <span class="string">&quot; 开启256色支持</span></span><br><span class="line"><span class="string">set cmdheight=2          &quot;</span> 设置命令行的高度</span><br><span class="line"><span class="built_in">set</span> showcmd              <span class="string">&quot; select模式下显示选中的行数</span></span><br><span class="line"><span class="string">set ruler                &quot;</span> 总是显示光标位置</span><br><span class="line"><span class="built_in">set</span> laststatus=2         <span class="string">&quot; 总是显示状态栏</span></span><br><span class="line"><span class="string">set number               &quot;</span> 开启行号显示</span><br><span class="line"><span class="built_in">set</span> cursorline           <span class="string">&quot; 高亮显示当前行</span></span><br><span class="line"><span class="string">set whichwrap+=&lt;,&gt;,h,l   &quot;</span> 设置光标键跨行</span><br><span class="line"><span class="built_in">set</span> ttimeoutlen=0        <span class="string">&quot; 设置&lt;ESC&gt;键响应时间</span></span><br><span class="line"><span class="string">set virtualedit=block,onemore   &quot;</span> 允许光标出现在最后一个字符的后面</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">&quot;</span> 代码缩进和排版</span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">set autoindent           &quot;</span> 设置自动缩进</span><br><span class="line"><span class="built_in">set</span> cindent              <span class="string">&quot; 设置使用C/C++语言的自动缩进方式</span></span><br><span class="line"><span class="string">set cinoptions=g0,:0,N-s,(0    &quot;</span> 设置C/C++语言的具体缩进方式</span><br><span class="line"><span class="built_in">set</span> smartindent          <span class="string">&quot; 智能的选择对其方式</span></span><br><span class="line"><span class="string">filetype indent on       &quot;</span> 自适应不同语言的智能缩进</span><br><span class="line"><span class="built_in">set</span> expandtab            <span class="string">&quot; 将制表符扩展为空格</span></span><br><span class="line"><span class="string">set tabstop=4            &quot;</span> 设置编辑时制表符占用空格数</span><br><span class="line"><span class="built_in">set</span> shiftwidth=4         <span class="string">&quot; 设置格式化时制表符占用空格数</span></span><br><span class="line"><span class="string">set softtabstop=4        &quot;</span> 设置4个空格为制表符</span><br><span class="line"><span class="built_in">set</span> smarttab             <span class="string">&quot; 在行和段开始处使用制表符</span></span><br><span class="line"><span class="string">set nowrap               &quot;</span> 禁止折行</span><br><span class="line"><span class="built_in">set</span> backspace=2          <span class="string">&quot; 使用回车键正常处理indent,eol,start等</span></span><br><span class="line"><span class="string">set sidescroll=10        &quot;</span> 设置向右滚动字符数</span><br><span class="line"><span class="built_in">set</span> nofoldenable         <span class="string">&quot; 禁用折叠代码</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"><span class="string">&quot; 代码补全</span></span><br><span class="line"><span class="string">&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"><span class="built_in">set</span> wildmenu             <span class="string">&quot; vim自身命名行模式智能补全</span></span><br><span class="line"><span class="string">set completeopt-=preview &quot;</span> 补全时不显示窗口，只显示补全列表</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">&quot;</span> 搜索设置</span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">set hlsearch            &quot;</span> 高亮显示搜索结果</span><br><span class="line"><span class="built_in">set</span> incsearch           <span class="string">&quot; 开启实时搜索功能</span></span><br><span class="line"><span class="string">set ignorecase          &quot;</span> 搜索时大小写不敏感</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">&quot;</span> 缓存设置</span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">set nobackup            &quot;</span> 设置不备份</span><br><span class="line"><span class="built_in">set</span> noswapfile          <span class="string">&quot; 禁止生成临时文件</span></span><br><span class="line"><span class="string">set autoread            &quot;</span> 文件在vim之外修改过，自动重新读入</span><br><span class="line"><span class="built_in">set</span> autowrite           <span class="string">&quot; 设置自动保存</span></span><br><span class="line"><span class="string">set confirm             &quot;</span> 在处理未保存或只读文件的时候，弹出确认</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">&quot;</span> 编码设置</span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">set langmenu=zh_CN.UTF-8</span></span><br><span class="line"><span class="string">set helplang=cn</span></span><br><span class="line"><span class="string">set termencoding=utf-8</span></span><br><span class="line"><span class="string">set encoding=utf8</span></span><br><span class="line"><span class="string">set fileencodings=utf8,ucs-bom,gbk,cp936,gb2312,gb18030</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"><span class="string">&quot; gvim/macvim设置</span></span><br><span class="line"><span class="string">&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">if</span> has(<span class="string">&quot;gui_running&quot;</span>)</span><br><span class="line">    <span class="built_in">set</span> guifont=Droid\ Sans\ Mono\ Nerd\ Font\ Complete:h18 <span class="string">&quot; 设置字体</span></span><br><span class="line"><span class="string">    set guioptions-=m           &quot;</span> 隐藏菜单栏</span><br><span class="line">    <span class="built_in">set</span> guioptions-=T           <span class="string">&quot; 隐藏工具栏</span></span><br><span class="line"><span class="string">    set guioptions-=L           &quot;</span> 隐藏左侧滚动条</span><br><span class="line">    <span class="built_in">set</span> guioptions-=r           <span class="string">&quot; 隐藏右侧滚动条</span></span><br><span class="line"><span class="string">    set guioptions-=b           &quot;</span> 隐藏底部滚动条</span><br><span class="line">    <span class="built_in">set</span> showtabline=0           <span class="string">&quot; 隐藏Tab栏</span></span><br><span class="line"><span class="string">    set guicursor=n-v-c:ver5    &quot;</span> 设置光标为竖线</span><br><span class="line">endif</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">&quot;</span> 插件列表</span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">call plug#begin(&#x27;~/.vim/plugged&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Plug &#x27;chxuan/cpp-mode&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;chxuan/vim-edit&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;chxuan/change-colorscheme&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;chxuan/prepare-code&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;mhinz/vim-startify&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;chxuan/tagbar&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;Valloric/YouCompleteMe&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;Yggdroot/LeaderF&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;mileszs/ack.vim&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;easymotion/vim-easymotion&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;haya14busa/incsearch.vim&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;iamcco/mathjax-support-for-mkdp&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;iamcco/markdown-preview.vim&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;jiangmiao/auto-pairs&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;scrooloose/nerdtree&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;tiagofumo/vim-nerdtree-syntax-highlight&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;Xuyuanp/nerdtree-git-plugin&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;godlygeek/tabular&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;tpope/vim-fugitive&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;tpope/vim-surround&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;tpope/vim-commentary&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;tpope/vim-repeat&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;tpope/vim-endwise&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;octol/vim-cpp-enhanced-highlight&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;vim-airline/vim-airline&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;vim-airline/vim-airline-themes&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;ryanoasis/vim-devicons&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;junegunn/vim-slash&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;junegunn/gv.vim&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;kana/vim-textobj-user&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;kana/vim-textobj-indent&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;kana/vim-textobj-syntax&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;kana/vim-textobj-function&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;sgur/vim-textobj-parameter&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;Shougo/echodoc.vim&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;terryma/vim-smooth-scroll&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;rhysd/clever-f.vim&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;rhysd/github-complete.vim&#x27;</span></span><br><span class="line"><span class="string">Plug &#x27;vim-scripts/indentpython.vim&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">call plug#end()            </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> load vim default plugin</span><br><span class="line">runtime macros/matchit.vim</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; 编辑vimrc文件</span></span><br><span class="line"><span class="string">nnoremap &lt;leader&gt;e :edit <span class="variable">$MYVIMRC</span>&lt;cr&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> 查看vimplus的<span class="built_in">help</span>文件</span><br><span class="line">nnoremap &lt;leader&gt;h :edit ~/.vimplus/help.md&lt;cr&gt;</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; 打开当前光标所在单词的vim帮助文档</span></span><br><span class="line"><span class="string">nnoremap &lt;leader&gt;H :execute &quot;</span>:<span class="built_in">help</span> <span class="string">&quot; . expand(&quot;</span>&lt;cword&gt;<span class="string">&quot;)&lt;cr&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> 重新加载vimrc文件</span><br><span class="line">nnoremap &lt;leader&gt;s :<span class="built_in">source</span> <span class="variable">$MYVIMRC</span>&lt;cr&gt;</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; 安装、更新、删除插件</span></span><br><span class="line"><span class="string">nnoremap &lt;leader&gt;&lt;leader&gt;i :PlugInstall&lt;cr&gt;</span></span><br><span class="line"><span class="string">nnoremap &lt;leader&gt;&lt;leader&gt;u :PlugUpdate&lt;cr&gt;</span></span><br><span class="line"><span class="string">nnoremap &lt;leader&gt;&lt;leader&gt;c :PlugClean&lt;cr&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> 打开文件自动定位到最后编辑的位置</span><br><span class="line">autocmd BufReadPost * <span class="keyword">if</span> line(<span class="string">&quot;&#x27;\&quot;&quot;</span>) &gt; 1 &amp;&amp; line(<span class="string">&quot;&#x27;\&quot;&quot;</span>) &lt;= line(<span class="string">&quot;$&quot;</span>) | execute <span class="string">&quot;normal! g&#x27;\&quot;&quot;</span> | endif</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; 主题</span></span><br><span class="line"><span class="string">set background=dark</span></span><br><span class="line"><span class="string">let g:onedark_termcolors=256</span></span><br><span class="line"><span class="string">colorscheme onedark</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> airline</span><br><span class="line"><span class="built_in">let</span> g:airline_theme=<span class="string">&quot;onedark&quot;</span></span><br><span class="line"><span class="built_in">let</span> g:airline_powerline_fonts = 1</span><br><span class="line"><span class="built_in">let</span> g:airline<span class="comment">#extensions#tabline#enabled = 1</span></span><br><span class="line"><span class="keyword">if</span> !exists(<span class="string">&#x27;g:airline_symbols&#x27;</span>)</span><br><span class="line">    <span class="built_in">let</span> g:airline_symbols = &#123;&#125;</span><br><span class="line">endif</span><br><span class="line"><span class="built_in">let</span> g:airline_left_sep = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">let</span> g:airline_left_alt_sep = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">let</span> g:airline_right_sep = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">let</span> g:airline_right_alt_sep = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot; cpp-mode</span></span><br><span class="line"><span class="string">nnoremap &lt;leader&gt;y :CopyCode&lt;cr&gt;</span></span><br><span class="line"><span class="string">nnoremap &lt;leader&gt;p :PasteCode&lt;cr&gt;</span></span><br><span class="line"><span class="string">nnoremap &lt;leader&gt;U :GoToFunImpl&lt;cr&gt;</span></span><br><span class="line"><span class="string">nnoremap &lt;silent&gt; &lt;leader&gt;a :Switch&lt;cr&gt;</span></span><br><span class="line"><span class="string">nnoremap &lt;leader&gt;&lt;leader&gt;fp :FormatFunParam&lt;cr&gt;</span></span><br><span class="line"><span class="string">nnoremap &lt;leader&gt;&lt;leader&gt;if :FormatIf&lt;cr&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> change-colorscheme</span><br><span class="line">nnoremap &lt;silent&gt; &lt;F9&gt; :PreviousColorScheme&lt;cr&gt;</span><br><span class="line">inoremap &lt;silent&gt; &lt;F9&gt; &lt;esc&gt; :PreviousColorScheme&lt;cr&gt;</span><br><span class="line">nnoremap &lt;silent&gt; &lt;F10&gt; :NextColorScheme&lt;cr&gt;</span><br><span class="line">inoremap &lt;silent&gt; &lt;F10&gt; &lt;esc&gt; :NextColorScheme&lt;cr&gt;</span><br><span class="line">nnoremap &lt;silent&gt; &lt;F11&gt; :RandomColorScheme&lt;cr&gt;</span><br><span class="line">inoremap &lt;silent&gt; &lt;F11&gt; &lt;esc&gt; :RandomColorScheme&lt;cr&gt;</span><br><span class="line">nnoremap &lt;silent&gt; &lt;F12&gt; :ShowColorScheme&lt;cr&gt;</span><br><span class="line">inoremap &lt;silent&gt; &lt;F12&gt; &lt;esc&gt; :ShowColorScheme&lt;cr&gt;</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; prepare-code</span></span><br><span class="line"><span class="string">let g:prepare_code_plugin_path = expand(<span class="variable">$HOME</span> . &quot;</span>/.vim/plugged/prepare-code<span class="string">&quot;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> vim-edit</span><br><span class="line">nnoremap Y :CopyText&lt;cr&gt;</span><br><span class="line">nnoremap D :DeleteText&lt;cr&gt;</span><br><span class="line">nnoremap C :ChangeText&lt;cr&gt;</span><br><span class="line">nnoremap &lt;leader&gt;r :ReplaceTo&lt;space&gt;</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; nerdtree</span></span><br><span class="line"><span class="string">nnoremap &lt;silent&gt; &lt;leader&gt;n :NERDTreeToggle&lt;cr&gt;</span></span><br><span class="line"><span class="string">inoremap &lt;silent&gt; &lt;leader&gt;n &lt;esc&gt; :NERDTreeToggle&lt;cr&gt;</span></span><br><span class="line"><span class="string">let g:NERDTreeFileExtensionHighlightFullName = 1</span></span><br><span class="line"><span class="string">let g:NERDTreeExactMatchHighlightFullName = 1</span></span><br><span class="line"><span class="string">let g:NERDTreePatternMatchHighlightFullName = 1</span></span><br><span class="line"><span class="string">let g:NERDTreeHighlightFolders = 1         </span></span><br><span class="line"><span class="string">let g:NERDTreeHighlightFoldersFullName = 1 </span></span><br><span class="line"><span class="string">let g:NERDTreeDirArrowExpandable=&#x27;▷&#x27;</span></span><br><span class="line"><span class="string">let g:NERDTreeDirArrowCollapsible=&#x27;▼&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> YCM</span><br><span class="line"><span class="built_in">let</span> g:ycm_confirm_extra_conf = 0 </span><br><span class="line"><span class="built_in">let</span> g:ycm_error_symbol = <span class="string">&#x27;✗&#x27;</span></span><br><span class="line"><span class="built_in">let</span> g:ycm_warning_symbol = <span class="string">&#x27;✹&#x27;</span></span><br><span class="line"><span class="built_in">let</span> g:ycm_seed_identifiers_with_syntax = 1 </span><br><span class="line"><span class="built_in">let</span> g:ycm_complete_in_comments = 1 </span><br><span class="line"><span class="built_in">let</span> g:ycm_complete_in_strings = 1 </span><br><span class="line"><span class="built_in">let</span> g:ycm_server_python_interpreter = <span class="string">&#x27;/usr/bin/python&#x27;</span></span><br><span class="line"><span class="built_in">let</span> g:ycm_python_binary_path = <span class="string">&#x27;python&#x27;</span></span><br><span class="line">nnoremap &lt;leader&gt;u :YcmCompleter GoToDeclaration&lt;cr&gt;</span><br><span class="line"><span class="string">&quot; 已经使用cpp-mode插件提供的转到函数实现的功能</span></span><br><span class="line"><span class="string">&quot;</span> nnoremap &lt;leader&gt;i :YcmCompleter GoToDefinition&lt;cr&gt; </span><br><span class="line">nnoremap &lt;leader&gt;o :YcmCompleter GoToInclude&lt;cr&gt;</span><br><span class="line">nnoremap &lt;leader&gt;ff :YcmCompleter FixIt&lt;cr&gt;</span><br><span class="line">nmap &lt;F5&gt; :YcmDiags&lt;cr&gt;</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; ctags</span></span><br><span class="line"><span class="string">set tags+=/usr/include/tags</span></span><br><span class="line"><span class="string">set tags+=~/.vim/systags</span></span><br><span class="line"><span class="string">set tags+=~/.vim/x86_64-linux-gnu-systags</span></span><br><span class="line"><span class="string">let g:ycm_collect_identifiers_from_tags_files = 1</span></span><br><span class="line"><span class="string">let g:ycm_semantic_triggers =  &#123;</span></span><br><span class="line"><span class="string">  \   &#x27;c&#x27; : [&#x27;-&gt;&#x27;, &#x27;.&#x27;,&#x27;re![_a-zA-z0-9]&#x27;],</span></span><br><span class="line"><span class="string">  \   &#x27;objc&#x27; : [&#x27;-&gt;&#x27;, &#x27;.&#x27;, &#x27;re!\[[_a-zA-Z]+\w*\s&#x27;, &#x27;re!^\s*[^\W\d]\w*\s&#x27;,</span></span><br><span class="line"><span class="string">  \             &#x27;re!\[.*\]\s&#x27;],</span></span><br><span class="line"><span class="string">  \   &#x27;ocaml&#x27; : [&#x27;.&#x27;, &#x27;#&#x27;],</span></span><br><span class="line"><span class="string">  \   &#x27;cpp,objcpp&#x27; : [&#x27;-&gt;&#x27;, &#x27;.&#x27;, &#x27;::&#x27;,&#x27;re![_a-zA-Z0-9]&#x27;],</span></span><br><span class="line"><span class="string">  \   &#x27;perl&#x27; : [&#x27;-&gt;&#x27;],</span></span><br><span class="line"><span class="string">  \   &#x27;php&#x27; : [&#x27;-&gt;&#x27;, &#x27;::&#x27;],</span></span><br><span class="line"><span class="string">  \   &#x27;cs,java,javascript,typescript,d,python,perl6,scala,vb,elixir,go&#x27; : [&#x27;.&#x27;],</span></span><br><span class="line"><span class="string">  \   &#x27;ruby&#x27; : [&#x27;.&#x27;, &#x27;::&#x27;],</span></span><br><span class="line"><span class="string">  \   &#x27;lua&#x27; : [&#x27;.&#x27;, &#x27;:&#x27;],</span></span><br><span class="line"><span class="string">  \   &#x27;erlang&#x27; : [&#x27;:&#x27;],</span></span><br><span class="line"><span class="string">  \ &#125;</span></span><br><span class="line"><span class="string">let g:ycm_semantic_triggers.c = [&#x27;-&gt;&#x27;, &#x27;.&#x27;, &#x27; &#x27;, &#x27;(&#x27;, &#x27;[&#x27;, &#x27;&amp;&#x27;,&#x27;]&#x27;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> tagbar</span><br><span class="line"><span class="built_in">let</span> g:tagbar_width = 30</span><br><span class="line">nnoremap &lt;silent&gt; &lt;leader&gt;t :TagbarToggle&lt;cr&gt;</span><br><span class="line">inoremap &lt;silent&gt; &lt;leader&gt;t &lt;esc&gt; :TagbarToggle&lt;cr&gt;</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; incsearch.vim</span></span><br><span class="line"><span class="string">map /  &lt;Plug&gt;(incsearch-forward)</span></span><br><span class="line"><span class="string">map ?  &lt;Plug&gt;(incsearch-backward)</span></span><br><span class="line"><span class="string">map g/ &lt;Plug&gt;(incsearch-stay)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> markdown</span><br><span class="line"><span class="built_in">let</span> g:mkdp_auto_start = 0</span><br><span class="line"><span class="string">&quot; Set to 1, Vim will open the preview window on entering the Markdown</span></span><br><span class="line"><span class="string">&quot;</span> buffer.</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> g:mkdp_auto_open = 1</span><br><span class="line"><span class="string">&quot; Set to 1, Vim will automatically open the preview window when you edit a</span></span><br><span class="line"><span class="string">&quot;</span> Markdown file.</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> g:mkdp_auto_close = 1</span><br><span class="line"><span class="string">&quot; Set to 1, Vim will automatically close the current preview window when</span></span><br><span class="line"><span class="string">&quot;</span> switching from one Markdown buffer to another.</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> g:mkdp_refresh_slow = 0</span><br><span class="line"><span class="string">&quot; Set to 1, Vim will just refresh Markdown when saving the buffer or</span></span><br><span class="line"><span class="string">&quot;</span> leaving from insert mode. With default 0, it will automatically refresh</span><br><span class="line"><span class="string">&quot; Markdown as you edit or move the cursor.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">let g:mkdp_command_for_global = 0</span></span><br><span class="line"><span class="string">&quot;</span> Set to 1, the MarkdownPreview <span class="built_in">command</span> can be used <span class="keyword">for</span> all files,</span><br><span class="line"><span class="string">&quot; by default it can only be used in Markdown files.</span></span><br><span class="line"><span class="string">let g:mkdp_open_to_the_world = 0</span></span><br><span class="line"><span class="string">&quot;</span> Set to 1, the preview server will be available to others <span class="keyword">in</span> your network.</span><br><span class="line"><span class="string">&quot; By default, the server only listens on localhost (127.0.0.1).</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">nmap &lt;silent&gt; &lt;F7&gt; &lt;Plug&gt;MarkdownPreview</span></span><br><span class="line"><span class="string">imap &lt;silent&gt; &lt;F7&gt; &lt;Plug&gt;MarkdownPreview</span></span><br><span class="line"><span class="string">nmap &lt;silent&gt; &lt;F8&gt; &lt;Plug&gt;StopMarkdownPreview</span></span><br><span class="line"><span class="string">imap &lt;silent&gt; &lt;F8&gt; &lt;Plug&gt;StopMarkdownPreview</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> vim-easymotion</span><br><span class="line"><span class="built_in">let</span> g:EasyMotion_smartcase = 1</span><br><span class="line">map &lt;leader&gt;w &lt;Plug&gt;(easymotion-bd-w)</span><br><span class="line">nmap &lt;leader&gt;w &lt;Plug&gt;(easymotion-overwin-w)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; nerdtree-git-plugin</span></span><br><span class="line"><span class="string">let g:NERDTreeIndicatorMapCustom = &#123;</span></span><br><span class="line"><span class="string">    \ &quot;</span>Modified<span class="string">&quot;  : &quot;</span>✹<span class="string">&quot;,</span></span><br><span class="line"><span class="string">    \ &quot;</span>Staged<span class="string">&quot;    : &quot;</span>✚<span class="string">&quot;,</span></span><br><span class="line"><span class="string">    \ &quot;</span>Untracked<span class="string">&quot; : &quot;</span>✭<span class="string">&quot;,</span></span><br><span class="line"><span class="string">    \ &quot;</span>Renamed<span class="string">&quot;   : &quot;</span>➜<span class="string">&quot;,</span></span><br><span class="line"><span class="string">    \ &quot;</span>Unmerged<span class="string">&quot;  : &quot;</span>═<span class="string">&quot;,</span></span><br><span class="line"><span class="string">    \ &quot;</span>Deleted<span class="string">&quot;   : &quot;</span>✖<span class="string">&quot;,</span></span><br><span class="line"><span class="string">    \ &quot;</span>Dirty<span class="string">&quot;     : &quot;</span>✗<span class="string">&quot;,</span></span><br><span class="line"><span class="string">    \ &quot;</span>Clean<span class="string">&quot;     : &quot;</span>✔︎<span class="string">&quot;,</span></span><br><span class="line"><span class="string">    \ &#x27;Ignored&#x27;   : &#x27;☒&#x27;,</span></span><br><span class="line"><span class="string">    \ &quot;</span>Unknown<span class="string">&quot;   : &quot;</span>?<span class="string">&quot;</span></span><br><span class="line"><span class="string">    \ &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> LeaderF</span><br><span class="line">nnoremap &lt;leader&gt;f :LeaderfFile ~&lt;cr&gt;</span><br><span class="line"><span class="built_in">let</span> g:Lf_WildIgnore = &#123;</span><br><span class="line">            \ <span class="string">&#x27;dir&#x27;</span>: [<span class="string">&#x27;.svn&#x27;</span>,<span class="string">&#x27;.git&#x27;</span>,<span class="string">&#x27;.hg&#x27;</span>,<span class="string">&#x27;.vscode&#x27;</span>,<span class="string">&#x27;.wine&#x27;</span>,<span class="string">&#x27;.deepinwine&#x27;</span>,<span class="string">&#x27;.oh-my-zsh&#x27;</span>],</span><br><span class="line">            \ <span class="string">&#x27;file&#x27;</span>: [<span class="string">&#x27;*.sw?&#x27;</span>,<span class="string">&#x27;~$*&#x27;</span>,<span class="string">&#x27;*.bak&#x27;</span>,<span class="string">&#x27;*.exe&#x27;</span>,<span class="string">&#x27;*.o&#x27;</span>,<span class="string">&#x27;*.so&#x27;</span>,<span class="string">&#x27;*.py[co]&#x27;</span>]</span><br><span class="line">            \&#125;</span><br><span class="line"><span class="built_in">let</span> g:Lf_UseCache = 0</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; ack</span></span><br><span class="line"><span class="string">nnoremap &lt;leader&gt;F :Ack!&lt;space&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> echodoc.vim</span><br><span class="line"><span class="built_in">let</span> g:echodoc_enable_at_startup = 1</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; tabular</span></span><br><span class="line"><span class="string">nnoremap &lt;leader&gt;l :Tab /\|&lt;cr&gt;</span></span><br><span class="line"><span class="string">nnoremap &lt;leader&gt;= :Tab /=&lt;cr&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> vim-smooth-scroll</span><br><span class="line">noremap &lt;silent&gt; &lt;c-u&gt; :call smooth_scroll<span class="comment">#up(&amp;scroll, 0, 2)&lt;CR&gt;</span></span><br><span class="line">noremap &lt;silent&gt; &lt;c-d&gt; :call smooth_scroll<span class="comment">#down(&amp;scroll, 0, 2)&lt;CR&gt;</span></span><br><span class="line">noremap &lt;silent&gt; &lt;c-b&gt; :call smooth_scroll<span class="comment">#up(&amp;scroll*2, 0, 4)&lt;CR&gt;</span></span><br><span class="line">noremap &lt;silent&gt; &lt;c-f&gt; :call smooth_scroll<span class="comment">#down(&amp;scroll*2, 0, 4)&lt;CR&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot; gv</span></span><br><span class="line"><span class="string">nnoremap &lt;leader&gt;g :GV&lt;cr&gt;</span></span><br><span class="line"><span class="string">nnoremap &lt;leader&gt;G :GV!&lt;cr&gt;</span></span><br><span class="line"><span class="string">nnoremap &lt;leader&gt;gg :GV?&lt;cr&gt;</span></span><br></pre></td></tr></table></figure><h3 id="部分插件说明"><a class="markdownIt-Anchor" href="#部分插件说明"></a> 部分插件说明</h3><p>插件详细说明参考github官方文档。</p><ol><li><p>cpp-mode</p><ul><li>leader+y 拷贝函数（一般在头文件中拷贝函数原型）；</li><li>leader+p 粘贴函数（一般用在函数实现的cpp文件中），自动加上{}，方便编写函数实现；</li><li>leader+U跳到函数实现，头文件必须和函数实现同名（后缀不同）。</li></ul></li><li><p>vim-edit</p><ul><li>Y  按Y后会进入底行模式输入要拷贝从光标位置到哪那个字母为止，如果该行有多个输入字母会高亮显示，按高亮字母选择到哪个止；</li><li>D 剪贴操作，和Y操作类似；</li><li>C 更改，操作类似，实现剪贴并进入插入模式。</li></ul></li><li><p>change-colorscheme</p><ul><li>F9键切换到上个主题；</li><li>F10键切换到下个主题；</li><li>F11键随机选则一个主题；</li><li>F12键显示当前主题名字；</li></ul><p>如果与系统快捷键有冲突可以自行更改映射。</p></li><li><p>prepare-code</p><ul><li>vim 文件名.后缀，会根据后缀生成预定义代码；</li><li>预定义代码在~/.vim/plugged/prepare-code/snippet/,可自己设置。</li></ul></li><li><p>vim-commentary</p><ul><li>注释当前行按gcc；</li><li>视图模式选中按gc进行注释。</li></ul></li></ol><p>持续更新。。。。。。</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ios越狱</title>
      <link href="2017/03/16/ios%E8%B6%8A%E7%8B%B1/"/>
      <url>2017/03/16/ios%E8%B6%8A%E7%8B%B1/</url>
      
        <content type="html"><![CDATA[<p>以unc0ver为例，越狱插件商店为cydia。</p><h2 id="开始越狱"><a class="markdownIt-Anchor" href="#开始越狱"></a> 开始越狱</h2><ol><li>下载unc0ver</li><li>打开unc0ver，点越狱，期间可能会重启，如果失败继续点越狱，直到成功；</li></ol><h2 id="常用软件源"><a class="markdownIt-Anchor" href="#常用软件源"></a> 常用软件源</h2><ol><li>雷锋源：<a href="http://apt.abcydia.com/">http://apt.abcydia.com/</a></li><li>Ai-小苹果：<a href="http://apt.cydiabc.top/">http://apt.cydiabc.top/</a></li><li>Alice源：<a href="http://apt.coolstar.xyz/">http://apt.coolstar.xyz/</a></li><li>Cydiakk中文源：<a href="http://apt.cydiakk.com/">http://apt.cydiakk.com/</a></li><li>Cydia贴吧源：<a href="http://apt.cydiaba.cn/">http://apt.cydiaba.cn/</a></li><li>Hack YouriPhone：<a href="http://repo.hackyouriphone.org/">http://repo.hackyouriphone.org/</a></li><li>多米诺骨牌源：<a href="http://apt.wxhbts.com/">http://apt.wxhbts.com/</a></li></ol><h2 id="常用插件"><a class="markdownIt-Anchor" href="#常用插件"></a> 常用插件</h2><ol><li>Springtomize 4</li><li>ios12 helper</li><li>Flex 3</li><li>Filza File</li><li>AFC2</li><li>Appsync Unified</li><li>TinybBanners</li><li>DataMeter</li><li>ConditionlWiFi4</li><li>GoodWiFi</li><li>Liberty Lite</li><li>MiDevice</li><li>SilentRecorder</li><li>电话助手</li><li>CallBar XS</li></ol><h2 id="字体修改"><a class="markdownIt-Anchor" href="#字体修改"></a> 字体修改</h2><ol><li>越狱商店软件源直接下载字体插件，卸载即可恢复原生字体；</li><li>手动替换，从网上下载字体，替换系统字体即可，如想恢复原生字体，下载原生字体替换即可，ios6-12原生字体备份地址<a href="https://pan.baidu.com/s/1jH6Z8SA">点击下载</a>，提取码8h98；</li><li>关于修改字体替换后拨号盘，密码输入等地方字体不变的解决办法：设置语言和地区为其他语言和其他地区，重启手机再换回即可。</li></ol><h2 id="主题修改"><a class="markdownIt-Anchor" href="#主题修改"></a> 主题修改</h2><ol><li>打开cydia下载主题平台，可选择snowboard主题平台或其他平台；</li><li>下载主题资源，可以在cydia下载主题资源插件，也可以网上下载主题资源放到主题文件夹/library/Themes</li><li>打开snowboard打开主题。</li></ol><h2 id="清除越狱环境"><a class="markdownIt-Anchor" href="#清除越狱环境"></a> 清除越狱环境</h2><ol><li>打开unc0ver，点右上角设置；</li><li>打开Restore RootFS选项，其余选项可全部关闭；</li><li>返回主界面，点Restore RootFS；</li><li>等待完成重启，桌面可能还有cydia或其他插件图标，可选择抹除全部内容恢复（慎用）。</li></ol>]]></content>
      
      
      <categories>
          
          <category> ios </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ios </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux达人养成计划1</title>
      <link href="2016/08/03/Linux%E8%BE%BE%E4%BA%BA%E5%85%BB%E6%88%90%E8%AE%A1%E5%88%921/"/>
      <url>2016/08/03/Linux%E8%BE%BE%E4%BA%BA%E5%85%BB%E6%88%90%E8%AE%A1%E5%88%921/</url>
      
        <content type="html"><![CDATA[<ol><li><p>了解Linux内核版本；<a href="http://xn--www-ff0fv09m.kernel.org">官网www.kernel.org</a> ；</p></li><li><p>版本2.6.16，2为主版本，6为此版本，18为末版本；</p></li><li><p>开源软件：</p><p>apache</p><p>Nginx     web服务器</p><p>开源软件特点：</p><p>使用自由，研究自由，散布改变自由</p></li><li><p>Linux应用领域：企业服务器，嵌入式应用；</p></li><li><p><a href="http://xn--www-lp6e.netcraft.com">在www.netcraft.com</a> 可以查看网站服务器；</p></li><li><p>硬盘分区：在mbr文件系统中，只能有4个主分区，即使没有分这么多分区也会占用盘符，一般设置一个扩展分区，在扩展分区建立逻辑分区；</p></li><li><p>格式化的目的主要是写入文件系统；</p></li><li><p>数据块block，默认为4kb，存储的最小空间；</p></li><li><p>文件的id号innode，其他信息还有修改时间和权限；</p></li><li><p>对Linux写入文件系统两个步骤：分数据块，分区列表</p></li><li><p>硬件设备文件名：</p><p>SATA/USB硬盘    /dev/sd[a-p]</p><p>光驱                     /dev/cdrom或/dev/hdc</p><p>打印机  25针      /dev/lp[0-2]</p><p>​              USB      /dev/lp[0-15]</p><p>鼠标                   /dev/mouse</p></li><li><p>挂载：</p><p>必须的分区：   /根分区</p><p>​                          swap分区</p><p>推荐分区：       /boot        启动分区</p></li><li><p>localhost为主机名；</p></li><li><p>Windows局域网内主机不能同名，Linux可以；</p></li><li><p>ls -i 显示文件innode；</p></li><li><p>常用3中文件：普通文件，目录文件，连接文件；</p></li><li><p>ls -lh 加入h参数显示能让人一目了然的文件大小；</p></li><li><p>以.开头的文件为隐藏文件；</p></li><li><p>cp -a 相当于cp -pdr<br />-p 复制连带文件属性<br />-d 复制目录<br />-r 复制链接文件连带属性</p></li><li><p>/boot 启动分区<br />/bin   /sbin   /usr/bin   /usr/sbin都是命令的存储目录</p></li><li><p>/etc配置文件；</p></li><li><p>/lib函数库；</p></li><li><p>/mnt 挂载目录，默认是空的；</p></li><li><p>/proc和/sys两个是内存挂载点，不能直接操作；</p></li><li><p>硬链接：相同的innode和存储block，可以看作是同一个文件，不针对目录；</p></li><li><p>软连接：建立软链接如果不在同一目录，必须写绝对路径，有自己的innode和block，只保存源文件的文件名和innode，没有实际的文件数据；</p></li><li><p>文件搜索命令：locate 文件名  在后台数据库按文件名搜索，搜索速度更快，会跳过一些目录下的文件，不能搜索到刚刚新建的文件，需使用updatedb更新数据库；</p></li><li><p>whereis 命令 显示命令所在路径和帮助文件路径，-b只看可执行文件，-m只看帮助文件；</p></li><li><p>whatis 命令 显示命令功能；</p></li><li><p>which 命令 查看命令及别名；</p></li><li><p>cd是shell内置的命令；</p></li><li><p>PATH环境变量定义的是系统搜索命令的路径，即常用环境变量的作用；</p></li><li><p>find [搜索范围]  [搜索条件]</p><p>find -iname 不区分大小写</p><p>find /root -user root 按所有者搜索</p><p>-nouser 没有所有者的文件</p><p>find /var/log -mtime +10 十天前文件</p><p>10  十天前当天</p><p>-10 十天内</p><p>atime 文件访问时间</p><p>ctime改变文件属性时间</p><p>mtime修改文件内容时间</p><p>find / -size 根据文件大小</p><p>find / -innm 根据innode</p></li><li><p>grep -v取反 -i忽略大小写</p></li><li><p>man帮助命令，级别1，查看命令帮助，级别2内核调用函数，级别3，函数和函数库…；</p></li><li><p>info帮助命令，可以显示中文</p></li><li><p>gzip 源文件 压缩为gz格式，源文件会消失，保留源文件使用gzip -C源文件 &gt;压缩文件</p></li><li><p>gzip -r目录 压缩目录下所有子文件，不能压缩目录，gzip -d或者gunzip解压缩；</p></li><li><p>bzip2 压缩文件 压缩为bzip2文件不保留源文件，bzip2 -k 源文件 保留源文件 -d解压缩</p></li><li><p>shutdown [选项] 时间  -c取消前一个关机命令 -h关机 -r重启</p></li><li><p>shutdown -r 5:30 &amp; 放入后台，shutdown -r now</p></li><li><p>halt关机，reboot重启；</p></li><li><p>init 6重启；</p></li><li><p>系统运行级别：</p><ol start="0"><li>关机</li><li>常用户</li><li>不完全多用户不含NFS服务</li><li>完全多用户</li><li>未分配，系统保留</li><li>图形界面</li><li>重启</li></ol></li><li><p>在/etc/inittab 文件可以修改默认运行级别；</p></li><li><p>退出登录命令logout；</p></li><li><p>挂载命令mount 查看已挂载分区</p></li><li><p>fdisk -l 查看系统已识别的分区；</p></li><li><p>Linux默认不支持NTFS文件系统，挂载了也是只读；</p></li><li><p>w命令查看登录用户信息：</p><ul><li>user 登录用户名</li><li>TTY 登录终端</li><li>from 从哪个IP地址登录</li><li>login@ 登录时间</li><li>IDLE 用户闲置时间</li><li>JCPU连接的用户所有进程占用的时间</li><li>PCPU当前进程所占用的时间</li><li>WHAT 当前正在运行的命令</li></ul></li><li><p>who命令，命令输出：用户名，登录终端，登录时间；</p></li><li><p>last命令，用户名，登录终端，登录IP，登录时间，退出登录时间（在线时间）；</p></li><li><p>Linux常用快捷键：CTRL</p><ul><li>+c强制终止当前命令</li><li>+l清屏</li><li>+a光标移动到命令行首</li><li>+e光标移动到命令行尾</li><li>+u把光标所在位置删除到行首</li><li>+z把命令放入到后台</li><li>+r在历史命令中搜索</li></ul></li><li><p>历史命令history [选项] [历史命令保存文件]</p><ul><li>-c清空历史命令</li><li>-w把缓存命令写入文件~.bash_history    /etc/profile可修改最大条数</li><li>!n重复执行第n条命令</li><li>!!重复执行上一条命令</li><li>!字串重复执行最后一条以字串开头的命令</li></ul></li><li><p>标准输出重定向 &gt;重写   &gt;&gt;追加；</p></li><li><p>标准错误重定向 2&gt;        2&gt;&gt;;</p></li><li><p>&quot;&gt;&gt;&quot;文件2&gt;&amp;1以追加的方式把正确输出和错误都保存在同一个文件中；</p></li><li><p>shell命令解释器，分类：C shell ，Bash</p></li><li><p>脚本执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#第一个shell脚本</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;天上掉下个林妹妹&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>脚本执行方式：</p><ul><li>赋予执行权限，直接运行 chmod 755 *.sh   ./**.sh</li><li>通过Bash调用执行脚本  bash *.sh</li></ul></li><li><p>命令别名与快捷键</p><ul><li>alias 命令 查看已设置快捷命令别名，快捷键</li><li>alias **=’…’，设置快捷命令，暂时有效，永久有效需要修改~/.bashrc文件</li><li>unalias删除别名</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vim入门</title>
      <link href="2016/06/20/Vim%E5%85%A5%E9%97%A8/"/>
      <url>2016/06/20/Vim%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="vim基础操作"><a class="markdownIt-Anchor" href="#vim基础操作"></a> Vim基础操作</h2><ol><li><p>进入插入模式：i光标当前插入，a当前光标后插入，o向下增加一行插入，I行首插入，A行尾插入，O向上插入一行插入；</p></li><li><p>插入模式下：</p><ul><li>ctrl+h 删除一个字符</li><li>ctrl+w删除一个单词</li><li>ctrl+u删除到行首</li></ul></li><li><p>normal模式下：</p><ul><li>ctrl+e向上一次滚动一行</li><li>ctrl+f向下翻页</li><li>ctrl+b向上翻页</li><li>ctrl+d向下翻半页</li><li>ctrl+u向上翻半页</li></ul></li><li><p>k/j/l/l上下左右键；</p></li><li><p>ctrl+[或ctrl+c相当于按esc键；</p></li><li><p>gi快速返回到上次编辑位置；</p></li><li><p>w/W下个单词开头；</p></li><li><p>e/E下个单词结尾；</p></li><li><p>b/B上个单词开头；</p></li><li><p>关于word/WORD：不以/以空格为分割的单词；</p></li><li><p>f+一个字符：跳转该行到第一个匹配的字符，按，跳转到上个匹配字符，按；跳转到下个匹配的字符，F+一个字符则相反；</p></li><li><p>按0跳到行首，^跳到行首非空字符，$跳到行尾；</p></li><li><p>按{}()跳到以空行为分割的段首/段尾；</p></li><li><p>gg/G跳到文首/文尾；</p></li><li><p>nG跳到n行；</p></li><li><p>H/M/L跳到开头/中间/结尾；</p></li><li><p>ctrl+o快速返回上次编辑的地方；</p></li><li><p>zz把屏幕置为中间；</p></li><li><p>x删除一个字符；</p></li><li><p>dw删除一个单词，diw删除一个word，daw删除一个WORD；</p></li><li><p>dd删除一行，ndd删除n行，dt）删除到）的内容，d$删除到行尾，d0删除到行首；</p></li><li><p>v进入视图模式，V进入试图模式以行为选择单位；</p></li><li><p>r+字符将光标字符替换为输入字符；</p></li><li><p>s+字符将光标字符替换为输入字符并进入插入模式；</p></li><li><p>4s删除4个字符替换并进入插入模式；</p></li><li><p>R一直替换后面的字符，S整行删除并进入插入模式；</p></li><li><p>ciw删除一个word进行更改，caw删除一个WORD进行更改；</p></li><li><p>ct)删除到)的内容进行更改；</p></li><li><p>set hls设置高亮；</p></li><li><p>/前向搜索，？反向搜索，按n/N跳到下/上一个匹配</p></li><li><p>替换命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:[range]s[ubstitude]/&#123;pattern&#125;/&#123;string&#125;/flags</span><br></pre></td></tr></table></figure><ul><li><p>range，比如10，20表示第10行到20行，%表示全部</p></li><li><p>pattern要替换的格式</p></li><li><p>string替换后文本</p></li><li><p>flags</p><ul><li>g全局</li><li>c确认，可以确认或拒绝修改</li><li>n报告匹配到的次数，不替换</li></ul></li></ul></li><li><p>精确匹配替换</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%s/\&lt;quack\&gt;/jiao/</span><br></pre></td></tr></table></figure></li></ol><h2 id="vim基础常识"><a class="markdownIt-Anchor" href="#vim基础常识"></a> Vim基础常识</h2><ol><li><p>buffer:打开的一个文件的内存缓冲区；</p></li><li><p>窗口:buffer可视化的分割区域；</p></li><li><p>tab:可以组织窗口为一个工作区；</p></li><li><p>buffer切换，：ls列出当前buffer，：b n跳到第n个buffer；:b pre/next/first/last跳到前一个/下一个/第一个/最后一个buffer；</p></li><li><p>一个缓冲区可以分割多个窗口，每个窗口可以打开不同的缓冲区；</p></li><li><p>：vsp垂直分割窗口，</p></li><li><p>：sp垂直分割窗口；</p></li><li><p>ctrl+h/j/k/l移动到左/下/上/右窗口；</p></li><li><p>ctrl+H/J/K/L将当前窗口移动到左/下/上/右；</p></li><li><p>tab标签页，将窗口分组；</p></li><li><p>新建标签页，:tabnew 文件名；</p></li><li><p>gt切换下一个标签页，gT切换上一个标签页；</p></li><li><p>tab filename 在新建标签页打开filename文件；</p></li><li><p>:tabc(lose)关闭当前标签页；</p></li><li><p>:tabo(oly)只保留当前标签页；</p></li><li><p>文本对象：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[number]&lt;<span class="built_in">command</span>&gt;[text object]</span><br></pre></td></tr></table></figure></li><li><p>viw选中一个word；</p></li><li><p>vaw选择一个WORD；</p></li><li><p>复制粘贴：y/p，v选中，p粘贴，yiw复制一个word，yaw复制一个WORD；</p></li><li><p>yy复制一行，dd剪切一行，nyy复制n行，ndd剪切n行；</p></li><li><p>插入模式下，ctrl+c复制，ctrl+v粘贴；</p></li><li><p>:set autoindent设置自动换行；</p></li><li><p>设置自动换行后粘贴后混乱，:set paste粘贴后再:set nopaste使自动换行继续起作用；</p></li><li><p>vim的寄存器</p><ul><li>默认使用无名寄存器</li><li>ayiw 复制到a寄存器，biw复制到b寄存器</li><li>寄存器名字从a-z</li><li>“”代表无名寄存器</li><li>“0代表复制寄存器</li><li>”+复制到系统剪贴板</li><li>“%表示当前文件名</li><li>”，上次插入的文本</li></ul></li><li><p>:echo has(‘clipboard’)，显示1代表支持clipboard，:set clipboard=unaned后可以直接对系统剪贴板进行操作；</p></li><li><p>:e!不保存更改重新加载文件；</p></li><li><p>:colorscheme查看当前配色，:colorscheme ctrl+d查看系统提供的配色，:colorscheme 配色名字 选择配色；</p></li><li><p>:syntax on打开高亮；</p></li><li><p>宏，q+寄存器录制操作，再按q停止录制，v进入视图模式选择要操作的文本，@寄存器重复宏操作（录制的操作）；</p></li><li><p>按v进入视图选择要操作的文本，:’&lt;’&gt;normal @a，选中文本进行宏操作；</p></li><li><p>不使用宏，:’&lt;’&gt;normal 依次输入操作表示对选中文本各行进行操作；</p></li><li><p>ctrl+n/p补全单词；</p></li><li><p>ctrl+x+f补全文件名；</p></li><li><p>ctrl+x+o配合插件进行补全；</p></li><li><p>配置文件~/.vimrc；</p></li><li><p>常用设置及映射，set nu设置行号，colorscheme 配色名字 修改配色，syntax on打开高亮，set hlssearch设置搜索高亮，set pasteloggle=<F2>设置F2键映射为:set passte；</p></li><li><p>设置,为leader键，let mapleder=&quot;,&quot;</p></li><li><p>inoremap，i表示插入模式，nore表示非递归，map表示映射；</p></li><li><p>inoremap <leader>w<ESC>:w<cr>设置leader键加w键代替系统的:w回车；</p></li><li><p>vim脚本vimscript；</p></li><li><p>映射：把一个操作映射到另一个操作；</p></li><li><p>:map - x用-代替x删除字符；</p></li><li><p>:map <space> viw用空格键代替进入视图模式并选中一个word；</p></li><li><p>映射有关n/v/i分别表示normal模式/视图模式/插入模式；</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux基础</title>
      <link href="2016/04/16/Linux%E5%9F%BA%E7%A1%80/"/>
      <url>2016/04/16/Linux%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h2 id="常用命令"><a class="markdownIt-Anchor" href="#常用命令"></a> 常用命令</h2><ol><li>history 查看历史命令 ，可以方向键上下查看之前的命令；</li><li>ls (list)查看文件信息<ul><li>-l 列表显示详细信息（快捷命令ll）</li><li>-a 显示隐藏文件或目录</li><li>-d 显示目录属性而不是内容</li><li>-h 显示大小以k，M显示</li><li>-R 递归显示子目录的内容</li><li>-lrt 按时间顺序排序</li></ul></li><li>关于通配符<ul><li>*代表任意多个字符</li><li>？代表一个字符</li><li>[a-z]代表a到z的所有字符中的一个字符</li><li>[abcde]代表abcde中的一个字符</li></ul></li><li>绝对路径和相对路径<ul><li>以&quot;/&quot; 开头的路径为绝对路径</li><li>不是以&quot;/&quot;开头的路径为相对路径</li></ul></li></ol><h2 id="目录操作"><a class="markdownIt-Anchor" href="#目录操作"></a> 目录操作</h2><ol><li><p>cd --change dir 更改目录</p><ul><li>打开用户家目录的几种方式<ul><li>空/空格</li><li>~</li><li>/home/用户名</li><li>$HOME</li></ul></li></ul></li><li><p>tree</p><p>如果不存在需要安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum -y install tree</span><br></pre></td></tr></table></figure><p>-C 以颜色区分文件</p></li><li><p>mkdir 创建目录</p><ul><li>-p递归创建目录</li></ul></li><li><p>rm 删除文件/目录</p><ul><li>-r 递归删除子文件目录</li><li>-rf 强制删除</li></ul></li><li><p>rmdir 删除目录</p><ul><li>-p 检测到删除目录后上级目录为空，上级目录一并删除</li></ul></li><li><p>which 显示对应的命令所在的路径</p></li><li><p>whereis 在特定目录中查找符合条件的文件。这些文件应属于原始代码、二进制文件，或是帮助文件</p></li></ol><h2 id="文件操作"><a class="markdownIt-Anchor" href="#文件操作"></a> 文件操作</h2><ol><li><p>touch 文件如果不存在则创建,如果存在更改访问时间</p></li><li><p>rm 删除文件或者目录</p><ul><li>-r  递归删除子目录</li><li>rm -rf * 删除当前目录内全部内容(强制删除,慎用)</li></ul></li><li><p>cp (copy)拷贝文件或者目录</p><ul><li><p>-a 它保留链接、文件属性，并复制目录下的所有内容。其作用等于dpR参数组合</p></li><li><p>-p 除复制文件的内容外，还把修改时间和访问权限也复制到新文件中</p></li><li><p>cp  [option] srcpath  despath</p><ul><li>despath 是一个目录,将srcpath拷贝到 despath 目录下</li><li>despath 不是一个目录,在despath上级目录(…/xxx),在 …/下创建一个xxx文件,并将srcpath的内容拷贝进来</li></ul></li></ul></li><li><p>mv (move)移动文件或者目录</p><ul><li>mv 文件名 新文件名  改文件名</li></ul></li></ol><h2 id="文件内容操作"><a class="markdownIt-Anchor" href="#文件内容操作"></a> 文件内容操作</h2><ol><li>cat filename<ul><li>直接显示文件信息到屏幕</li></ul></li><li>more 分屏显示文件信息<ul><li>回车 逐行显示</li><li>空格,一页一页显示</li></ul></li><li>less 分屏显示文件信息<ul><li>回车或者上下方向键可以反复查看文件内容</li></ul></li><li>head 查看文件头 ,默认显示10行内容<ul><li>-n 指定显示的行数</li></ul></li><li>tail 查看文件尾 ,默认显示10行内容<ul><li>-n 可以指定行数</li><li>-f  可以一直跟踪文件末尾</li></ul></li></ol><h2 id="统计信息相关"><a class="markdownIt-Anchor" href="#统计信息相关"></a> 统计信息相关</h2><ol><li>wc  — word cout 统计文件内容<ul><li>-l  显示行</li><li>-w 单词</li><li>-c  字节数</li></ul></li><li>du 查看目录占用空间</li><li>df 显示磁盘空间信息</li></ol><h2 id="文件权限和用户属性"><a class="markdownIt-Anchor" href="#文件权限和用户属性"></a> 文件权限和用户属性</h2><ol><li><p>常见目录作用</p><ul><li>/ 根目录</li><li>/bin 可执行文件所在目录</li><li>/media 挂载设备媒体,U盘,光驱等</li><li>/mnt 该目录是为了让用户挂载别的文件系统</li><li>/usr (unix system resources)  庞大和复杂的目录,很多应用会安装到此目录</li><li>/usr/local 用户自己安装软件的目录</li><li>/sbin 超级管理员root的可执行文件目录</li><li>/proc 这个目录是系统内存的映射,会保留进程运行的一些信息</li><li>/etc 系统软件的启动和配置目录</li><li>/etc/passwd 用户存放文件(man 5 passwd查看文件格式)</li><li>/dev 设备文件所在目录</li></ul></li><li><p>文件属性</p><ul><li>-普通文件</li><li>d目录文件</li><li>l链接文件</li><li>b块文件</li><li>c字符设备文件</li><li>p管道文件</li><li>s套接字文件</li></ul></li><li><p>文件权限</p><ul><li>-r 读</li><li>-w写</li><li>-x执行</li></ul></li><li><p>改变文件权限</p><ul><li><p>chmod</p><ul><li><p>chmod [u|g|o|a]  [+|-][r|w|x] filename</p></li><li><p>用数字的方式改变文件权限</p><ul><li><p>给a.out 用户可读可写,组可读可写,其他用户可读</p><p>chmod 0664 a.out</p></li></ul></li></ul></li><li><p>注意目录需要有可执行权限,才能进入目录</p></li><li><p>chown与chgrp 改变用户和改变组</p></li><li><p>–需要用管理员root去修改文件归属</p></li><li><p>chown 用户:组  文件名|目录</p></li><li><p>chgro   组   文件名|目录</p></li></ul></li></ol><h2 id="查找和检索"><a class="markdownIt-Anchor" href="#查找和检索"></a> 查找和检索</h2><ol><li><p>find dir [option]  内容</p><ul><li><p>-name 按照名字查找</p></li><li><p>find ./ -name “*.c”</p></li><li><p>-type 按照类型查找</p></li><li><p>-size  按照大小查找</p></li><li><p>find ./ -size +1M       -size -5M 大于1M,并且小于5M,如果不写±,代表等于</p></li><li><p>-maxdepth 最深路径</p></li><li><p>find ./ -maxdepth       1 -size +1M 当前路径下大于1M</p></li><li><p>find ./ -maxdepth      2 -size +1M -exec ls -l {} ;  -ok 相对安全模式,没一条指令都提示</p></li></ul></li><li><p>grep命令 内容过滤</p><ul><li>grep [option] 内容 dir|filename</li><li>-r 递归子目录</li><li>-n  显示行号</li><li>find ./ -type      f|grep txt  find与grep结合起来使用</li><li>cat ggeqG.c |grep      main  查找指定文件内是否有main</li><li>tail -f      tcpsvr.1705 |grep connect   分析日志</li></ul></li><li><p>locate 以文件名查找文件，从数据库查找，更新数据库使用updatedb命令</p></li></ol><h2 id="压缩"><a class="markdownIt-Anchor" href="#压缩"></a> 压缩</h2><ol><li>zip<ul><li>zip -r 压缩包名 原材料  – -r代表递归子目录</li><li>zip -r bb.zip bb hello</li><li>unzip bb.zip 解压</li></ul></li><li>tar<ul><li>cvf 文件/目录 压缩文件.tar</li><li>xvf 文件/目录 解压文件.tar</li></ul></li><li>gz(tar参数加z)<ul><li>czvf 文件/目录 压缩文件.tar.gz</li><li>xzvf 文件/目录 解压文件.tar.gz</li></ul></li><li>bzip2(tar参数加j)<ul><li>cjvf 文件/目录 压缩文件.tar</li><li>xjvf 文件/目录 解压文件.tar</li></ul></li><li>rar<ul><li>a 代表压缩</li><li>-r 递归子目录</li><li>rar a -r  压缩包(可以无后缀)  原材料   — 打包</li><li>rar x 压缩包名  — 释放</li></ul></li></ol><h2 id="软件安装卸载"><a class="markdownIt-Anchor" href="#软件安装卸载"></a> 软件安装卸载</h2><ol><li>yum命令<ul><li>yum install app名字   安装软件</li><li>yum remove app名字  卸载软件</li></ul></li><li>rpm命令<ul><li>rpm -i app名字 安装软件</li><li>yum remove app名字 卸载软件</li></ul></li></ol><h2 id="系统管理"><a class="markdownIt-Anchor" href="#系统管理"></a> 系统管理</h2><ol><li>进程：正在运行的程序；</li><li>进程管理的作用：<ul><li>判断服务器的运行状态</li><li>查看系统中的所有进程</li><li>杀死进程</li></ul></li><li>ps aux或者ps -le查看系统中所有进程，使用BSD操作系统格式；</li><li>查看进程信息：<ul><li>USER用户名</li><li>PID进程ID</li><li>%CPU该进程占用CPU百分比</li><li>%MEM占用物理内存的百分比</li><li>VSZ占用虚拟内存的大小</li><li>RSS占用实际物理内存大小</li><li>TTY该进程在哪个终端中运行，tty1-7代表控制台终端，1-6本地字符界面终端，7是图形终端，pts/0-255代表虚拟终端</li><li>STAT：进程状态<ul><li>R运行</li><li>S睡眠</li><li>T停止</li><li>s包含子进程</li><li>+位于后台</li></ul></li><li>START：该进程的启动时间</li><li>TIME：该进程占用CPU的运算时间，不是系统时间</li><li>COMMAND：产生此进程的命令名</li></ul></li><li>pstree查看进程树<ul><li>-p查看进程的PID</li><li>-u显示进程的所属用户</li></ul></li><li>top动态查看进程信息每3秒刷新；</li><li>杀死进程<ul><li>kill -l查看所有信号</li><li>kill -1 进程id 平滑重启</li><li>kill -9 强制终止进程</li><li>killall [选项] [信号]进程名  -i交互式，-I忽略进程名大小写</li><li>pkill [选项] [信号]进程名 多了-t 终端号 按照终端号提出用户</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
